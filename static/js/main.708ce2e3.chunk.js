(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{178:function(e,t,n){},211:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(19),s=n.n(i),o=(n(178),n(10)),l=n(21),u=n(310),d=n(311),b=n(294),j=n(312),h=n(295),f=n(333),p=n(309),O=n(279),m=n(281),x=n(25),g=n(6),v=n.n(g),y=n(8),w=n(16),k=n(77),S=n.n(k),N=n(88),I=n(159),C=n(306),B=n(318),T=n(319),F=n(135),R=n(285),P=n(286),M=n(287),D=n(288),E=n(289),J=n(290),_=n(291),L=n(292),A=Object(O.a)((function(e){return Object(m.a)({TopBar:{background:"#ffffff",display:"flex",flexGrow:1},left:{transition:"all 1s linear",padding:"7px",display:"block",float:"left","margin-left":"-15px","margin-right":"-5px","padding-left":"0px"},middle:Object(l.a)({flexGrow:1,display:"block",float:"left",padding:"7px"},e.breakpoints.down("sm"),{padding:"0px"}),right:{transition:"all 1s linear",padding:"7px",display:"block",justifySelf:"flex-end","margin-right":"-15px","padding-right":"0px"},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),notMobile:Object(l.a)({},e.breakpoints.down("sm"),{display:"none"})})})),q=n(283),H=n(332),z=n(151),G=n.n(z),U=Object(q.a)({limit:6});function K(e){var t=e.value,n=e.onChange;return Object(a.jsx)(H.a,{filterOptions:U,className:e.className,style:e.style,freeSolo:!0,options:e.options,onChange:function(){var t=Object(y.a)(v.a.mark((function t(a,r){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(r),e.search(r)();case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),renderInput:function(r){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a,Object(w.a)(Object(w.a)({},Object(w.a)(Object(w.a)({},r.inputProps),{},{ref:null})),{},{onCancelSearch:Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(""),e.search("")();case 2:case"end":return t.stop()}}),t)}))),style:e.style,className:e.onlyMobile,value:t,onChange:function(t){""===t&&e.search("")(),r.inputProps.onChange({target:{value:t}}),n(t)},onRequestSearch:e.onRequestSearch})),Object(a.jsx)("div",{ref:r.InputProps.ref,children:Object(a.jsx)("div",Object(w.a)({},r.inputProps))})]})}})}function W(e){var t=A();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(a.jsxs)("div",{className:t.TopBar,children:[Object(a.jsx)("div",{className:t.middle,children:Object(a.jsx)(K,{options:e.autocompleteOptions,search:e.buttonFunctions.search,className:t.notMobile,value:e.searchBarText,onChange:function(t){return e.setSearchBarText(t)},onRequestSearch:e.buttonFunctions.search(e.searchBarText)})}),Object(a.jsxs)("div",{className:t.right,children:[Object(a.jsxs)("div",{style:{float:"left"},children:[Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"search",onClick:e.buttonFunctions.mobileSearch,children:Object(a.jsx)(R.a,{})}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"select",onClick:e.buttonFunctions.select,children:Object(a.jsx)(P.a,{})})]}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"upload",onClick:e.buttonFunctions.upload,children:Object(a.jsx)(M.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cancel",onClick:e.buttonFunctions.unselect,children:Object(a.jsx)(D.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cloud_download",onClick:e.buttonFunctions.download,children:Object(a.jsx)(E.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:e.buttonFunctions.addToAlbum,children:Object(a.jsx)(J.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:e.buttonFunctions.delete,children:Object(a.jsx)(_.a,{})})]})]}),Object(a.jsx)(L.a,{style:{marginTop:-2,display:e.show?"block":"none",flexGrow:1,marginLeft:-24,marginRight:-24}})]})}var V=n(27),Z=(n(211),n(293));function X(){var e=Object(V.f)();return Object(a.jsx)("div",{className:"TopLeftBar",style:{alignSelf:"flex-start",justifySelf:"left",padding:10,marginRight:-25},children:Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"back",onClick:function(t){t.stopPropagation(),e.goBack()},children:Object(a.jsx)(Z.a,{})})})}var Y=n(155),Q=n(296),$=n(282),ee=n(303),te=n(334),ne=n(329),ae=n(307),re=n(308),ce=n(302),ie=n(313),se=n(314),oe=n(315),le=n(4),ue=n(61),de=n(87),be=n.n(de),je=n(153),he=n.n(je),fe=n(42),pe=n(43),Oe=n(301),me=n(45),xe=n(297),ge=n(300),ve=n(299),ye=n(298),we=n(331),ke=Object(O.a)({root:{"&:hover":{backgroundColor:"transparent"}}});function Se(e){var t=ke(),n=Object(r.useState)(!1),c=Object(o.a)(n,2),i=c[0],s=c[1];return Object(a.jsxs)(b.a,{button:!0,onClick:function(){i?e.remove(e.album.id):e.add(e.album.id),s(!i)},children:[Object(a.jsx)(we.a,{className:t.root,color:"primary",checked:i,disableRipple:!0}),Object(a.jsx)(h.a,{primary:e.album.name})]})}function Ne(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1],s=Object(x.a)(),l=Object(Q.a)(s.breakpoints.down("sm")),u=function(e){i([].concat(Object(me.a)(c),[e]))},d=function(e){i(c.filter((function(t){return t!==e})))},b=function(t){return Object(y.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t&&c.length>0)){n.next=3;break}return n.next=3,e.cb(c);case 3:return i([]),n.next=6,e.setOpen(!1);case 6:null===(a=e.closeCallback)||void 0===a||a.call(e);case 7:case"end":return n.stop()}}),n)})))};return Object(a.jsx)("div",{children:Object(a.jsxs)(xe.a,{fullScreen:l,open:e.open,onClose:b(!1),style:{zIndex:1e6},"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsx)(ye.a,{id:"responsive-dialog-title",children:"Add to Album"}),Object(a.jsx)(ve.a,{children:e.albums.map((function(e){return Object(a.jsx)(Se,{album:e,add:u,remove:d},e.id)}))}),Object(a.jsx)(ge.a,{children:Object(a.jsx)(Oe.a,{onClick:b(!0),color:"primary",autoFocus:!0,children:"Add"})})]})})}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=function(n){return Object(a.jsxs)(a.Fragment,{children:[t&&t instanceof Function?t(n):t,e&&Object(a.jsx)(F.a,{size:"small",color:"inherit",onClick:function(){e(n)},children:Object(a.jsx)(ce.a,{fontSize:"small"})})]})};return n}function Ce(e){var t=c.a.useState(!1),n=Object(o.a)(t,2),r=n[0],i=n[1],s=function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(e.photos,n,e.enqueueSnackbar,e.closeSnackbar);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(Oe.a,{color:"inherit",onClick:function(){return i(!0)},children:"Add to album"}),Object(a.jsx)(Ne,{open:r,setOpen:i,albums:e.albums,cb:s,closeCallback:e.closeAddSnackbar})]})}var Be=function(){function e(t,n,a){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.albums=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n,this.albums=a}return Object(pe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being uploaded"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){var n=this;this.snackMsg&&this.closeSnackbar(this.snackMsg);var r="".concat(e.length," element").concat(1===e.length?" was":"s were"," uploaded"),c=Ie(this.closeSnackbar,this.albums?function(t){return Object(a.jsx)(Ce,{photos:e,closeSnackbar:n.closeSnackbar,closeAddSnackbar:function(){t&&n.closeSnackbar(t)},enqueueSnackbar:n.enqueueSnackbar,albums:n.albums})}:null),i=0,s=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},i++)}))]}),o=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(r,{variant:"success",autoHideDuration:3e3,action:c}),0!==t.length&&this.enqueueSnackbar(s,{variant:"error",autoHideDuration:null,action:o})}}],[{key:"createInstance",value:function(e,t,n){return e&&t?new this(e,t,n):null}}]),e}(),Te=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(pe.a)(e,[{key:"begin",value:function(e,t){var n="".concat(e," element").concat(1===e?" is":"s are"," being added to ").concat(t," album").concat(1===t?"":"s"),r=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(n,{variant:"info",autoHideDuration:null,action:r})}},{key:"end",value:function(e,t,n){this.snackMsg&&this.closeSnackbar(this.snackMsg);var r="".concat(e.length," element").concat(1===e.length?" was":"s were"," added to ").concat(t.length," album").concat(1===t.length?"":"s"),c=Ie(this.closeSnackbar),i=0,s=Object(a.jsxs)("div",{children:["The following errors occured:",n.map((function(e){return Object(a.jsx)("div",{children:e.toString()},i++)}))]}),o=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(r,{variant:"success",autoHideDuration:3e3,action:c}),0!==n.length&&this.enqueueSnackbar(s,{variant:"error",autoHideDuration:null,action:o})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),Fe=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(pe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being deleted"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){this.snackMsg&&this.closeSnackbar(this.snackMsg);var n="".concat(e.length," element").concat(1===e.length?" was":"s were"," deleted"),r=Ie(this.closeSnackbar),c=0,i=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},c++)}))]}),s=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"success",autoHideDuration:3e3,action:r}),0!==t.length&&this.enqueueSnackbar(i,{variant:"error",autoHideDuration:null,action:s})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),Re=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(pe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being downloaded"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){this.snackMsg&&this.closeSnackbar(this.snackMsg);var n="".concat(e.length," element").concat(1===e.length?" was":"s were"," downloaded"),r=Ie(this.closeSnackbar),c=0,i=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},c++)}))]}),s=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"success",autoHideDuration:3e3,action:r}),0!==t.length&&this.enqueueSnackbar(i,{variant:"error",autoHideDuration:null,action:s})}}],[{key:"createInstance",value:function(e,t,n){return e&&t?new this(e,t):null}}]),e}(),Pe=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(pe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being removed from this album"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){this.snackMsg&&this.closeSnackbar(this.snackMsg);var n="".concat(e.length," element").concat(1===e.length?" was":"s were"," removed from this album"),r=Ie(this.closeSnackbar),c=0,i=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},c++)}))]}),s=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"success",autoHideDuration:3e3,action:r}),0!==t.length&&this.enqueueSnackbar(i,{variant:"error",autoHideDuration:null,action:s})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),Me=window.location.protocol+"//"+window.location.hostname+(window.location.port?":":"")+window.location.port+"//ImageStore";function De(e){return new Promise((function(t){return setTimeout(t,e)}))}console.log(Me),be.a.defaults.baseURL=Me,be.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var Ee=[{id:"6738313",name:"my_cat_1.jpg",height:5458,width:3026},{id:"6738314",name:"my_cat_2.jpg",height:2866,width:4035},{id:"6738315",name:"my_cat_3.jpg",height:4498,width:3374},{id:"6738316",name:"my_cat_4.jpg",height:3033,width:2333},{id:"6738317",name:"my_cat_5.jpg",height:5472,width:3648},{id:"6738318",name:"my_cat_6.jpg",height:3024,width:3024},{id:"6738319",name:"my_cat_7.jpg",height:3803,width:2853},{id:"6738320",name:"my_cat_8.jpg",height:3648,width:5472},{id:"6738321",name:"my_cat_9.jpg",height:6016,width:4e3},{id:"6738322",name:"my_cat_10.jpg",height:2834,width:2834}],Je=[{id:6553538,name:"My stock kitten",cover:"6738313",imagecount:3}],_e={6553538:["6738313","6738314","6738315","6738316","6738317","6738318","6738321","6738322","6738319","6738320"]},Le={6738313:["cat"],6738314:["cat"],6738315:["cat","building"],6738316:["cat"],6738317:["cat"],6738318:["cat"],6738319:["cat"],6738320:["cat","furniture"],6738321:["cat","nature"],6738322:["cat"]};function Ae(e,t,n,a){return qe.apply(this,arguments)}function qe(){return(qe=Object(y.a)(v.a.mark((function e(t,n,a,r){var c,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Be.createInstance(n,a,r),e.prev=1,null===c||void 0===c||c.begin(t.getAll("file").length),e.next=5,De(200);case 5:return i=[],s=["You cannot upload photos to the demo page, please download the self-hosted version"],null===c||void 0===c||c.end(i,s),e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(1),null===c||void 0===c||c.end([],[e.t0]),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function He(e,t,n){return ze.apply(this,arguments)}function ze(){return(ze=Object(y.a)(v.a.mark((function e(t,n,a){var r,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe.createInstance(n,a),e.prev=1,null===r||void 0===r||r.begin(t.length),c=JSON.parse(sessionStorage.getItem("photos")||JSON.stringify(Ee)),i=c.filter((function(e){return!t.includes(e.id)})),sessionStorage.setItem("photos",JSON.stringify(i)),e.next=8,De(300);case 8:null===r||void 0===r||r.end(t,[]),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),null===r||void 0===r||r.end([],[e.t0]),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function Ge(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(y.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(sessionStorage.getItem("albums")||JSON.stringify(Je)),r=a.map((function(e){return e.id!=t?e:{id:e.id,name:e.name,cover:n,imagecount:e.imagecount}})),sessionStorage.setItem("albums",JSON.stringify(r)),console.log(n),e.next=6,De(200);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return We.apply(this,arguments)}function We(){return(We=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("albums")||JSON.stringify(Je)),a=n.map((function(e){return e.id!==t?e:{id:e.id,name:e.name,cover:null,imagecount:e.imagecount}})),sessionStorage.setItem("albums",JSON.stringify(a)),e.next=5,De(200);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(y.a)(v.a.mark((function e(t){var n,a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("albums")||JSON.stringify(Je)),a=n.map((function(e){return parseInt(e.id)})).reduce((function(e,t){return Math.max(e,t)})),r=""+a+1,n.push({id:r,name:t,cover:null,imagecount:0}),sessionStorage.setItem("albums",JSON.stringify(n)),(c=JSON.parse(sessionStorage.getItem("albumPhotos")||JSON.stringify(_e)))[r]=[],sessionStorage.setItem("albumPhotos",JSON.stringify(c)),e.next=10,De(200);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("albums")||JSON.stringify(Je)),a=n.filter((function(e){return e.id!==t})),sessionStorage.setItem("albums",JSON.stringify(a)),e.next=5,De(200);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(y.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(sessionStorage.getItem("albums")||JSON.stringify(Je)),r=a.map((function(e){return e.id!==t?e:{id:e.id,name:n,cover:e.cover,imagecount:e.imagecount}})),sessionStorage.setItem("albums",JSON.stringify(r)),e.next=5,De(200);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n,a){return tt.apply(this,arguments)}function tt(){return(tt=Object(y.a)(v.a.mark((function e(t,n,a,r){var c,i,s,o,l,u,d,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Te.createInstance(a,r);try{null===c||void 0===c||c.begin(t.length,n.length),i=JSON.parse(sessionStorage.getItem("albumPhotos")||JSON.stringify(_e)),s=Object(ue.a)(t);try{for(s.s();!(o=s.n()).done;){l=o.value,u=Object(ue.a)(n);try{for(u.s();!(d=u.n()).done;)b=d.value,i[b].includes(l)||i[b].push(l)}catch(j){u.e(j)}finally{u.f()}}}catch(j){s.e(j)}finally{s.f()}sessionStorage.setItem("albumPhotos",JSON.stringify(i)),null===c||void 0===c||c.end(t,n,[])}catch(h){null===c||void 0===c||c.end([],[],[h])}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t,n,a){return at.apply(this,arguments)}function at(){return(at=Object(y.a)(v.a.mark((function e(t,n,a,r){var c,i,s,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Pe.createInstance(a,r),e.prev=1,i=JSON.parse(sessionStorage.getItem("albumPhotos")||JSON.stringify(_e)),s=Object(ue.a)(t);try{for(l=function(){var e=o.value;i[n]=i[n].filter((function(t){return t!==e}))},s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}return sessionStorage.setItem("albumPhotos",JSON.stringify(i)),e.next=8,De(200);case 8:null===c||void 0===c||c.end(t,[]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),null===c||void 0===c||c.end([],[e.t0]);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function rt(e,t,n){return ct.apply(this,arguments)}function ct(){return(ct=Object(y.a)(v.a.mark((function e(t,n,a){var r,c,i,s,o,l,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(r=Re.createInstance(n,a),e.prev=3,null===r||void 0===r||r.begin(t.length),1!==t.length){e.next=14;break}return s=t[0],e.next=9,be()({url:"/media/".concat(s.id),method:"GET",responseType:"blob"});case 9:o=e.sent,c=o.data,i=s.name,e.next=21;break;case 14:return l=new he.a,e.next=17,Promise.all(t.map(function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be()({url:"/media/".concat(t.id),method:"GET",responseType:"blob"});case 2:n=e.sent,l.file(t.name,n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:return e.next=19,l.generateAsync({type:"blob"});case 19:c=e.sent,i="photos.zip";case 21:u=window.URL.createObjectURL(new Blob([c])),(d=document.createElement("a")).href=u,d.download=i,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u),null===r||void 0===r||r.end([],[]),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(3),null===r||void 0===r||r.end([],[e.t0]);case 35:case"end":return e.stop()}}),e,null,[[3,32]])})))).apply(this,arguments)}function it(e,t){return st.apply(this,arguments)}function st(){return(st=Object(y.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(300);case 2:(a=JSON.parse(sessionStorage.getItem("labels")||JSON.stringify(Le)))[t]=a[t].filter((function(e){return e!==n})),sessionStorage.setItem("labels",JSON.stringify(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(y.a)(v.a.mark((function e(t,n){var a,r,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(300);case 2:a=JSON.parse(sessionStorage.getItem("labels")||JSON.stringify(Le)),r=Object(ue.a)(t);try{for(r.s();!(c=r.n()).done;)i=c.value,a[i]||(a[i]=[]),a[i].includes(n[0])||a[i].push(n[0])}catch(s){r.e(s)}finally{r.f()}sessionStorage.setItem("labels",JSON.stringify(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(y.a)(v.a.mark((function e(t){var n,a,r,c,i,s,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse(sessionStorage.getItem("labels")||JSON.stringify(Le)),a=[],r=Object(ue.a)(t);try{for(r.s();!(c=r.n()).done;)if(i=c.value,n[parseInt(i)]){s=Object(ue.a)(n[parseInt(i)]);try{for(s.s();!(o=s.n()).done;)l=o.value,a.includes(l)||a.push(l)}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}return e.abrupt("return",{status:200,data:a});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(y.a)(v.a.mark((function e(t){var n,a,r,c,i,s,o,l,u,d,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse(sessionStorage.getItem("photos")||JSON.stringify(Ee)),a=JSON.parse(sessionStorage.getItem("albums")||JSON.stringify(Je)),r=JSON.parse(sessionStorage.getItem("albumPhotos")||JSON.stringify(_e)),""!==t&&(a=a.filter((function(e){return!!e.name.includes(t)}))),c=[],i=Object(ue.a)(a);try{for(i.s();!(s=i.n()).done;){o=s.value,l=0,u=Object(ue.a)(r[o.id]);try{for(u.s();!(d=u.n()).done;)b=d.value,n.map((function(e){return e.id})).includes(b)&&l++}catch(j){u.e(j)}finally{u.f()}c.push({id:o.id,name:o.name,cover:o.cover,imagecount:l})}}catch(j){i.e(j)}finally{i.f()}return De(200),e.abrupt("return",{status:200,data:c});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("photos")||JSON.stringify(Ee)),a=JSON.parse(sessionStorage.getItem("labels")||JSON.stringify(Le)),t&&""!==t&&(n=n.filter((function(e){return!!e.name.includes(t)||!(!a[e.id]||!a[e.id].includes(t))}))),De(200),e.abrupt("return",{status:200,data:n});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(y.a)(v.a.mark((function e(t,n){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(sessionStorage.getItem("photos")||JSON.stringify(Ee)),r=JSON.parse(sessionStorage.getItem("albumPhotos")||JSON.stringify(_e)),c=r[t],console.log(c),a=a.filter((function(e){return c.includes(e.id)})),console.log(n),n&&""!==n&&(a=a.filter((function(e){return!!e.name.includes(n)}))),De(200),e.abrupt("return",{status:200,data:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=n(316),xt=n(330),gt=n(328),vt=n(304),yt=n(305);n(235);gt.a.use([vt.a,yt.a]);var wt=Object(Y.a)({palette:{primary:{main:"#ffffff",dark:"#ffffff",light:"#ffffff"},secondary:{main:"#ff0000"}}}),kt=340,St=Object(O.a)((function(e){return Object(m.a)({root:{display:"flex"},drawer:{width:kt,flexShrink:0},drawerPaper:{width:kt},drawerHeader:Object(w.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1),justifyContent:"space-between"},e.mixins.toolbar),content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-0},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:kt},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),notMobile:Object(l.a)({},e.breakpoints.down("sm"),{display:"none"}),chip:{margin:e.spacing(.5)}})}));function Nt(e){var t=Object(V.f)(),n=Object(r.useState)(window.location.pathname.split("/").slice(-1)[0]),c=Object(o.a)(n,2),i=c[0],s=c[1],f=Object(r.useState)(0),O=Object(o.a)(f,2),m=O[0],g=O[1],k=Object(r.useState)(0),S=Object(o.a)(k,2),I=S[0],B=S[1],T=Object(r.useState)(!1),R=Object(o.a)(T,2),P=R[0],M=R[1],D=Object(r.useState)("Loading"),E=Object(o.a)(D,2),J=E[0],_=E[1],L=e.photos.findIndex((function(e){return e.id===i})),A=e.photos[L];Object(r.useEffect)((function(){e.setViewId(i)}),[i,e.setViewed]),Object(r.useEffect)((function(){q()}),[i]);var q=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut([i]);case 2:if(200!==(t=e.sent).status){e.next=7;break}_(t.data),e.next=12;break;case 7:return e.t0=window,e.next=10,t.data;case 10:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=St(Object(x.a)()),z=function(n){var a=e.photos,r=window.location.pathname.substr("/ImageStore".length,window.location.pathname.lastIndexOf("/")+1-"/ImageStore".length);t.replace("".concat(r).concat(a[n].id)),s(a[n].id)},G=function(){g(100),B(0)},U=function(){B(100),g(0)},K=Object(w.a)(Object(w.a)({},e.buttonFunctions),{},{delete:function(){var n=Object(y.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 1===e.photos.length?t.goBack():z(0===L?1:L-1),n.next=3,e.buttonFunctions.delete(a);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object(y.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 1===e.photos.length?t.goBack():z(0===L?1:L-1),n.next=3,e.buttonFunctions.remove(a);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),info:function(){M(!P)}}),W=Object(r.useRef)(null),Z=Object(r.useRef)(null),Y=Object(r.useRef)(null),te=Object(Q.a)(wt.breakpoints.down("sm"));return Object(a.jsxs)("div",{className:H.root,children:[Object(a.jsx)(C.a,{}),Object(a.jsx)("main",{className:Object(le.a)(H.content,Object(l.a)({},H.contentShift,P)),children:Object(a.jsxs)($.a,{theme:wt,children:[Object(a.jsxs)("div",{className:"root",style:{display:"".concat(te?"none":"grid"),width:"calc(100% - ".concat(P?kt:0,"px)"),transition:wt.transitions.create("width",{easing:wt.transitions.easing.sharp,duration:wt.transitions.duration.leavingScreen})},children:[Object(a.jsx)("div",{ref:Z,className:"leftIm",onMouseEnter:U,onMouseMove:U,children:Object(a.jsx)(F.a,{style:{transition:"0.01s linear",opacity:0===L?0:I,backgroundColor:"#222222",alignSelf:"center",justifySelf:"left",position:"absolute",marginLeft:"20px",height:"64px",width:"64px"},className:"IconButton",color:"primary","aria-label":"left",children:Object(a.jsx)(ae.a,{style:{height:"64px",width:"64px"}})})}),Object(a.jsx)("div",{className:"center",onClick:function(){return t.goBack()},onMouseEnter:function(){B(0),g(0)}}),Object(a.jsx)("div",{ref:Y,className:"rightIm",onMouseEnter:G,onMouseMove:G,children:Object(a.jsx)(F.a,{style:{transition:"0.01s linear",opacity:L===e.photos.length-1?0:m,backgroundColor:"#222222",alignSelf:"center",justifySelf:"right",position:"absolute",marginRight:"20px",height:"64px",width:"64px"},className:"IconButton",color:"primary","aria-label":"left",children:Object(a.jsx)(re.a,{style:{height:"64px",width:"64px"}})})})]}),Object(a.jsx)(Bt,{slideChange:z,index:L,photos:e.photos,open:P,swiperRef:W,prevRef:Z,nextRef:Y}),Object(a.jsxs)("div",{className:"rootTop",style:{display:"flex",justifyContent:"space-between",width:"calc(100% - ".concat(P?kt:0,"px)"),transition:wt.transitions.create("width",{easing:wt.transitions.easing.sharp,duration:wt.transitions.duration.leavingScreen})},children:[Object(a.jsx)(X,{}),e.topRightBar(i,K)]})]})}),Object(a.jsxs)(p.a,{className:H.drawer,variant:"persistent",anchor:"right",open:P,classes:{paper:H.drawerPaper},children:[Object(a.jsxs)("div",{className:H.drawerHeader,children:[Object(a.jsx)(N.a,{variant:"h5",children:" Info"}),Object(a.jsx)(F.a,{style:{justifySelf:"end"},onClick:function(){M(!1)},children:Object(a.jsx)(ce.a,{})})]}),Object(a.jsx)(u.a,{}),Object(a.jsxs)(d.a,{children:[Object(a.jsxs)(b.a,{children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(h.a,{primary:A?A.name:"",secondary:"Useful info"})]}),Object(a.jsxs)(b.a,{children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(se.a,{})}),Object(a.jsx)(h.a,{primary:"Labels"})]}),Object(a.jsx)(b.a,{children:Object(a.jsx)("ul",{style:{display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:0,margin:0,marginLeft:5,marginTop:-15},children:"Loading"===J?Object(a.jsx)(ee.a,{size:20,style:{margin:10}}):Object(a.jsxs)(a.Fragment,{children:[J.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(It,{id:i,label:e,removeLabel:it,getLabels:q})},e)})),Object(a.jsx)(Ct,{addLabel:ot,getLabels:q,id:i})]})})})]})]})]})}function It(e){var t=St(Object(x.a)()),n=Object(r.useState)(!1),c=Object(o.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(te.a,{label:e.label,onDelete:Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,e.removeLabel(e.id,e.label);case 3:e.getLabels();case 4:case"end":return t.stop()}}),t)}))),className:t.chip,deleteIcon:i?Object(a.jsx)(ee.a,{style:{height:20,width:20,padding:1.5,marginRight:7}}):void 0})}function Ct(e){var t=St(Object(x.a)()),n=Object(r.useState)(""),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1],j=function(){var t=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.next=3,e.addLabel([e.id],[i]);case 3:s(""),b(!1),e.getLabels();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(te.a,{style:{width:120},label:Object(a.jsx)(ne.a,{style:{height:25,marginBottom:5,marginLeft:5},value:i,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(j(),e.preventDefault())}}),onKeyPress:function(e){console.log("Pressed keyCode ".concat(e.key)),"Enter"===e.key&&e.preventDefault()},onDelete:j,className:t.chip,deleteIcon:d?Object(a.jsx)(ee.a,{style:{height:20,width:20,padding:1.5,marginRight:7}}):Object(a.jsx)(oe.a,{style:{transform:"rotate(0deg)"}})})}var Bt=function(e){var t,n=Object(r.useState)(1),c=Object(o.a)(n,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){s(i+1)}),[e.photos,e.open]),0===e.photos.length?null:Object(a.jsx)(xt.a,{className:"imageHolder",spaceBetween:50,slidesPerView:1,virtual:!0,style:{width:"calc(100vw - ".concat(e.open?kt:0,"px)"),zIndex:-1,position:"absolute"},navigation:{prevEl:e.prevRef.current?e.prevRef.current:void 0,nextEl:e.nextRef.current?e.nextRef.current:void 0},initialSlide:e.index>=e.photos.length?e.photos.length-1:e.index,onInit:function(t){t.params.navigation.prevEl=e.prevRef.current,t.params.navigation.nextEl=e.nextRef.current,t.navigation.update()},onSlideChange:function(t){e.slideChange(t.activeIndex)},children:(t=e.photos,t.map((function(e,t){return Object(a.jsx)(mt.a,{virtualIndex:t,style:{alignSelf:"center",justifySelf:"center"},children:Object(a.jsx)("img",{className:"display",alt:e.id,style:{objectFit:"scale-down",height:"100vh",width:"100%"},src:Me+"/media/"+e.id})},e.id)})))},i)},Tt=n(105),Ft=n(103),Rt=Object(O.a)({photoDiv:{padding:10,"align-items":"center","justify-content":"center",display:"flex",position:"relative",transition:"0.05s linear"},photoBox:{transition:"0.05s linear",position:"absolute",left:15,top:15,height:20,width:20}});function Pt(e){var t=Me+"/media/thumb_"+e.id,n=Object(r.useState)(""),c=Object(o.a)(n,2),i=c[0],s=c[1];Object(r.useEffect)((function(){var t=setTimeout((function(){return s(Me+"/media/thumb_"+e.id)}),500);return function(){return clearTimeout(t)}}),[e.id]),Object(r.useEffect)((function(){e.isScrolling||s(t)}));var l=e.selected?.9:1,u=Object(r.useState)(0),d=Object(o.a)(u,2),b=d[0],j=d[1],h=e.anySelected()?255:b,f=Rt();return Object(a.jsxs)("div",{className:f.photoDiv,style:{height:e.y,width:e.x},onMouseEnter:function(){return j(.4)},onMouseLeave:function(){return j(0)},children:[Object(a.jsx)("div",{onClick:e.imageClick,children:Object(a.jsx)("div",{style:{backgroundColor:"#eeeeee",height:e.y-5,width:e.x-5},children:Object(a.jsx)("div",{style:{transition:"0.05s linear",transform:"scale(".concat(l,")"),backgroundImage:""===i?"none":"url(".concat(i,")"),height:e.y-5,width:e.x-5,backgroundSize:"100% 100%"}})})}),(b||e.anySelected(),Object(a.jsx)("input",{className:f.photoBox,style:{opacity:h},readOnly:!0,checked:e.selected,type:"checkbox",onClick:e.click}))]})}var Mt=300,Dt=function(e){return e.data.linNum<=e.index?Object(a.jsx)("div",{style:Object(w.a)(Object(w.a)({},e.style),{},{display:"flex",transition:"0.05s linear"}),children:e.data.rowPics[e.index].map((function(t){return n=t,r=e.data.rowH[e.index],c=e.data.props,i=e.isScrolling,Object(a.jsx)(Pt,{id:n.id,x:n.width*r/n.height,y:r,click:c.clickHandler(n.id),imageClick:c.imageClickHandler(n.id),selected:c.selected.includes(n.id),anySelected:c.anySelected,outZoom:.9,isScrolling:i},n.id);var n,r,c,i}))}):Object(a.jsx)("div",{children:e.data.rowPics[e.index]})},Et=function(e){var t=e.onScroll,n=e.forwardedRef,c=e.style,i=e.children,s=Object(r.useCallback)((function(e){n(e?e.view:null)}),[n]);return Object(a.jsx)(Ft.Scrollbars,{ref:s,style:Object(w.a)(Object(w.a)({},c),{},{overflow:"hidden"}),onScroll:t,children:i})},Jt=c.a.forwardRef((function(e,t){return Object(a.jsx)(Et,Object(w.a)(Object(w.a)({},e),{},{forwardedRef:t}))}));function _t(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],s=Object(r.useRef)(null);Object(r.useEffect)((function(){var t,n;null===(t=s.current)||void 0===t||t.resetAfterIndex(0);var a=d.findIndex((function(t){return 0!==t.filter((function(t){return t.id===e.viewId})).length}));c||1===a||null===(n=s.current)||void 0===n||n.scrollToItem(a+e.lines.length,"smart"),i(!0)}),[e.width,e.photos,e.heights]);var l=function(e,t){for(var n=[],a=[],r=0;r!==e.length;){for(var c=[],i=0;r!==e.length&&(0===i||Math.abs(Mt-Mt*t/i)>Math.abs(Mt-Mt*t/(i+e[r].width/e[r].height*Mt)));)c.push(e[r]),i+=e[r].width/e[r].height*Mt,r++;a.push(c),r!==e.length||t<i?n.push(Mt*t/i):n.push(Mt)}return{rowH:n,rowPics:a}}(e.photos,e.width-12),u=l.rowH,d=l.rowPics,b=[].concat(Object(me.a)(e.heights),Object(me.a)(u)),j=[].concat(Object(me.a)(e.lines),Object(me.a)(d));return Object(a.jsx)(Tt.a,{useIsScrolling:!0,overscanCount:10,height:e.height,ref:s,itemData:{rowH:b,rowPics:j,props:e,linNum:e.lines.length},itemCount:b.length,itemSize:function(e){return e!==b.length-1?b[e]:b[e]+20},width:e.width-1,outerElementType:Jt,children:Dt})}var Lt=n(317);function At(e){return Object(a.jsxs)("div",{className:"TopRightBar",style:{alignSelf:"flex-start",justifySelf:"right",padding:10},children:[Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"info",onClick:function(t){t.stopPropagation(),e.buttonFunctions.info()},children:Object(a.jsx)(Lt.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"download",onClick:function(t){t.stopPropagation(),e.buttonFunctions.download(e.id)},children:Object(a.jsx)(E.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:function(t){t.stopPropagation(),e.buttonFunctions.addToAlbum(e.id)},children:Object(a.jsx)(J.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:function(t){t.stopPropagation(),e.buttonFunctions.delete(e.id)},children:Object(a.jsx)(_.a,{})})]})}var qt=n(76),Ht=n(78),zt=n(104),Gt=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(pe.a)(e,[{key:"begin",value:function(e){var t=0,n=Object(a.jsxs)("div",{children:["The following errors occured:",e.map((function(e){return Object(a.jsx)("div",{children:"".concat(e.file.name,": ").concat(e.errors[0].message)},t++)}))]}),r=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"error",autoHideDuration:null,action:r})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),Ut=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"/ImageStore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MAX_SIZE||52428800..toString()),Kt=240,Wt=Object(O.a)((function(e){return Object(m.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:Kt,flexShrink:0}),appBar:Object(l.a)({background:"white"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(Kt,"px)"),marginLeft:Kt}),menuButton:Object(l.a)({color:e.palette.primary.main,marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(w.a)(Object(w.a)({},e.mixins.toolbar),{},{height:64}),drawerPaper:{width:Kt},topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,paddingLeft:12,display:"flex",flexDirection:"column",height:"100vh"},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"})})}));function Vt(e){var t=Wt(),n=Object(r.useState)([]),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)([]),u=Object(o.a)(l,2),d=u[0],b=u[1],j=Object(r.useState)([]),h=Object(o.a)(j,2),f=h[0],p=h[1],O=Object(r.useState)(!1),m=Object(o.a)(O,2),x=m[0],g=m[1],k=Object(r.useState)(!1),R=Object(o.a)(k,2),P=R[0],D=R[1],E=Object(r.useState)(!0),J=Object(o.a)(E,2),_=J[0],L=J[1],A=Object(r.useState)(""),q=Object(o.a)(A,2),H=q[0],z=q[1],G=Object(Ht.b)(),U=G.enqueueSnackbar,Z=G.closeSnackbar,X=Object(zt.a)({noClick:!0,noKeyboard:!0,accept:"image/jpeg, image/png"}),Y=X.getRootProps,Q=X.open,$=X.getInputProps,ee=X.acceptedFiles,te=X.fileRejections,ne=X.isDragActive;Object(r.useEffect)((function(){Te(ee,te)}),[ee,te]);var ae=Object(r.useState)(!1),re=Object(o.a)(ae,2),ce=re[0],ie=re[1],se=Object(r.useState)(""),oe=Object(o.a)(se,2),le=oe[0],ue=oe[1],de=Object(r.useState)(""),be=Object(o.a)(de,2),je=be[0],he=be[1],fe=Object(r.useState)([]),pe=Object(o.a)(fe,2),Oe=pe[0],me=pe[1];Object(r.useEffect)((function(){Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.length){e.next=4;break}me([]),e.next=9;break;case 4:return e.t0=me,e.next=7,ut(i.map((function(e){return e.id})));case 7:e.t1=e.sent.data,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))()}),[i]);var xe=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,ht(je);case 3:if(200!==(t=e.sent).status){e.next=9;break}s(t.data),L(!1),e.next=14;break;case 9:return e.t0=window,e.next=12,t.data;case 12:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt("");case 2:if(200!==(t=e.sent).status){e.next=7;break}b(t.data),e.next=12;break;case 7:return e.t0=window,e.next=10,t.data;case 10:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){xe(),ge()}),[je]);var ve=Object(V.f)(),ye=function(e){return function(){ke()?we(e)():ve.push("/view/".concat(e))}},we=function(e){return function(){var t=f.slice();t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),p(t),0===t.length&&g(!1)}},ke=function(){return 0!==f.length||x},Se=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.unselect(),e.next=3,et(f,t,U,Z);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie={delete:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addToAlbum:function(e){p([e]),D(!0)},download:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(i.filter((function(e){return t===e.id})),U,Z);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ce=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(i.filter((function(e){return e.id!==t}))),e.next=3,He([t],U,Z);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be={delete:function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.unselect(),e.next=3,He(f,U,Z);case 3:return s(i.filter((function(e){return!f.includes(e.id)}))),e.next=6,xe();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unselect:function(){p([]),g(!1)},upload:function(){Q()},settings:function(){},select:function(){g(!x)},addToAlbum:function(){D(!0)},download:function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.unselect(),e.next=3,rt(i.filter((function(e){return f.includes(e.id)})),U,Z);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),search:function(e){return Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:he(e);case 1:case"end":return t.stop()}}),t)})))},mobileSearch:function(){ie(!ce)}},Te=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=new FormData,t.forEach((function(e){e.size>Ut?n.push({file:e,errors:[{message:"File is bigger than ".concat(Ut," bytes"),code:"file-too-large"}]}):a.append("file",e)})),null===(r=Gt.createInstance(U,Z))||void 0===r||r.begin(n),0!==a.getAll("file").length){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Ae(a,U,Z,d);case 10:return e.next=12,xe();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=[Object(a.jsx)("div",{}),Object(a.jsxs)(N.a,{variant:"h5",style:{display:""!==je&&je?"block":"none",paddingTop:10,paddingLeft:5},children:["Search results for ",je,":"]})],Re=[12,""!==je&&je?28:0];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(V.c,{children:[Object(a.jsx)(V.a,{path:"/view",children:Object(a.jsx)(Nt,{setViewId:z,photos:i,topRightBar:function(e,t){return Object(a.jsx)(At,{id:e,buttonFunctions:t})},buttonFunctions:Ie})}),Object(a.jsx)(V.a,{path:"/",children:Object(a.jsxs)("div",Object(w.a)(Object(w.a)({},Y({className:"dropzone"})),{},{className:t.root,children:[Object(a.jsx)(I.a,{open:ne,transitionDuration:150,style:{zIndex:1201,backgroundColor:"#00006666"},children:Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{style:{fontSize:200,color:"#1976d2aa"}})})}),Object(a.jsx)("input",Object(w.a)({},$())),Object(a.jsx)(C.a,{}),Object(a.jsx)(B.a,{position:"fixed",className:t.appBar,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(W,{searchBarText:le,setSearchBarText:ue,autocompleteOptions:Oe,anySelected:ke,buttonFunctions:Be,numSelected:function(){return f.length},show:_})]})}),e.drawerElement,Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.toolbar}),ce&&Object(a.jsx)(K,{options:Oe,search:Be.search,className:t.onlyMobile,value:le,onChange:function(e){return ue(e)},onRequestSearch:Be.search(le),style:{marginLeft:-6,borderRadius:0,alignSelf:"flex-top"}}),Object(a.jsx)("div",{style:{flexGrow:1},children:Object(a.jsx)(qt.a,{children:function(e){var t=e.height,n=e.width;return Object(a.jsx)(_t,{height:t-1,width:n,photos:i,clickHandler:we,selected:f,anySelected:ke,imageClickHandler:ye,lines:Fe,heights:Re,viewId:H,setViewId:z})}})})]})]}))})]}),Object(a.jsx)(Ne,{albums:d,open:P,setOpen:D,cb:Se})]})}var Zt=n(327),Xt=n(325),Yt=n(320);function Qt(e){var t=A();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(a.jsxs)("div",{className:t.TopBar,children:[Object(a.jsx)("div",{className:t.middle,children:Object(a.jsx)(K,{options:e.autocompleteOptions,search:e.buttonFunctions.search,className:t.notMobile,value:e.searchBarText,onChange:function(t){return e.setSearchBarText(t)},onRequestSearch:e.buttonFunctions.search(e.searchBarText)})}),Object(a.jsxs)("div",{className:t.right,children:[Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"search",onClick:e.buttonFunctions.mobileSearch,children:Object(a.jsx)(R.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"add",onClick:e.buttonFunctions.add,children:Object(a.jsx)(Yt.a,{})})]})]}),Object(a.jsx)(L.a,{style:{marginTop:-2,display:e.show?"block":"none",flexGrow:1,marginLeft:-24,marginRight:-24}})]})}function $t(e){var t=Object(x.a)(),n=Object(Q.a)(t.breakpoints.down("sm")),r=function(t){return Object(y.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return n.next=3,e.cb(l);case 3:return u(""),n.next=6,e.setOpen(!1);case 6:case"end":return n.stop()}}),n)})))},i=c.a.useState(""),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(a.jsx)("div",{children:Object(a.jsxs)(xe.a,{fullWidth:!0,fullScreen:n,open:e.open,onClose:r(!1),"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsx)(ye.a,{id:"responsive-dialog-title",children:"Add to Album"}),Object(a.jsx)(ve.a,{children:Object(a.jsx)(ne.a,{label:"Name your album",placeholder:"My new album",variant:"filled",value:l,onChange:function(e){u(e.target.value)},fullWidth:!0,autoFocus:!0,margin:"dense"})}),Object(a.jsx)(ge.a,{children:Object(a.jsx)(Oe.a,{onClick:r(!0),color:"primary",children:"Add"})})]})})}var en=n(321),tn=n(322);function nn(e){var t=A(),n=Object(V.f)();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(a.jsxs)("div",{className:t.TopBar,children:[Object(a.jsx)("div",{className:t.left,children:0===e.numSelected()&&Object(a.jsx)(F.a,{style:{float:"left"},"aria-label":"back",onClick:function(){return n.goBack()},className:"IconButton",children:Object(a.jsx)(Z.a,{})})}),Object(a.jsx)("div",{className:t.middle,children:Object(a.jsx)(K,{options:e.autocompleteOptions,search:e.buttonFunctions.search,className:t.notMobile,value:e.searchBarText,onChange:function(t){return e.setSearchBarText(t)},onRequestSearch:e.buttonFunctions.search(e.searchBarText)})}),Object(a.jsxs)("div",{className:t.right,children:[Object(a.jsxs)("div",{style:{float:"left"},children:[Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"search",onClick:e.buttonFunctions.mobileSearch,children:Object(a.jsx)(R.a,{})}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"select",onClick:e.buttonFunctions.select,children:Object(a.jsx)(P.a,{})})]}),1===e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"set as cover",onClick:e.buttonFunctions.setCover,children:Object(a.jsx)(en.a,{})}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"upload",onClick:e.buttonFunctions.upload,children:Object(a.jsx)(M.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cancel",onClick:e.buttonFunctions.unselect,children:Object(a.jsx)(D.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cloud_download",onClick:e.buttonFunctions.download,children:Object(a.jsx)(E.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:e.buttonFunctions.addToAlbum,children:Object(a.jsx)(J.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"remove",onClick:e.buttonFunctions.remove,children:Object(a.jsx)(tn.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:e.buttonFunctions.delete,children:Object(a.jsx)(_.a,{})})]})]}),Object(a.jsx)(L.a,{style:{marginTop:-2,display:e.show?"block":"none",flexGrow:1,marginLeft:-24,marginRight:-24}})]})}function an(e){return Object(a.jsxs)("div",{className:"TopRightBar",style:{alignSelf:"flex-start",justifySelf:"right",padding:10},children:[Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"info",onClick:function(t){t.stopPropagation(),e.buttonFunctions.info()},children:Object(a.jsx)(Lt.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"set cover",onClick:function(t){t.stopPropagation(),e.buttonFunctions.setCover(e.id)},children:Object(a.jsx)(en.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"download",onClick:function(t){t.stopPropagation(),e.buttonFunctions.download(e.id)},children:Object(a.jsx)(E.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:function(t){t.stopPropagation(),e.buttonFunctions.addToAlbum(e.id)},children:Object(a.jsx)(J.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"remove",onClick:function(t){t.stopPropagation(),e.buttonFunctions.remove(e.id)},children:Object(a.jsx)(tn.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:function(t){t.stopPropagation(),e.buttonFunctions.delete(e.id)},children:Object(a.jsx)(_.a,{})})]})}var rn=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"/ImageStore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MAX_SIZE||52428800..toString()),cn=240,sn=Object(O.a)((function(e){return Object(m.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:cn,flexShrink:0}),onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),appBar:Object(l.a)({background:"white"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(cn,"px)"),marginLeft:cn}),menuButton:Object(l.a)({color:e.palette.primary.main,marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(w.a)(Object(w.a)({},e.mixins.toolbar),{},{height:64}),drawerPaper:{width:cn},topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,paddingLeft:12,display:"flex",flexDirection:"column",height:"100vh"}})}));function on(e){var t=sn(),n=Object(V.f)(),c=window.location.pathname.split("/")[2+"/ImageStore".split("/").length],i=Object(r.useState)([]),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(r.useState)([]),b=Object(o.a)(d,2),j=b[0],h=b[1],f=Object(r.useState)([]),p=Object(o.a)(f,2),O=p[0],m=p[1],x=Object(r.useState)(!1),g=Object(o.a)(x,2),k=g[0],R=g[1],P=Object(r.useState)(!1),D=Object(o.a)(P,2),E=D[0],J=D[1],_=Object(r.useState)(!0),L=Object(o.a)(_,2),A=L[0],q=L[1],H=Object(r.useState)(""),z=Object(o.a)(H,2),G=z[0],U=z[1],W=Object(r.useState)(!1),Z=Object(o.a)(W,2),X=Z[0],Y=Z[1],Q=Object(r.useState)(""),$=Object(o.a)(Q,2),ee=$[0],te=$[1],ne=Object(r.useState)(""),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(r.useState)([]),se=Object(o.a)(ie,2),oe=se[0],le=se[1];Object(r.useEffect)((function(){Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l.length){e.next=4;break}le([]),e.next=9;break;case 4:return e.t0=le,e.next=7,ut(l.map((function(e){return e.id})));case 7:e.t1=e.sent.data,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))()}),[l]);var ue=Object(Ht.b)(),de=ue.enqueueSnackbar,be=ue.closeSnackbar,je=Object(zt.a)({noClick:!0,noKeyboard:!0,accept:"image/jpeg, image/png"}),he=je.getRootProps,fe=je.open,pe=je.getInputProps,Oe=je.acceptedFiles,me=je.fileRejections,xe=je.isDragActive;Object(r.useEffect)((function(){Se(Oe,me)}),[Oe,me]);var ge=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,pt(c,re);case 3:if(200!==(t=e.sent).status){e.next=9;break}u(t.data),q(!1),e.next=14;break;case 9:return e.t0=window,e.next=12,t.data;case 12:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt("");case 2:if(200!==(t=e.sent).status){e.next=7;break}h(t.data),e.next=12;break;case 7:return e.t0=window,e.next=10,t.data;case 10:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){ge(),ve()}),[re,c]);var ye=function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe.unselect(),t.next=3,et(O,n,de,be);case 3:return t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),we=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(l.filter((function(e){return e.id!==t}))),e.next=3,He([t],de,be);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(l.filter((function(e){return e.id!==t}))),e.next=3,nt([t],c,de,be);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var t=Object(y.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(r=new FormData,n.forEach((function(e){e.size>rn?a.push({file:e,errors:[{message:"File is bigger than ".concat(rn," bytes"),code:"file-too-large"}]}):r.append("file",e)})),null===(i=Gt.createInstance(de,be))||void 0===i||i.begin(a),0!==r.getAll("file").length){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Ae(r,de,be,j);case 10:return s=t.sent,t.next=13,et(s,[c],de,be);case 13:return t.next=15,ge();case 15:return t.next=17,e.refresh();case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ie=function(e){return function(){Be()?Ce(e)():n.push("/albums/open/".concat(c,"/view/").concat(e))}},Ce=function(e){return function(){var t=O.slice();t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),m(t),0===t.length&&R(!1)}},Be=function(){return 0!==O.length||k},Te={delete:function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we(n);case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),remove:function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ke(n);case 2:return u(l.filter((function(e){return e.id!==n}))),t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addToAlbum:function(e){m([e]),J(!0)},setCover:function(){var t=Object(y.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ge(c,n);case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),download:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(l.filter((function(e){return t===e.id})),de,be);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Fe={setCover:function(){var t=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ge(c,O[0]);case 2:return Fe.unselect(),t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),delete:function(){var t=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe.unselect(),t.next=3,He(O,de,be);case 3:return u(l.filter((function(e){return!O.includes(e.id)}))),t.next=6,e.refresh();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe.unselect(),t.next=3,nt(O,c,de,be);case 3:return u(l.filter((function(e){return!O.includes(e.id)}))),t.next=6,e.refresh();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),unselect:function(){m([]),R(!1)},upload:function(){fe()},settings:function(){},select:function(){R(!k)},addToAlbum:function(){J(!0)},download:function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fe.unselect(),rt(l.filter((function(e){return O.includes(e.id)})),de,be);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),search:function(e){return Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ce(e);case 1:case"end":return t.stop()}}),t)})))},mobileSearch:function(){Y(!X)}},Re=[Object(a.jsx)("div",{children:" "}),Object(a.jsx)(N.a,{variant:"h4",style:{paddingTop:10,paddingLeft:5},children:(j.find((function(e){return e.id.toString()===c}))||{name:""}).name}),Object(a.jsxs)(N.a,{variant:"h5",style:{display:""!==re&&re?"block":"none",paddingLeft:5},children:["Search results for ",re,":"]})],Pe=[12,42,""!==re&&re?28:0];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(V.c,{children:[Object(a.jsx)(V.a,{path:"/albums/open/:albumID/view",children:Object(a.jsx)(Nt,{setViewId:U,photos:l,topRightBar:function(e,t){return Object(a.jsx)(an,{id:e,buttonFunctions:t})},buttonFunctions:Te})}),Object(a.jsx)(V.a,{path:"/",children:Object(a.jsxs)("div",Object(w.a)(Object(w.a)({},he({className:"dropzone"})),{},{className:t.root,children:[Object(a.jsx)(I.a,{open:xe,transitionDuration:150,style:{zIndex:1201,backgroundColor:"#00006666"},children:Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{style:{fontSize:200,color:"#1976d2aa"}})})}),Object(a.jsx)("input",Object(w.a)({},pe())),Object(a.jsx)(C.a,{}),Object(a.jsx)(B.a,{position:"fixed",className:t.appBar,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(nn,{searchBarText:ee,setSearchBarText:te,autocompleteOptions:oe,anySelected:Be,buttonFunctions:Fe,numSelected:function(){return O.length},show:A})]})}),e.drawerElement,Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.toolbar}),X&&Object(a.jsx)(K,{options:oe,search:Fe.search,className:t.onlyMobile,value:ee,onChange:function(e){return te(e)},onRequestSearch:Fe.search(ee),style:{marginLeft:-6,borderRadius:0,alignSelf:"flex-top"}}),Object(a.jsx)("div",{style:{flexGrow:1},children:Object(a.jsx)(qt.a,{children:function(e){var t=e.height,n=e.width;return Object(a.jsx)(_t,{height:t-1,width:n,photos:l,clickHandler:Ce,selected:O,anySelected:Be,imageClickHandler:Ie,lines:Re,heights:Pe,viewId:G,setViewId:U})}})})]})]}))})]}),Object(a.jsx)(Ne,{albums:j,open:E,setOpen:J,cb:ye})]})}var ln=n(323),un=n(324),dn=n(326);function bn(e){var t=Object(x.a)(),n=Object(Q.a)(t.breakpoints.down("sm")),c=Object(r.useState)(e.album.name),i=Object(o.a)(c,2),s=i[0],l=i[1],u=Object(r.useState)(null!==e.album.cover),d=Object(o.a)(u,2),b=d[0],j=d[1];Object(r.useEffect)((function(){e.open&&(l(e.album.name),j(null!==e.album.cover))}),[e.open]);var h=function(t){return Object(y.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=!1,!t||e.album.name===s){n.next=5;break}return a=!0,n.next=5,Qe(e.album.id,s);case 5:if(!t||null===e.album.cover||b){n.next=9;break}return a=!0,n.next=9,Ke(e.album.id);case 9:if(!a){n.next=12;break}return n.next=12,e.fetchAlbums();case 12:return n.next=14,e.setOpen(!1);case 14:case"end":return n.stop()}}),n)})))},f=function(){var t=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe(e.album.id);case 2:return t.next=4,e.fetchAlbums();case 4:return t.next=6,h(!1)();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)(xe.a,{fullScreen:n,open:e.open,onClose:h(!1),"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsxs)(ye.a,{id:"responsive-dialog-title",children:["Settings of ",e.album.name]}),Object(a.jsxs)(ve.a,{children:[Object(a.jsx)(Oe.a,{style:{backgroundColor:"#dddddd"},disabled:!b,onClick:function(){return j(!1)},children:b?"Clear cover":"No album cover"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(ne.a,{value:s,onChange:function(e){return l(e.target.value)},inputProps:{style:{fontSize:20}},InputLabelProps:{style:{fontSize:20}}})]}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(Oe.a,{onClick:f,color:"primary",autoFocus:!0,children:"Delete Album"}),Object(a.jsx)(Oe.a,{onClick:h(!1),color:"primary",autoFocus:!0,children:"Cancel"}),Object(a.jsx)(Oe.a,{onClick:h(!0),color:"primary",autoFocus:!0,children:"Save"})]})]})})}var jn=Object(Y.a)({palette:{primary:{main:"#cccccc",dark:"#cccccc",light:"#cccccc"}}});function hn(e){var t=Object(O.a)((function(){return Object(m.a)({root:{overflow:"hidden",padding:5,paddingTop:10},icon:{color:"rgba(255, 255, 255, 0.54)"},photoDiv:{margin:5,display:"flex",flexFlow:"row wrap"}})}))(),n=Object(V.f)(),c=Object(r.useState)(!1),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(a.jsxs)(ln.a,{className:t.root,children:[Object(a.jsxs)(un.a,{style:{height:e.dimension,width:e.dimension,backgroundColor:"white"},onClick:function(){n.push("/albums/open/".concat(e.album.id))},children:[null===e.album.cover?Object(a.jsx)(Xt.a,{style:{height:e.dimension,width:e.dimension,color:"#666666"}}):Object(a.jsx)("div",{style:{backgroundImage:"url(".concat(Me+"/media/thumb_"+e.album.cover,")"),backgroundSize:"cover",backgroundPosition:"center",height:e.dimension,width:e.dimension}}),Object(a.jsx)(dn.a,{title:e.album.name,subtitle:Object(a.jsxs)("span",{children:[e.album.imagecount," elements"]}),actionIcon:Object(a.jsx)("div",{onClick:function(e){e.stopPropagation()},children:Object(a.jsx)($.a,{theme:jn,children:Object(a.jsx)(F.a,{"aria-label":"info about ".concat(e.album.name),color:"primary",onClick:function(){return l(!0)},className:t.icon,children:Object(a.jsx)(Lt.a,{})})})})})]},e.album.id),Object(a.jsx)(bn,{album:e.album,open:s,setOpen:l,fetchAlbums:e.fetchAlbums})]})}var fn=200,pn=function(e){return e.data.linNum<=e.index?Object(a.jsx)("div",{style:Object(w.a)(Object(w.a)({},e.style),{},{display:"flex",transition:"0.05s linear"}),children:e.data.rowPics[e.index].map((function(t){return n=t,r=e.data.rowH[e.index],c=e.data.props,Object(a.jsx)(hn,{album:n,dimension:r,click:c.openAlbum(n),fetchAlbums:c.fetchAlbums},n.id);var n,r,c}))}):Object(a.jsx)("div",{children:e.data.rowPics[e.index]})},On=function(e){var t=e.onScroll,n=e.forwardedRef,c=e.style,i=e.children,s=Object(r.useCallback)((function(e){n(e?e.view:null)}),[n]);return Object(a.jsx)(Ft.Scrollbars,{ref:s,style:Object(w.a)(Object(w.a)({},c),{},{overflow:"hidden"}),onScroll:t,children:i})},mn=c.a.forwardRef((function(e,t){return Object(a.jsx)(On,Object(w.a)(Object(w.a)({},e),{},{forwardedRef:t}))}));function xn(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.resetAfterIndex(0)}),[e.width,e.albums,e.heights]);var n=function(e,t){for(var n=[],a=[],r=0,c=-1;r!==e.length;){for(var i=[],s=0;r!==e.length&&(0===s||Math.abs(fn-fn*t/s)>Math.abs(fn-fn*t/(s+fn)));)i.push(e[r]),s+=fn,r++;-1===c&&(c=fn*t/s),0===a.length&&s<=t&&r===e.length?n.push(fn):n.push(c),a.push(i)}return{rowH:n,rowPics:a}}(e.albums,e.width-20),c=n.rowH,i=n.rowPics;c=[].concat(Object(me.a)(e.heights),Object(me.a)(c)),i=[].concat(Object(me.a)(e.lines),Object(me.a)(i));return Object(a.jsx)(Tt.a,{overscanCount:10,height:e.height,ref:t,itemData:{rowH:c,rowPics:i,props:e,linNum:e.lines.length},itemCount:c.length,itemSize:function(e){return c[e]},width:e.width-1,outerElementType:mn,children:pn})}var gn=240,vn=Object(O.a)((function(e){return Object(m.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:gn,flexShrink:0}),appBar:Object(l.a)({background:"white"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(gn,"px)"),marginLeft:gn}),menuButton:Object(l.a)({color:e.palette.primary.main,marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(w.a)(Object(w.a)({},e.mixins.toolbar),{},{height:64}),drawerPaper:{width:gn},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,paddingLeft:12,display:"flex",flexDirection:"column",height:"100vh"}})}));function yn(e){var t=vn(),n=Object(r.useState)([]),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1],j=Object(r.useState)(!0),h=Object(o.a)(j,2),f=h[0],p=h[1],O=Object(r.useState)(!1),m=Object(o.a)(O,2),x=m[0],g=m[1],w=Object(r.useState)(""),k=Object(o.a)(w,2),I=k[0],R=k[1],P=Object(r.useState)(""),M=Object(o.a)(P,2),D=M[0],E=M[1],J=Object(r.useState)([]),_=Object(o.a)(J,2),L=_[0],A=(_[1],function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,bt(D);case 3:if(200!==(t=e.sent).status){e.next=9;break}s(t.data),p(!1),e.next=14;break;case 9:return e.t0=window,e.next=12,t.data;case 12:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(r.useEffect)((function(){A()}),[D]);var q={add:function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),search:function(e){return Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(e);case 1:case"end":return t.stop()}}),t)})))},mobileSearch:function(){g(!x)}},H=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t);case 2:return e.next=4,A();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){return function(){}},G=[""!==D&&D?20:0],U=[Object(a.jsxs)(N.a,{variant:"h5",style:{display:""!==D&&D?"block":"none"},children:["Search results for ",D,":"]})];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(V.c,{children:[Object(a.jsx)(V.a,{path:"/albums/open",children:Object(a.jsx)(on,{refresh:A,drawerElement:e.drawerElement,handleDrawerToggle:e.handleDrawerToggle})}),Object(a.jsx)(V.a,{path:"/albums/",children:Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(C.a,{}),Object(a.jsx)(B.a,{position:"fixed",className:t.appBar,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(Qt,{searchBarText:I,setSearchBarText:R,autocompleteOptions:L,buttonFunctions:q,show:f})]})}),e.drawerElement,Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.toolbar}),x&&Object(a.jsx)(K,{options:L,search:q.search,className:t.onlyMobile,value:I,onChange:function(e){return R(e)},onRequestSearch:q.search(I),style:{marginLeft:-6,borderRadius:0,alignSelf:"flex-top"}}),Object(a.jsx)("div",{style:{flexGrow:1},children:Object(a.jsx)(qt.a,{children:function(e){var t=e.height,n=e.width;return Object(a.jsx)(xn,{height:t-1,width:n,albums:i,openAlbum:z,fetchAlbums:A,lines:U,heights:G})}})})]})]})})]}),Object(a.jsx)($t,{albums:i,open:d,setOpen:b,cb:H})]})}var wn=240,kn=Object(O.a)((function(e){return Object(m.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:wn,flexShrink:0}),appBar:Object(l.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(wn,"px)"),marginLeft:wn,background:"white"}),menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:wn},topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,padding:e.spacing(3)}})}));function Sn(e){var t=e.window,n=kn(),c=Object(x.a)(),i=Object(r.useState)(!1),s=Object(o.a)(i,2),l=s[0],O=s[1],m=function(){O(!l)},g=Object(V.f)(),v=Object(V.g)(),y=Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:n.toolbar,children:Object(a.jsx)("div",{className:n.topleft,children:"ImageStore"})}),Object(a.jsx)(u.a,{}),Object(a.jsxs)(d.a,{children:[Object(a.jsxs)(b.a,{button:!0,selected:"/"===v.pathname,onClick:function(){g.push("/"),O(!1)},children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(Zt.a,{})}),Object(a.jsx)(h.a,{primary:"Photos"})]}),Object(a.jsxs)(b.a,{button:!0,selected:v.pathname.startsWith("/albums"),onClick:function(){g.push("/albums"),O(!1)},children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(Xt.a,{})}),Object(a.jsx)(h.a,{primary:"Albums"})]})]})]}),w=void 0!==t?function(){return t().document.body}:void 0,k=Object(a.jsxs)("nav",{className:n.drawer,"aria-label":"mailbox folders",children:[Object(a.jsx)(f.a,{smUp:!0,implementation:"css",children:Object(a.jsx)(p.a,{container:w,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:l,onClose:m,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0},children:y})}),Object(a.jsx)(f.a,{xsDown:!0,implementation:"css",children:Object(a.jsx)(p.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0,children:y})})]});return Object(a.jsxs)(V.c,{children:[Object(a.jsx)(V.a,{path:"/albums",children:Object(a.jsx)(yn,{drawerElement:k,handleDrawerToggle:m})}),Object(a.jsx)(V.a,{path:"/",children:Object(a.jsx)(Vt,{drawerElement:k,handleDrawerToggle:m})})]})}var Nn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,335)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},In=n(52),Cn=Object(Y.a)({palette:{primary:{main:"#444444",dark:"#000000",light:"#000000"},secondary:{main:"#ff0000"},background:{}}});s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(In.a,{basename:"/ImageStore",children:Object(a.jsx)($.a,{theme:Cn,children:Object(a.jsx)(Ht.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(a.jsx)(Sn,{})})})})}),document.getElementById("root")),Nn()}},[[251,1,2]]]);
//# sourceMappingURL=main.708ce2e3.chunk.js.map