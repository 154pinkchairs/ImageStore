{"version":3,"sources":["Components/Shared/TopBarStyle.tsx","Components/Shared/SearchBar.tsx","Components/PhotoPage/TopBar.tsx","Components/ViewPage/TopLeftBar.tsx","Components/Shared/AddToAlbum.tsx","Components/Snackbars/SnackbarAction.tsx","Components/Snackbars/AddPhotosSnackbar.tsx","Components/Snackbars/AddPhotosToAlbumsSnackbar.tsx","Components/Snackbars/DeletePhotosSnackbar.tsx","Components/Snackbars/DownloadSnackbar.tsx","Components/Snackbars/RemovePhotosSnackbar.tsx","API.tsx","Components/ViewPage/ViewPage.tsx","Components/Shared/AbstractPhotoPage.tsx","Components/PhotoPage/TopRightBar.tsx","Components/Snackbars/UploadErrorSnackbar.tsx","Components/PhotoPage/PhotoPage.tsx","Components/AlbumPage/TopBar.tsx","Components/AlbumPage/CreateAlbum.tsx","Components/AlbumPage/AlbumPhotoPage/TopBar.tsx","Components/AlbumPage/AlbumPhotoPage/TopRightBar.tsx","Components/AlbumPage/AlbumPhotoPage/AlbumPhotoPage.tsx","Components/AlbumPage/AlbumInfo.tsx","Components/Shared/AbstractAlbumPage.tsx","Components/AlbumPage/AlbumPage.tsx","Components/Page.tsx","reportWebVitals.ts","index.tsx"],"names":["makeStyles","theme","createStyles","TopBar","background","display","flexGrow","left","transition","padding","float","middle","breakpoints","down","right","justifySelf","onlyMobile","up","notMobile","filterOptions","createFilterOptions","limit","AutocompleteSearchBar","props","value","setValue","onChange","Autocomplete","className","style","freeSolo","options","event","newValue","a","search","renderInput","params","inputProps","ref","onCancelSearch","target","onRequestSearch","InputProps","classes","TopBarStyle","flexDirection","autocompleteOptions","buttonFunctions","searchBarText","s","setSearchBarText","IconButton","color","aria-label","onClick","mobileSearch","Search","numSelected","select","CheckBox","upload","CloudUpload","unselect","Cancel","download","CloudDownload","addToAlbum","LibraryAdd","delete","Delete","LinearProgress","marginTop","show","marginLeft","marginRight","TopLeftBar","history","useHistory","alignSelf","e","stopPropagation","goBack","ArrowBack","useStyles","root","backgroundColor","Element","useState","checked","setChecked","ListItem","button","remove","album","id","add","Checkbox","disableRipple","ListItemText","primary","name","AddToAlbum","selected","setSelected","useTheme","fullScreen","useMediaQuery","albumId","filter","cur","handleClose","execute","length","cb","setOpen","closeCallback","Dialog","open","onClose","zIndex","aria-labelledby","DialogTitle","DialogContent","albums","map","DialogActions","Button","autoFocus","SnackbarAction","closeSnackbar","actions","action","key","Function","size","Close","fontSize","DialogComponent","React","albumIds","addPhotosToAlbums","photos","enqueueSnackbar","closeAddSnackbar","AddPhotosSnackbar","snackMsg","this","amount","message","CircularProgress","variant","autoHideDuration","errors","count","errorMessage","toString","errorAction","AddPhotosToAlbumsSnackbar","amountPhotos","amountAlbums","DeletePhotosSnackbar","DownloadSnackbar","toAlbum","RemovePhotosSnackbar","console","log","window","location","hostname","baseURL","addPhotos","formData","snackbar","createInstance","begin","getAll","axios","post","res","data","success","end","deletePhotos","photoIds","Promise","all","pid","something","setCover","photoId","clearCover","createAlbum","deleteAlbum","renameAlbum","newAlbumName","requestBody","qs","stringify","removePhotosFromAlbum","photo","url","method","responseType","response","content","zip","JSZip","file","generateAsync","type","URL","createObjectURL","Blob","document","createElement","href","body","appendChild","click","removeChild","revokeObjectURL","removeLabel","label","addLabel","ids","labels","getPhotoLabels","getAlbums","searchTerm","get","getPhotos","getPhotosInAlbum","defaults","headers","SwiperCore","use","Virtual","Navigation","createMuiTheme","palette","main","dark","light","secondary","drawerWidth","drawer","width","flexShrink","drawerPaper","drawerHeader","alignItems","spacing","justifyContent","mixins","toolbar","transitions","create","easing","sharp","duration","leavingScreen","contentShift","easeOut","enteringScreen","chip","margin","ViewPage","pathname","split","slice","setId","opacityRight","setOpacityRight","opacityLeft","setOpacityLeft","setLabels","index","findIndex","v","useEffect","setViewId","setViewed","getLabels","resp","status","alert","slideChange","afterWithout","substr","lastIndexOf","replace","mouseRight","mouseLeft","modifiedButtonFunctions","info","swiperRef","useRef","prevRef","nextRef","hideArrows","CssBaseline","clsx","ThemeProvider","onMouseEnter","onMouseMove","opacity","position","height","ChevronLeft","ChevronRight","topRightBar","Drawer","anchor","paper","Typography","Divider","List","ListItemIcon","PhotoOutlined","Label","flexWrap","listStyle","LabelChip","LabelInputChip","deleted","setDeleted","Chip","onDelete","deleteIcon","undefined","added","setAdded","handleAdd","TextField","marginBottom","onKeyPress","ev","preventDefault","AddCircle","transform","Carousel","setKey","spaceBetween","slidesPerView","virtual","navigation","prevEl","current","nextEl","initialSlide","onInit","swiper","update","onSlideChange","activeIndex","virtualIndex","alt","objectFit","src","photoDiv","photoBox","top","Photo","realUrl","setUrl","timeout","setTimeout","clearTimeout","isScrolling","vis","setVis","anySelected","y","x","onMouseLeave","imageClick","backgroundImage","backgroundSize","readOnly","targetHeight","Row","altprops","linNum","rowPics","p","realH","rowH","clickHandler","imageClickHandler","includes","outZoom","CustomScrollbars","onScroll","forwardedRef","children","refSetter","useCallback","scrollbarsRef","view","overflow","CustomScrollbarsVirtualList","forwardRef","AbstractPhotoPage","jumped","setJumped","listRef","resetAfterIndex","item","tmpRowPics","viewId","scrollToItem","lines","heights","ptr","curPics","curWidth","Math","abs","push","calculate","tmpRowH","useIsScrolling","overscanCount","itemData","itemCount","itemSize","outerElementType","TopRightBar","Info","UploadErrorSnackbar","fileRejections","fileRejection","maxSize","parseInt","process","MAX_SIZE","appBar","menuButton","topleft","paddingLeft","PhotoPage","setPhotos","setAlbums","selectable","setSelectable","showLoadingBar","setShowLoadingBar","useSnackbar","useDropzone","noClick","noKeyboard","accept","getRootProps","openM","getInputProps","acceptedFiles","isDragActive","showSearchBar","setShowSearchBar","setSearchTerm","setAutocompleteOptions","fetchPhotos","fetchAlbums","copy","topBarButtonFunctions","viewButtonFunctions","deletePhoto","settings","files","FormData","forEach","code","append","paddingTop","path","Backdrop","transitionDuration","AppBar","Toolbar","edge","handleDrawerToggle","drawerElement","borderRadius","CreateNewFolder","CreateAlbum","fullWidth","placeholder","Pages","RemoveCircleOutline","AlbumPhotoPage","refresh","removePhoto","photoID","find","AlbumInfo","nameField","setNameField","cover","hasCover","setHasCover","ex","deleteThis","disabled","InputLabelProps","Album","icon","flexFlow","openInfo","setOpenInfo","GridList","GridListTile","dimension","PhotoAlbum","backgroundPosition","GridListTileBar","title","subtitle","imagecount","actionIcon","openAlbum","AbstractAlbumPage","setH","AlbumPage","openCreateAlbum","setOpenCreateAlbum","createAlbumCallback","ResponsiveDrawer","mobileOpen","setMobileOpen","useLocation","startsWith","container","Hidden","smUp","implementation","direction","ModalProps","keepMounted","xsDown","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","anchorOrigin","vertical","horizontal","getElementById"],"mappings":"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","file":"static/js/main.804ab463.chunk.js","sourcesContent":["import { makeStyles, Theme, createStyles } from \"@material-ui/core\";\r\n\r\nexport default makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        TopBar: {\r\n            background: \"#ffffff\",\r\n            display: \"flex\",\r\n            flexGrow: 1,\r\n        },\r\n        left: {\r\n            transition: \"all 1s linear\",\r\n            padding: \"7px\",\r\n            display: \"block\",\r\n            float: \"left\",\r\n            \"margin-left\": \"-15px\",\r\n            \"margin-right\": \"-5px\",\r\n            \"padding-left\": \"0px\",\r\n        },\r\n        middle: {\r\n            flexGrow: 1,\r\n            display: \"block\",\r\n            float: \"left\",\r\n            padding: \"7px\",\r\n            [theme.breakpoints.down(\"sm\")]: {\r\n                padding: \"0px\",\r\n            },\r\n        },\r\n        right: {\r\n            transition: \"all 1s linear\",\r\n            padding: \"7px\",\r\n            display: \"block\",\r\n            justifySelf: \"flex-end\",\r\n            \"margin-right\": \"-15px\",\r\n            \"padding-right\": \"0px\",\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        notMobile: {\r\n            [theme.breakpoints.down(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n    })\r\n);\r\n","import { Autocomplete, createFilterOptions } from \"@material-ui/lab\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst filterOptions = createFilterOptions({\r\n    limit: 6\r\n});\r\n\r\nexport default function AutocompleteSearchBar(props: any) {\r\n    const value = props.value;\r\n    const setValue = props.onChange;\r\n    return (\r\n        <Autocomplete\r\n            filterOptions={filterOptions}\r\n            className={props.className}\r\n            style={props.style}\r\n            freeSolo\r\n            options={props.options}\r\n            onChange={async (event: any, newValue: any) => {\r\n                setValue(newValue);\r\n                props.search(newValue)();\r\n            }}\r\n            renderInput={(params: any) => {\r\n                return (\r\n                    <>\r\n                        <SearchBar\r\n                            {...{ ...params.inputProps, ref: null }}\r\n                            onCancelSearch={async () => {\r\n                                setValue(\"\");\r\n                                props.search(\"\")();\r\n                            }}\r\n                            style={props.style}\r\n                            className={props.onlyMobile}\r\n                            value={value}\r\n                            onChange={(newValue) => {\r\n                                if (newValue === \"\")\r\n                                    props.search(\"\")();\r\n                                params.inputProps.onChange({ target: { value: newValue } });\r\n                                setValue(newValue)\r\n                            }}\r\n                            onRequestSearch={props.onRequestSearch}\r\n                        />\r\n                        <div ref={params.InputProps.ref}>\r\n                            <div {...params.inputProps} />\r\n                        </div>\r\n                    </>\r\n                )\r\n            }\r\n            }\r\n        />\r\n    )\r\n}","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { CloudDownload, LibraryAdd, Delete, Cancel, CloudUpload, Search, CheckBox } from \"@material-ui/icons\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nimport TopBarStyle from \"../Shared/TopBarStyle\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nexport default function TopBar(props: any) {\r\n    const classes = TopBarStyle();\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1 }}>\r\n            <div className={classes.TopBar}>\r\n                <div className={classes.middle}>\r\n                    <AutocompleteSearchBar\r\n                        options={props.autocompleteOptions}\r\n                        search={props.buttonFunctions.search}\r\n                        className={classes.notMobile}\r\n                        value={props.searchBarText}\r\n                        onChange={(s: string) => props.setSearchBarText(s)}\r\n                        onRequestSearch={props.buttonFunctions.search(props.searchBarText)}\r\n                    />\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <div style={{ float: \"left\" }}>\r\n                        <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"search\" onClick={props.buttonFunctions.mobileSearch}>\r\n                            <Search />\r\n                        </IconButton>\r\n                        {props.numSelected() === 0 && (\r\n                            <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"select\" onClick={props.buttonFunctions.select}>\r\n                                <CheckBox />\r\n                            </IconButton>\r\n                        )}\r\n                    </div>\r\n                    {props.numSelected() === 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"upload\" onClick={props.buttonFunctions.upload}>\r\n                            <CloudUpload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cancel\" onClick={props.buttonFunctions.unselect}>\r\n                            <Cancel />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cloud_download\" onClick={props.buttonFunctions.download}>\r\n                            <CloudDownload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"library_add\" onClick={props.buttonFunctions.addToAlbum}>\r\n                            <LibraryAdd />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"delete\" onClick={props.buttonFunctions.delete}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <LinearProgress\r\n                style={{\r\n                    marginTop: -2,\r\n                    display: props.show ? \"block\" : \"none\",\r\n                    flexGrow: 1,\r\n                    marginLeft: -24,\r\n                    marginRight: -24,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { ArrowBack } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function TopLeftBar() {\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <div\r\n            className=\"TopLeftBar\"\r\n            style={{\r\n                alignSelf: \"flex-start\",\r\n                justifySelf: \"left\",\r\n                padding: 10,\r\n                marginRight: -25,\r\n            }}\r\n        >\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"back\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    history.goBack();\r\n                }}\r\n            >\r\n                <ArrowBack />\r\n            </IconButton>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { ListItem, ListItemText, Checkbox } from \"@material-ui/core\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n});\r\n\r\nfunction Element(props: { album: AlbumT; remove: (arg0: any) => void; add: (arg0: any) => void }) {\r\n    const classes = useStyles();\r\n    const [checked, setChecked] = useState(false);\r\n    return (\r\n        <ListItem\r\n            button\r\n            onClick={() => {\r\n                if (checked) props.remove(props.album.id);\r\n                else props.add(props.album.id);\r\n                setChecked(!checked);\r\n            }}\r\n        >\r\n            <Checkbox className={classes.root} color=\"primary\" checked={checked} disableRipple />\r\n            <ListItemText primary={props.album.name} />\r\n        </ListItem>\r\n    );\r\n}\r\n\r\nexport default function AddToAlbum(props: { cb: (arg0: string[]) => any; setOpen: (arg0: boolean) => any; open: boolean; albums: AlbumT[]; closeCallback?: (() => void) }) {\r\n    const [selected, setSelected] = useState<string[]>([]);\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const add = (albumId: string) => {\r\n        setSelected([...selected, albumId]);\r\n    };\r\n    const remove = (albumId: string) => {\r\n        setSelected(selected.filter((cur) => cur !== albumId));\r\n    };\r\n\r\n    const handleClose = (execute: boolean) => async () => {\r\n        if (execute && selected.length > 0) await props.cb(selected);\r\n        setSelected([]);\r\n        await props.setOpen(false);\r\n        props.closeCallback?.()\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog fullScreen={fullScreen} open={props.open} onClose={handleClose(false)} style={{ zIndex: 1000000 }} aria-labelledby=\"responsive-dialog-title\">\r\n                <DialogTitle id=\"responsive-dialog-title\">Add to Album</DialogTitle>\r\n                <DialogContent>\r\n                    {props.albums.map((album: any) => (\r\n                        <Element album={album} add={add} remove={remove} key={album.id} />\r\n                    ))}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose(true)} color=\"primary\" autoFocus>\r\n                        Add\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import { ReactNode } from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nexport default function SnackbarAction(closeSnackbar: null | ((key: any) => void), actions: ((key: any) => ReactNode) | ReactNode = null) {\r\n    const action = (key: any) => (\r\n        <>\r\n            {actions && (actions instanceof Function) ? actions(key) : actions}\r\n            {closeSnackbar && (\r\n                <IconButton\r\n                    size=\"small\"\r\n                    color=\"inherit\"\r\n                    onClick={() => {\r\n                        closeSnackbar(key);\r\n                    }}\r\n                >\r\n                    <Close fontSize=\"small\" />\r\n                </IconButton>\r\n            )}\r\n        </>\r\n    );\r\n\r\n    return action;\r\n}\r\n","import { Button, CircularProgress, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport { addPhotosToAlbums } from \"../../API\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport AddToAlbum from \"../Shared/AddToAlbum\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nfunction DialogComponent(props: any) {\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    const cb = async (albumIds: any) => {\r\n        await addPhotosToAlbums(props.photos, albumIds, props.enqueueSnackbar, props.closeSnackbar);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button color=\"inherit\" onClick={() => setOpen(true)}>\r\n                Add to album\r\n            </Button>\r\n            <AddToAlbum open={open} setOpen={setOpen} albums={props.albums} cb={cb} closeCallback={props.closeAddSnackbar} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport class AddPhotosSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    albums?: AlbumT[]\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(\r\n        enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar: (key?: string | number | undefined) => void,\r\n        albums?: AlbumT[]\r\n    ) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n        this.albums = albums;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void,\r\n        albums?: AlbumT[]\r\n    ): null | AddPhotosSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar, albums);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being uploaded`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: string[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} uploaded`;\r\n        const action = SnackbarAction(\r\n            this.closeSnackbar,\r\n            this.albums ?\r\n                (key: any) => <DialogComponent photos={photos} closeSnackbar={this.closeSnackbar} closeAddSnackbar={() => { if (key) this.closeSnackbar(key) }} enqueueSnackbar={this.enqueueSnackbar} albums={this.albums} /> : null\r\n        );\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class AddPhotosToAlbumsSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | AddPhotosToAlbumsSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amountPhotos: number, amountAlbums: number) {\r\n        const message = `${amountPhotos} element${amountPhotos === 1 ? \" is\" : \"s are\"} being added to ${amountAlbums} album${amountAlbums === 1 ? \"\" : \"s\"}`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: any[], albums: any[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} added to ${albums.length} album${albums.length === 1 ? \"\" : \"s\"}`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class DeletePhotosSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | DeletePhotosSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being deleted`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: any[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} deleted`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class DownloadSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void,\r\n        toAlbum?: (photos: string[]) => void\r\n    ): null | DownloadSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being downloaded`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: string[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} downloaded`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class RemovePhotosSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | RemovePhotosSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being removed from this album`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: string[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} removed from this album`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import axios from \"axios\";\r\nimport JSZip from \"jszip\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport qs from \"qs\";\r\nimport React from \"react\";\r\nimport { AddPhotosSnackbar } from \"./Components/Snackbars/AddPhotosSnackbar\";\r\nimport { AddPhotosToAlbumsSnackbar } from \"./Components/Snackbars/AddPhotosToAlbumsSnackbar\";\r\nimport { DeletePhotosSnackbar } from \"./Components/Snackbars/DeletePhotosSnackbar\";\r\nimport { DownloadSnackbar } from \"./Components/Snackbars/DownloadSnackbar\";\r\nimport { RemovePhotosSnackbar } from \"./Components/Snackbars/RemovePhotosSnackbar\";\r\nimport { AlbumT, PhotoT } from \"./Interfaces\";\r\n\r\nconsole.log(window.location.hostname)\r\nexport const baseURL = \"http://\" + window.location.hostname + \":4000\"\r\nconsole.log(baseURL)\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\r\nexport async function addPhotos(\r\n    formData: FormData,\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void,\r\n    albums?: AlbumT[]\r\n) {\r\n    const snackbar = AddPhotosSnackbar.createInstance(enqueueSnackbar, closeSnackbar, albums);\r\n    try {\r\n        snackbar?.begin(formData.getAll(\"file\").length);\r\n\r\n        const res = await axios.post(\"/media/add\", formData);\r\n        const photos: string[] = res.data.success;\r\n        const errors: string[] = res.data.errors;\r\n\r\n        snackbar?.end(photos, errors);\r\n\r\n        return photos;\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function deletePhotos(\r\n    photoIds: string[],\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    const snackbar = DeletePhotosSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n    try {\r\n        snackbar?.begin(photoIds.length);\r\n        const something = await Promise.all(photoIds.map(async (pid) => await axios.post(\"/media/delete/\" + pid)));\r\n        snackbar?.end(something, []);\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function setCover(albumId: string, photoId: string) {\r\n    await axios.post(`/albums/setCover/${albumId}/${photoId}`);\r\n}\r\nexport async function clearCover(albumId: string) {\r\n    await axios.post(`/albums/clearCover/${albumId}`);\r\n}\r\n\r\nexport async function createAlbum(name: string) {\r\n    await axios.post(\"/albums/new/\" + name);\r\n}\r\n\r\nexport async function deleteAlbum(albumId: string) {\r\n    await axios.post(`/albums/delete/${albumId}`);\r\n}\r\n\r\nexport async function renameAlbum(albumId: string, newAlbumName: string) {\r\n    const requestBody = {\r\n        newAlbumName,\r\n        albumId,\r\n    };\r\n    await axios.post(\"/albums/rename\", qs.stringify(requestBody));\r\n}\r\n\r\nexport async function addPhotosToAlbums(\r\n    photoIds: string[],\r\n    albumIds: string[],\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    const requestBody = {\r\n        photos: photoIds,\r\n        albums: albumIds,\r\n    };\r\n    const snackbar = AddPhotosToAlbumsSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n    try {\r\n        snackbar?.begin(photoIds.length, albumIds.length);\r\n        const result = await axios.post(\"/albums/addPhotos\", qs.stringify(requestBody));\r\n        snackbar?.end(photoIds, albumIds, []);\r\n    } catch (error) {\r\n        snackbar?.end([], [], [error]);\r\n    }\r\n}\r\n\r\nexport async function removePhotosFromAlbum(\r\n    photoIds: string[],\r\n    albumId: string,\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    const snackbar = RemovePhotosSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n    try {\r\n        snackbar?.begin(photoIds.length);\r\n        const smth = await Promise.all(photoIds.map(async (pid) => await axios.post(`/albums/remove/${albumId}/${pid}`)));\r\n        snackbar?.end(photoIds, []);\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n    }\r\n}\r\n\r\nexport async function download(\r\n    photos: PhotoT[],\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    if (photos.length === 0) return;\r\n    const snackbar = DownloadSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n\r\n    try {\r\n        snackbar?.begin(photos.length);\r\n        let content: Blob;\r\n        let name: string;\r\n        if (photos.length === 1) {\r\n            const photo = photos[0];\r\n            const response = await axios({\r\n                url: `/media/${photo.id}`,\r\n                method: \"GET\",\r\n                responseType: \"blob\", // important\r\n            });\r\n\r\n            content = response.data;\r\n            name = photo.name;\r\n        } else {\r\n            const zip = new JSZip();\r\n            await Promise.all(\r\n                photos.map(async (photo) => {\r\n                    const response = await axios({\r\n                        url: `/media/${photo.id}`,\r\n                        method: \"GET\",\r\n                        responseType: \"blob\", // important\r\n                    });\r\n\r\n                    zip.file(photo.name, response.data);\r\n                })\r\n            );\r\n\r\n            content = await zip.generateAsync({ type: \"blob\" });\r\n            name = `photos.zip`;\r\n        }\r\n\r\n        const url = window.URL.createObjectURL(new Blob([content]));\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = name;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n        snackbar?.end([], []);\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n    }\r\n}\r\n\r\n\r\nexport async function removeLabel(id: string, label: string) {\r\n    const requestBody = {\r\n        id,\r\n        label,\r\n    };\r\n    await axios.post(\"/labels/remove\", qs.stringify(requestBody));\r\n}\r\n\r\nexport async function addLabel(ids: string[], labels: string[]) {\r\n    const requestBody = {\r\n        ids,\r\n        labels,\r\n    };\r\n    await axios.post(\"/labels/add\", qs.stringify(requestBody));\r\n}\r\n\r\nexport async function getPhotoLabels(ids: string[]) {\r\n    const requestBody = {\r\n        ids,\r\n    };\r\n    return await axios.post(\"/labels/get/\", qs.stringify(requestBody));\r\n}\r\n\r\nexport async function getAlbums(searchTerm: string) {\r\n    return await axios.get(searchTerm === \"\" || !searchTerm ? \"albums/all\" : \"albums/search/\" + searchTerm);\r\n}\r\n\r\nexport async function getPhotos(searchTerm: string) {\r\n    return await axios.get(searchTerm === \"\" || !searchTerm ? \"media/all\" : \"media/search/\" + searchTerm);\r\n}\r\n\r\nexport async function getPhotosInAlbum(id: string, searchTerm: string) {\r\n    return await axios.get(searchTerm === \"\" || !searchTerm ? `albums/${id}/all` : `albums/${id}/search/${searchTerm}`);\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { renderToStaticMarkup } from \"react-dom/server\"\r\nimport \"./ViewPage.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useTransition, animated } from \"react-spring\";\r\nimport TopLeftBar from \"./TopLeftBar\";\r\nimport {\r\n    Chip,\r\n    CircularProgress,\r\n    createMuiTheme,\r\n    createStyles,\r\n    CssBaseline,\r\n    Divider,\r\n    Drawer,\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    makeStyles,\r\n    Paper,\r\n    TextField,\r\n    Theme,\r\n    ThemeProvider,\r\n    Typography,\r\n    useMediaQuery,\r\n    useTheme,\r\n} from \"@material-ui/core\";\r\nimport { ChevronLeft, ChevronRight, Close, Label, PhotoOutlined, AddCircle, HighlightOff } from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport { PhotoT } from \"../../Interfaces\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\nimport { addLabel, baseURL, getPhotoLabels, removeLabel } from \"../../API\";\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { Virtual, Navigation } from \"swiper\";\r\nimport 'swiper/swiper.min.css';\r\nSwiperCore.use([Virtual, Navigation]);\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: \"#ffffff\",\r\n            dark: \"#ffffff\",\r\n            light: \"#ffffff\",\r\n        },\r\n        secondary: {\r\n            main: \"#ff0000\",\r\n        },\r\n    },\r\n});\r\n\r\nconst drawerWidth = 340;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        drawerHeader: {\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            padding: theme.spacing(0, 1),\r\n            // necessary for content to be below app bar\r\n            justifyContent: \"space-between\",\r\n            ...theme.mixins.toolbar,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            transition: theme.transitions.create(\"margin\", {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n            marginRight: -0,\r\n        },\r\n        contentShift: {\r\n            transition: theme.transitions.create(\"margin\", {\r\n                easing: theme.transitions.easing.easeOut,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n            marginRight: drawerWidth,\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        notMobile: {\r\n            [theme.breakpoints.down(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        chip: {\r\n            margin: theme.spacing(0.5),\r\n        },\r\n    })\r\n);\r\n\r\nexport default function ViewPage(props: any) {\r\n    const history = useHistory();\r\n    const [id, setId] = useState(window.location.pathname.split(\"/\").slice(-1)[0]);\r\n    const [opacityRight, setOpacityRight] = useState(0);\r\n    const [opacityLeft, setOpacityLeft] = useState(0);\r\n    const [open, setOpen] = useState(false);\r\n    const [labels, setLabels] = useState<string[] | \"Loading\">(\"Loading\");\r\n    const index = props.photos.findIndex((v: PhotoT) => v.id === id);\r\n    const photo = props.photos[index];\r\n\r\n    useEffect(() => {\r\n        props.setViewId(id);\r\n    }, [id, props.setViewed]);\r\n\r\n    useEffect(() => {\r\n        getLabels();\r\n    }, [id])\r\n\r\n    const getLabels = async () => {\r\n        const resp = await getPhotoLabels([id])\r\n        if (resp.status === 200) {\r\n            setLabels(resp.data);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    }\r\n\r\n    const classes = useStyles(useTheme());\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const slideChange = (index: number) => {\r\n        const photos = props.photos;\r\n        const afterWithout = window.location.pathname.substr(0, window.location.pathname.lastIndexOf(\"/\") + 1);\r\n        history.replace(`${afterWithout}${photos[index].id}`);\r\n        setId(photos[index].id);\r\n    }\r\n\r\n    const mouseRight = () => {\r\n        setOpacityRight(100);\r\n        setOpacityLeft(0);\r\n    };\r\n\r\n    const mouseLeft = () => {\r\n        setOpacityLeft(100);\r\n        setOpacityRight(0);\r\n    };\r\n    const mouseCenter = () => {\r\n        setOpacityLeft(0);\r\n        setOpacityRight(0);\r\n    };\r\n\r\n    const modifiedButtonFunctions = {\r\n        ...props.buttonFunctions,\r\n        delete: async (id: string) => {\r\n            if (props.photos.length === 1) history.goBack();\r\n            else if (index === 0) {\r\n                slideChange(1)\r\n            } else {\r\n                slideChange(index - 1)\r\n            }\r\n            await props.buttonFunctions.delete(id);\r\n        },\r\n        remove: async (id: string) => {\r\n            if (props.photos.length === 1) history.goBack();\r\n            else\r\n                slideChange(index === 0 ? 1 : index - 1)\r\n            await props.buttonFunctions.remove(id);\r\n        },\r\n        info: () => {\r\n            setOpen(!open);\r\n        },\r\n    };\r\n\r\n    const swiperRef = useRef<SwiperCore>(null)\r\n    const prevRef = useRef<HTMLDivElement>(null)\r\n    const nextRef = useRef<HTMLDivElement>(null)\r\n\r\n    const hideArrows = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            <main\r\n                className={clsx(classes.content, {\r\n                    [classes.contentShift]: open,\r\n                })}\r\n            >\r\n                <ThemeProvider theme={theme}>\r\n                    <div\r\n                        className=\"root\"\r\n                        style={{\r\n                            display: `${hideArrows ? \"none\" : \"grid\"}`,\r\n                            width: `calc(100% - ${open ? drawerWidth : 0}px)`,\r\n                            transition: theme.transitions.create(\"width\", {\r\n                                easing: theme.transitions.easing.sharp,\r\n                                duration: theme.transitions.duration.leavingScreen,\r\n                            }),\r\n                        }}\r\n                    >\r\n                        <div ref={prevRef} className=\"leftIm\" onMouseEnter={mouseLeft} onMouseMove={mouseLeft}>\r\n                            <IconButton\r\n                                style={{\r\n                                    transition: \"0.01s linear\",\r\n                                    opacity: index === 0 ? 0 : opacityLeft,\r\n                                    backgroundColor: \"#222222\",\r\n                                    alignSelf: \"center\",\r\n                                    justifySelf: \"left\",\r\n                                    position: \"absolute\",\r\n                                    marginLeft: \"20px\",\r\n                                    height: \"64px\",\r\n                                    width: \"64px\",\r\n                                }}\r\n                                className=\"IconButton\"\r\n                                color=\"primary\"\r\n                                aria-label=\"left\"\r\n                            >\r\n                                <ChevronLeft style={{ height: \"64px\", width: \"64px\" }} />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"center\" onClick={() => history.goBack()} onMouseEnter={mouseCenter}></div>\r\n                        <div ref={nextRef} className=\"rightIm\" onMouseEnter={mouseRight} onMouseMove={mouseRight}>\r\n                            <IconButton\r\n                                style={{\r\n                                    transition: \"0.01s linear\",\r\n                                    opacity: index === props.photos.length - 1 ? 0 : opacityRight,\r\n                                    backgroundColor: \"#222222\",\r\n                                    alignSelf: \"center\",\r\n                                    justifySelf: \"right\",\r\n                                    position: \"absolute\",\r\n                                    marginRight: \"20px\",\r\n                                    height: \"64px\",\r\n                                    width: \"64px\",\r\n                                }}\r\n                                className=\"IconButton\"\r\n                                color=\"primary\"\r\n                                aria-label=\"left\"\r\n                            >\r\n                                <ChevronRight style={{ height: \"64px\", width: \"64px\" }} />\r\n                            </IconButton>\r\n                        </div>\r\n                    </div>\r\n                    <Carousel slideChange={slideChange} index={index} photos={props.photos} open={open} swiperRef={swiperRef} prevRef={prevRef} nextRef={nextRef} />\r\n                    <div className=\"rootTop\" style={{\r\n                        display: \"flex\", justifyContent: \"space-between\",\r\n                        width: `calc(100% - ${open ? drawerWidth : 0}px)`,\r\n                        transition: theme.transitions.create(\"width\", {\r\n                            easing: theme.transitions.easing.sharp,\r\n                            duration: theme.transitions.duration.leavingScreen,\r\n                        }),\r\n                    }}>\r\n                        <TopLeftBar />\r\n                        {props.topRightBar(id, modifiedButtonFunctions)}\r\n                    </div>\r\n\r\n                </ThemeProvider>\r\n            </main>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"right\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <Typography variant=\"h5\"> Info</Typography>\r\n                    <IconButton style={{ justifySelf: \"end\" }} onClick={handleDrawerClose}>\r\n                        <Close />\r\n                    </IconButton>\r\n                </div>\r\n                <Divider></Divider>\r\n\r\n                <List>\r\n                    <ListItem>\r\n                        <ListItemIcon>\r\n                            <PhotoOutlined />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={photo ? photo.name : \"\"} secondary=\"Useful info\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                        <ListItemIcon>\r\n                            <Label />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Labels\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                        <ul style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'left',\r\n                            flexWrap: 'wrap',\r\n                            listStyle: 'none',\r\n                            padding: 0,\r\n                            margin: 0,\r\n                            marginLeft: 5,\r\n                            marginTop: -15,\r\n                        }}>\r\n                            {labels === \"Loading\" ? <CircularProgress size={20} style={{ margin: 10 }} /> :\r\n                                <>\r\n                                    {labels.map((label) => {\r\n                                        return (\r\n                                            <li key={label}>\r\n                                                <LabelChip id={id} label={label} removeLabel={removeLabel} getLabels={getLabels} />\r\n                                            </li>\r\n                                        );\r\n                                    })}\r\n                                    <LabelInputChip addLabel={addLabel} getLabels={getLabels} id={id} />\r\n                                </>\r\n                            }\r\n                        </ul>\r\n                    </ListItem>\r\n                </List>\r\n            </Drawer>\r\n        </div >\r\n    );\r\n}\r\n\r\nfunction LabelChip(props: any) {\r\n\r\n    const classes = useStyles(useTheme());\r\n    const [deleted, setDeleted] = useState(false);\r\n\r\n    return (\r\n        <Chip\r\n            label={props.label}\r\n            onDelete={async () => { setDeleted(true); await props.removeLabel(props.id, props.label); props.getLabels() }}\r\n            className={classes.chip}\r\n            deleteIcon={deleted ? <CircularProgress style={{ height: 20, width: 20, padding: 1.5, marginRight: 7 }} /> : undefined}\r\n        />)\r\n}\r\n\r\nfunction LabelInputChip(props: any) {\r\n    const classes = useStyles(useTheme());\r\n    const [value, setValue] = useState(\"\");\r\n    const [added, setAdded] = useState(false);\r\n\r\n    const handleAdd = async () => {\r\n        setAdded(true);\r\n        await props.addLabel([props.id], [value]);\r\n        setValue(\"\");\r\n        setAdded(false);\r\n        props.getLabels();\r\n    }\r\n\r\n    return (\r\n        <Chip style={{ width: 120 }}\r\n            label={<TextField\r\n                style={{ height: 25, marginBottom: 5, marginLeft: 5 }}\r\n                value={value}\r\n                onChange={(event) => setValue(event.target.value)}\r\n                onKeyPress={(ev) => {\r\n                    if (ev.key === 'Enter') {\r\n                        handleAdd()\r\n                        ev.preventDefault();\r\n                    }\r\n                }}\r\n            />}\r\n            onKeyPress={(ev) => {\r\n                console.log(`Pressed keyCode ${ev.key}`);\r\n                if (ev.key === 'Enter') {\r\n                    // Do code here\r\n                    //TODO::IMPORTANT!\r\n                    ev.preventDefault();\r\n                }\r\n            }}\r\n            onDelete={handleAdd}\r\n            className={classes.chip}\r\n            deleteIcon={added ? <CircularProgress style={{ height: 20, width: 20, padding: 1.5, marginRight: 7 }} /> : < AddCircle style={{ transform: \"rotate(0deg)\" }} />}\r\n        />)\r\n}\r\n\r\nfunction makeSlides(photos: PhotoT[]): any[] {\r\n    return photos.map((photo: PhotoT, index: number) => {\r\n        return (\r\n            <SwiperSlide key={photo.id} virtualIndex={index} style={{ alignSelf: \"center\", justifySelf: \"center\" }}>\r\n                <img\r\n                    className=\"display\"\r\n                    alt={photo.id}\r\n                    style={{\r\n                        objectFit: \"scale-down\",\r\n                        height: \"100vh\",\r\n                        width: `100%`,\r\n                    }}\r\n                    src={baseURL + \"/media/\" + photo.id}\r\n                />\r\n            </SwiperSlide>\r\n        );\r\n    })\r\n}\r\n\r\nconst Carousel = (props: any) => {\r\n    const [key, setKey] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setKey(key + 1)\r\n    }, [props.photos, props.open])\r\n\r\n    return props.photos.length === 0 ? null : <Swiper key={key} className=\"imageHolder\" spaceBetween={50} slidesPerView={1} virtual style={{\r\n        width: `calc(100vw - ${props.open ? drawerWidth : 0}px)`,\r\n        zIndex: -1,\r\n        position: \"absolute\",\r\n    }}\r\n        navigation={{\r\n            prevEl: props.prevRef.current ? props.prevRef.current : undefined,\r\n            nextEl: props.nextRef.current ? props.nextRef.current : undefined,\r\n        }}\r\n        initialSlide={props.index >= props.photos.length ? props.photos.length - 1 : props.index}\r\n        onInit={swiper => {\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            // eslint-disable-next-line no-param-reassign\r\n            swiper.params.navigation.prevEl = props.prevRef.current\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            // eslint-disable-next-line no-param-reassign\r\n            swiper.params.navigation.nextEl = props.nextRef.current\r\n            swiper.navigation.update()\r\n        }}\r\n        onSlideChange={(e) => { props.slideChange(e.activeIndex) }}\r\n    >\r\n        {makeSlides(props.photos)}\r\n    </Swiper>\r\n}","import React, { useCallback, useState, useRef, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { PhotoT } from \"../../Interfaces\";\r\nimport { VariableSizeList as List } from \"react-window\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport { baseURL } from \"../../API\";\r\n\r\nconst useStyles = makeStyles({\r\n    photoDiv: {\r\n        padding: 10,\r\n        \"align-items\": \"center\",\r\n        \"justify-content\": \"center\",\r\n        display: \"flex\",\r\n        position: \"relative\",\r\n        transition: \"0.05s linear\",\r\n    },\r\n    photoBox: { transition: \"0.05s linear\", position: \"absolute\", left: 15, top: 15, height: 20, width: 20 },\r\n});\r\n\r\nfunction Photo(props: any) {\r\n    const realUrl = baseURL + \"/media/thumb_\" + props.id\r\n    const [url, setUrl] = useState(\"\");\r\n    useEffect(() => {\r\n        const timeout = setTimeout(() => setUrl(baseURL + \"/media/thumb_\" + props.id), 500);\r\n        return () => clearTimeout(timeout)\r\n    }, [props.id])\r\n    useEffect(() => {\r\n        if (!props.isScrolling)\r\n            setUrl(realUrl)\r\n    })\r\n    const padding = props.selected ? 0.9 : 1.0;\r\n    const [vis, setVis] = useState(0);\r\n    const opacity = props.anySelected() ? 255 : vis;\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <div\r\n            className={classes.photoDiv}\r\n            style={{\r\n                height: props.y,\r\n                width: props.x,\r\n            }}\r\n            onMouseEnter={() => setVis(0.4)}\r\n            onMouseLeave={() => setVis(0)}\r\n        >\r\n            <div onClick={props.imageClick}>\r\n                <div style={{ backgroundColor: \"#eeeeee\", height: props.y - 5, width: props.x - 5 }}>\r\n                    <div style={{ transition: \"0.05s linear\", transform: `scale(${padding})`, backgroundImage: url === \"\" ? \"none\" : `url(${url})`, height: props.y - 5, width: props.x - 5, backgroundSize: \"100% 100%\" }} />\r\n                </div>\r\n            </div>\r\n            {(vis || props.anySelected() || true) && <input className={classes.photoBox} style={{ opacity: opacity }} readOnly={true} checked={props.selected} type=\"checkbox\" onClick={props.click} />}\r\n        </div>\r\n    );\r\n}\r\nconst makePhoto = (photo: PhotoT, realH: number, props: any, isScrolling: boolean) => (\r\n    <Photo\r\n        key={photo.id}\r\n        id={photo.id}\r\n        x={(photo.width * realH) / photo.height}\r\n        y={realH}\r\n        click={props.clickHandler(photo.id)}\r\n        imageClick={props.imageClickHandler(photo.id)}\r\n        selected={props.selected.includes(photo.id)}\r\n        anySelected={props.anySelected}\r\n        outZoom={0.9}\r\n        isScrolling={isScrolling}\r\n    />\r\n);\r\n\r\nconst targetHeight = 300;\r\n\r\nconst calculate = (photos: PhotoT[], width: number) => {\r\n    const rowH: number[] = [];\r\n    const rowPics: PhotoT[][] = [];\r\n\r\n    let ptr = 0;\r\n\r\n    while (ptr !== photos.length) {\r\n        let curPics: PhotoT[] = [];\r\n        let curWidth = 0;\r\n\r\n        while (\r\n            ptr !== photos.length &&\r\n            (curWidth === 0 ||\r\n                Math.abs(targetHeight - (targetHeight * width) / curWidth) > Math.abs(targetHeight - (targetHeight * width) / (curWidth + (photos[ptr].width / photos[ptr].height) * targetHeight)))\r\n        ) {\r\n            curPics.push(photos[ptr]);\r\n            curWidth += (photos[ptr].width / photos[ptr].height) * targetHeight;\r\n            ptr++;\r\n        }\r\n\r\n        rowPics.push(curPics);\r\n        if (ptr !== photos.length || width < curWidth) rowH.push((targetHeight * width) / curWidth);\r\n        else rowH.push(targetHeight);\r\n    }\r\n\r\n    return { rowH, rowPics };\r\n};\r\n\r\nconst Row = (altprops: any) =>\r\n    altprops.data.linNum <= altprops.index ? (\r\n        <div style={{ ...altprops.style, display: \"flex\", transition: \"0.05s linear\" }}>\r\n            {altprops.data.rowPics[altprops.index].map((p: PhotoT) => makePhoto(p, altprops.data.rowH[altprops.index], altprops.data.props, altprops.isScrolling))}\r\n        </div>\r\n    ) : (\r\n            <div>{altprops.data.rowPics[altprops.index]}</div>\r\n        );\r\n\r\nconst CustomScrollbars = ({ onScroll, forwardedRef, style, children }: any) => {\r\n    const refSetter = useCallback(\r\n        (scrollbarsRef) => {\r\n            if (scrollbarsRef) {\r\n                forwardedRef(scrollbarsRef.view);\r\n            } else {\r\n                forwardedRef(null);\r\n            }\r\n        },\r\n        [forwardedRef]\r\n    );\r\n\r\n    return (\r\n        <Scrollbars ref={refSetter} style={{ ...style, overflow: \"hidden\" }} onScroll={onScroll}>\r\n            {children}\r\n        </Scrollbars>\r\n    );\r\n};\r\n\r\nconst CustomScrollbarsVirtualList = React.forwardRef((props, ref) => <CustomScrollbars {...props} forwardedRef={ref} />);\r\n\r\nexport default function AbstractPhotoPage(props: {\r\n    photos: PhotoT[];\r\n    height: number;\r\n    width: number;\r\n    clickHandler: (id: string) => () => void;\r\n    imageClickHandler: (id: string) => () => void;\r\n    selected: string[];\r\n    anySelected: any;\r\n    heights: number[];\r\n    lines: any[];\r\n    viewId: string;\r\n    setViewId: (id: string) => void;\r\n}) {\r\n    const [jumped, setJumped] = useState(false);\r\n    const listRef = useRef<List>(null);\r\n    useEffect(() => {\r\n        listRef.current?.resetAfterIndex(0);\r\n        const item = tmpRowPics.findIndex((photos: PhotoT[]) => {\r\n            return photos.filter((p) => p.id === props.viewId).length !== 0;\r\n        });\r\n        if (!jumped && item !== 1) listRef.current?.scrollToItem(item + props.lines.length, \"smart\");\r\n        setJumped(true);\r\n    }, [props.width, props.photos, props.heights]);\r\n    const { rowH: tmpRowH, rowPics: tmpRowPics } = calculate(props.photos, props.width - 12);\r\n    const rowH = [...props.heights, ...tmpRowH];\r\n    const rowPics = [...props.lines, ...tmpRowPics];\r\n    const getItemSize = (index: number) => (index !== rowH.length - 1 ? rowH[index] : rowH[index] + 20);\r\n\r\n    return (\r\n        <List\r\n            useIsScrolling\r\n            overscanCount={10}\r\n            height={props.height}\r\n            ref={listRef}\r\n            itemData={{ rowH, rowPics, props, linNum: props.lines.length }}\r\n            itemCount={rowH.length}\r\n            itemSize={getItemSize}\r\n            width={props.width - 1}\r\n            outerElementType={CustomScrollbarsVirtualList}\r\n        >\r\n            {Row}\r\n        </List>\r\n    );\r\n}\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { CloudDownload, Delete, Info, LibraryAdd } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\n\r\nexport default function TopRightBar(props: any) {\r\n    return (\r\n        <div\r\n            className=\"TopRightBar\"\r\n            style={{\r\n                alignSelf: \"flex-start\",\r\n                justifySelf: \"right\",\r\n                padding: 10,\r\n            }}\r\n        >\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"info\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.info();\r\n                }}\r\n            >\r\n                <Info />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"download\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.download(props.id);\r\n                }}\r\n            >\r\n                <CloudDownload />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"library_add\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.addToAlbum(props.id);\r\n                }}\r\n            >\r\n                <LibraryAdd />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"delete\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.delete(props.id);\r\n                }}\r\n            >\r\n                <Delete />\r\n            </IconButton>\r\n        </div>\r\n    );\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport { FileRejection } from \"react-dropzone\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class UploadErrorSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | UploadErrorSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(fileRejections: FileRejection[]) {\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {fileRejections.map((fileRejection) => (\r\n                    <div key={count++}>{`${fileRejection.file.name}: ${fileRejection.errors[0].message}`}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n        if (fileRejections.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import React, { ChangeEvent, RefObject, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { CssBaseline, AppBar, Toolbar, IconButton, createStyles, Theme, Typography, Backdrop } from \"@material-ui/core\";\r\nimport TopBar from \"./TopBar\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport ViewPage from \"../ViewPage/ViewPage\";\r\nimport AddToAlbum from \"../Shared/AddToAlbum\";\r\nimport { PhotoT, AlbumT } from \"../../Interfaces\";\r\nimport AbstractPhotoPage from \"../Shared/AbstractPhotoPage\";\r\nimport { addPhotos, addPhotosToAlbums, deletePhotos, download, getAlbums, getPhotoLabels, getPhotos } from \"../../API\";\r\nimport TopRightBar from \"./TopRightBar\";\r\nimport AutoSizer from \"react-virtualized-auto-sizer\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { useDropzone, FileRejection } from \"react-dropzone\";\r\nimport { UploadErrorSnackbar } from \"../Snackbars/UploadErrorSnackbar\";\r\nimport { CloudUpload } from \"@material-ui/icons\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nconst maxSize = parseInt(process.env.MAX_SIZE || (50 * 1024 * 1024).toString());\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        appBar: {\r\n            background: \"white\",\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n            },\r\n        },\r\n        menuButton: {\r\n            color: theme.palette.primary.main,\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: {\r\n            ...theme.mixins.toolbar,\r\n            height: 64,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            paddingLeft: 12,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100vh\",\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n    })\r\n);\r\n\r\nexport default function PhotoPage(props: { handleDrawerToggle: () => void; drawerElement: any }) {\r\n    const classes = useStyles();\r\n\r\n    const [photos, setPhotos] = useState<PhotoT[]>([]);\r\n    const [albums, setAlbums] = useState<AlbumT[]>([]);\r\n    const [selected, setSelected] = useState<string[]>([]);\r\n    const [selectable, setSelectable] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showLoadingBar, setShowLoadingBar] = useState(true);\r\n    const [viewId, setViewId] = useState(\"\");\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const { getRootProps, open: openM, getInputProps, acceptedFiles, fileRejections, isDragActive } = useDropzone({\r\n        // Disable click and keydown behavior\r\n        noClick: true,\r\n        noKeyboard: true,\r\n        accept: 'image/jpeg, image/png',\r\n    })\r\n\r\n    useEffect(() => { upload(acceptedFiles, fileRejections) }, [acceptedFiles, fileRejections])\r\n\r\n    const [showSearchBar, setShowSearchBar] = useState(false);\r\n    const [searchBarText, setSearchBarText] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const [autocompleteOptions, setAutocompleteOptions] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (photos.length === 0)\r\n                setAutocompleteOptions([])\r\n            else\r\n                setAutocompleteOptions((await getPhotoLabels(photos.map(photo => photo.id))).data)\r\n\r\n        })()\r\n    }, [photos])\r\n\r\n    const fetchPhotos = async () => {\r\n        setShowLoadingBar(true);\r\n        const resp = await getPhotos(searchTerm);\r\n        if (resp.status === 200) {\r\n            setPhotos(resp.data);\r\n            setShowLoadingBar(false);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    const fetchAlbums = async () => {\r\n        const resp = await getAlbums(\"\");\r\n        if (resp.status === 200) {\r\n            setAlbums(resp.data);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchPhotos();\r\n        fetchAlbums();\r\n    }, [searchTerm]);\r\n\r\n    const history = useHistory();\r\n\r\n    const imageClickHandler = (id: string) => () => {\r\n        if (anySelected()) {\r\n            clickHandler(id)();\r\n        } else {\r\n            history.push(`/view/${id}`);\r\n        }\r\n    };\r\n\r\n    const clickHandler = (id: string) => () => {\r\n        let copy = selected.slice();\r\n        if (copy.includes(id)) copy = copy.filter((v) => v !== id);\r\n        else copy.push(id);\r\n        setSelected(copy);\r\n        if (copy.length === 0) {\r\n            setSelectable(false);\r\n        }\r\n    };\r\n\r\n    const anySelected = () => {\r\n        return selected.length !== 0 || selectable;\r\n    };\r\n\r\n    const cb = async (albumIds: any) => {\r\n        topBarButtonFunctions.unselect();\r\n        await addPhotosToAlbums(selected, albumIds, enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const viewButtonFunctions = {\r\n        delete: async (id: string) => {\r\n            await deletePhoto(id);\r\n            await fetchPhotos();\r\n        },\r\n        addToAlbum: (id: string) => {\r\n            setSelected([id]);\r\n            setOpen(true);\r\n        },\r\n        download: async (id: string) => {\r\n            await download(\r\n                photos.filter((photo) => id === photo.id),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n    };\r\n\r\n    const deletePhoto = async (pid: any) => {\r\n        setPhotos(photos.filter((p) => p.id !== pid));\r\n        await deletePhotos([pid], enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const topBarButtonFunctions = {\r\n        delete: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await deletePhotos(selected, enqueueSnackbar, closeSnackbar);\r\n            setPhotos(photos.filter((p) => !selected.includes(p.id)));\r\n            await fetchPhotos();\r\n        },\r\n        unselect: () => {\r\n            setSelected([]);\r\n            setSelectable(false);\r\n        },\r\n        upload: () => {\r\n            openM()\r\n        },\r\n        settings: () => {\r\n            //Nav to settings page\r\n        },\r\n        select: () => {\r\n            setSelectable(!selectable);\r\n        },\r\n        addToAlbum: () => {\r\n            setOpen(true);\r\n        },\r\n        download: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await download(\r\n                photos.filter((photo) => selected.includes(photo.id)),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n        search: (s: string) => async () => {\r\n            setSearchTerm(s);\r\n        },\r\n        mobileSearch: () => {\r\n            setShowSearchBar(!showSearchBar);\r\n        },\r\n    };\r\n    const upload = async (files: File[], fileRejections: FileRejection[]) => {\r\n        if (!files) return;\r\n\r\n        const formData = new FormData();\r\n        files.forEach((file) => {\r\n            if (file.size > maxSize) {\r\n                fileRejections.push({ file, errors: [{ message: `File is bigger than ${maxSize} bytes`, code: \"file-too-large\" }] })\r\n            } else {\r\n                formData.append(\"file\", file);\r\n            }\r\n        });\r\n\r\n        const snackbar = UploadErrorSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n        snackbar?.begin(fileRejections)\r\n\r\n        if (formData.getAll(\"file\").length === 0) return;\r\n\r\n        await addPhotos(formData, enqueueSnackbar, closeSnackbar, albums);\r\n        await fetchPhotos();\r\n    };\r\n\r\n    const topRightBar = (id: string, buttonFunctions: any) => {\r\n        return <TopRightBar id={id} buttonFunctions={buttonFunctions} />;\r\n    };\r\n\r\n    const lines = [\r\n        <div></div>,\r\n        <Typography variant=\"h5\" style={{ display: searchTerm === \"\" || !searchTerm ? \"none\" : \"block\", paddingTop: 10, paddingLeft: 5 }}>\r\n            Search results for {searchTerm}:\r\n        </Typography>,\r\n    ];\r\n\r\n    const heights = [12, searchTerm === \"\" || !searchTerm ? 0 : 28];\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route path=\"/view\">\r\n                    <ViewPage setViewId={setViewId} photos={photos} topRightBar={topRightBar} buttonFunctions={viewButtonFunctions}></ViewPage>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    <div  {...getRootProps({ className: 'dropzone' })} className={classes.root} >\r\n\r\n                        <Backdrop open={isDragActive} transitionDuration={150} style={{\r\n                            zIndex: 1201,\r\n                            backgroundColor: \"#00006666\",\r\n                        }}>\r\n                            <div>\r\n                                <CloudUpload style={{ fontSize: 200, color: \"#1976d2aa\" }}></CloudUpload>\r\n                            </div>\r\n                        </Backdrop>\r\n                        <input {...getInputProps()} />\r\n                        <CssBaseline />\r\n\r\n                        <AppBar position=\"fixed\" className={classes.appBar}>\r\n                            <Toolbar>\r\n                                <IconButton color=\"inherit\" aria-label=\"open drawer\" edge=\"start\" onClick={props.handleDrawerToggle} className={classes.menuButton}>\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                                <TopBar searchBarText={searchBarText} setSearchBarText={setSearchBarText} autocompleteOptions={autocompleteOptions} anySelected={anySelected} buttonFunctions={topBarButtonFunctions} numSelected={() => selected.length} show={showLoadingBar} />\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n                        {props.drawerElement}\r\n\r\n                        <main className={classes.content}>\r\n                            <div className={classes.toolbar} />\r\n                            {showSearchBar && (\r\n                                <AutocompleteSearchBar\r\n                                    options={autocompleteOptions}\r\n                                    search={topBarButtonFunctions.search}\r\n                                    className={classes.onlyMobile}\r\n                                    value={searchBarText}\r\n                                    onChange={(s: string) => setSearchBarText(s)}\r\n                                    onRequestSearch={topBarButtonFunctions.search(searchBarText)}\r\n                                    style={{ marginLeft: -6, borderRadius: 0, alignSelf: \"flex-top\" }}\r\n                                />\r\n                            )}\r\n                            <div style={{ flexGrow: 1 }}>\r\n                                <AutoSizer>\r\n                                    {({ height, width }) => (\r\n                                        <AbstractPhotoPage\r\n                                            height={height - 1}\r\n                                            width={width}\r\n                                            photos={photos}\r\n                                            clickHandler={clickHandler}\r\n                                            selected={selected}\r\n                                            anySelected={anySelected}\r\n                                            imageClickHandler={imageClickHandler}\r\n                                            lines={lines}\r\n                                            heights={heights}\r\n                                            viewId={viewId}\r\n                                            setViewId={setViewId}\r\n                                        />\r\n                                    )}\r\n                                </AutoSizer>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            <AddToAlbum albums={albums} open={open} setOpen={setOpen} cb={cb} />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Search, CreateNewFolder } from \"@material-ui/icons\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport TopBarStyle from \"../Shared/TopBarStyle\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nexport default function TopBar(props: any) {\r\n    const classes = TopBarStyle();\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1 }}>\r\n            <div className={classes.TopBar}>\r\n                <div className={classes.middle}>\r\n                    <AutocompleteSearchBar\r\n                        options={props.autocompleteOptions}\r\n                        search={props.buttonFunctions.search}\r\n                        className={classes.notMobile}\r\n                        value={props.searchBarText}\r\n                        onChange={(s: string) => props.setSearchBarText(s)}\r\n                        onRequestSearch={props.buttonFunctions.search(props.searchBarText)}\r\n                    />\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"search\" onClick={props.buttonFunctions.mobileSearch}>\r\n                        <Search />\r\n                    </IconButton>\r\n                    <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"add\" onClick={props.buttonFunctions.add}>\r\n                        <CreateNewFolder />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            <LinearProgress\r\n                style={{\r\n                    marginTop: -2,\r\n                    display: props.show ? \"block\" : \"none\",\r\n                    flexGrow: 1,\r\n                    marginLeft: -24,\r\n                    marginRight: -24,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\n\r\nexport default function CreateAlbum(props: { cb: (arg0: string) => any; setOpen: (arg0: boolean) => any; open: boolean; albums: AlbumT[] }) {\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const handleClose = (execute: boolean) => async () => {\r\n        if (execute) await props.cb(value);\r\n        setValue(\"\");\r\n        await props.setOpen(false);\r\n    };\r\n    const [value, setValue] = React.useState(\"\");\r\n\r\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setValue(event.target.value);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog fullWidth fullScreen={fullScreen} open={props.open} onClose={handleClose(false)} aria-labelledby=\"responsive-dialog-title\">\r\n                <DialogTitle id=\"responsive-dialog-title\">Add to Album</DialogTitle>\r\n                <DialogContent>\r\n                    <TextField label=\"Name your album\" placeholder=\"My new album\" variant=\"filled\" value={value} onChange={handleChange} fullWidth autoFocus margin=\"dense\" />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose(true)} color=\"primary\">\r\n                        Add\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { CloudDownload, LibraryAdd, Delete, Cancel, CloudUpload, Search, CheckBox, RemoveCircleOutline, Pages, ArrowBack } from \"@material-ui/icons\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport TopBarStyle from \"../../Shared/TopBarStyle\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nimport AutocompleteSearchBar from \"../../Shared/SearchBar\";\r\n\r\nexport default function TopBar(props: any) {\r\n    const classes = TopBarStyle();\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1 }}>\r\n            <div className={classes.TopBar}>\r\n                <div className={classes.left}>\r\n                    {props.numSelected() === 0 && (\r\n                        <IconButton style={{ float: \"left\" }} aria-label=\"back\" onClick={() => history.goBack()} className=\"IconButton\">\r\n                            <ArrowBack />\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n                <div className={classes.middle}>\r\n                    <AutocompleteSearchBar\r\n                        options={props.autocompleteOptions}\r\n                        search={props.buttonFunctions.search}\r\n                        className={classes.notMobile}\r\n                        value={props.searchBarText}\r\n                        onChange={(s: string) => props.setSearchBarText(s)}\r\n                        onRequestSearch={props.buttonFunctions.search(props.searchBarText)}\r\n                    />\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <div style={{ float: \"left\" }}>\r\n                        <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"search\" onClick={props.buttonFunctions.mobileSearch}>\r\n                            <Search />\r\n                        </IconButton>\r\n                        {props.numSelected() === 0 && (\r\n                            <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"select\" onClick={props.buttonFunctions.select}>\r\n                                <CheckBox />\r\n                            </IconButton>\r\n                        )}\r\n                    </div>\r\n                    {props.numSelected() === 1 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"set as cover\" onClick={props.buttonFunctions.setCover}>\r\n                            <Pages />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() === 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"upload\" onClick={props.buttonFunctions.upload}>\r\n                            <CloudUpload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cancel\" onClick={props.buttonFunctions.unselect}>\r\n                            <Cancel />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cloud_download\" onClick={props.buttonFunctions.download}>\r\n                            <CloudDownload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"library_add\" onClick={props.buttonFunctions.addToAlbum}>\r\n                            <LibraryAdd />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"remove\" onClick={props.buttonFunctions.remove}>\r\n                            <RemoveCircleOutline />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"delete\" onClick={props.buttonFunctions.delete}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <LinearProgress\r\n                style={{\r\n                    marginTop: -2,\r\n                    display: props.show ? \"block\" : \"none\",\r\n                    flexGrow: 1,\r\n                    marginLeft: -24,\r\n                    marginRight: -24,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { CloudDownload, Delete, Info, LibraryAdd, Pages, RemoveCircleOutline } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\n\r\nexport default function TopRightBar(props: any) {\r\n    return (\r\n        <div\r\n            className=\"TopRightBar\"\r\n            style={{\r\n                alignSelf: \"flex-start\",\r\n                justifySelf: \"right\",\r\n                padding: 10,\r\n            }}\r\n        >\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"info\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.info();\r\n                }}\r\n            >\r\n                <Info />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"set cover\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.setCover(props.id);\r\n                }}\r\n            >\r\n                <Pages />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"download\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.download(props.id);\r\n                }}\r\n            >\r\n                <CloudDownload />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"library_add\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.addToAlbum(props.id);\r\n                }}\r\n            >\r\n                <LibraryAdd />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"remove\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.remove(props.id);\r\n                }}\r\n            >\r\n                <RemoveCircleOutline />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"delete\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.delete(props.id);\r\n                }}\r\n            >\r\n                <Delete />\r\n            </IconButton>\r\n        </div>\r\n    );\r\n}\r\n","import React, { ChangeEvent, RefObject, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { CssBaseline, AppBar, Toolbar, IconButton, createStyles, Theme, Typography, Backdrop } from \"@material-ui/core\";\r\nimport TopBar from \"./TopBar\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport ViewPage from \"../../ViewPage/ViewPage\";\r\nimport AddToAlbum from \"../../Shared/AddToAlbum\";\r\nimport { PhotoT, AlbumT } from \"../../../Interfaces\";\r\nimport AbstractPhotoPage from \"../../Shared/AbstractPhotoPage\";\r\nimport { addPhotos, addPhotosToAlbums, deletePhotos, download, getAlbums, getPhotoLabels, getPhotosInAlbum, removePhotosFromAlbum, setCover } from \"../../../API\";\r\nimport TopRightBar from \"./TopRightBar\";\r\nimport AutoSizer from \"react-virtualized-auto-sizer\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { FileRejection, useDropzone } from \"react-dropzone\";\r\nimport { UploadErrorSnackbar } from \"../../Snackbars/UploadErrorSnackbar\";\r\nimport { CloudUpload } from \"@material-ui/icons\";\r\nimport AutocompleteSearchBar from \"../../Shared/SearchBar\";\r\n\r\nconst maxSize = parseInt(process.env.MAX_SIZE || (50 * 1024 * 1024).toString());\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        appBar: {\r\n            background: \"white\",\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n            },\r\n        },\r\n        menuButton: {\r\n            color: theme.palette.primary.main,\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: {\r\n            ...theme.mixins.toolbar,\r\n            height: 64,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            paddingLeft: 12,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100vh\",\r\n        },\r\n    })\r\n);\r\n\r\nexport default function AlbumPhotoPage(props: { handleDrawerToggle: () => void; drawerElement: any; refresh: () => Promise<void> }) {\r\n    //#region Hooks\r\n    const classes = useStyles();\r\n\r\n    const history = useHistory();\r\n    const id = window.location.pathname.split(\"/\")[3];\r\n\r\n    const [photos, setPhotos] = useState<PhotoT[]>([]);\r\n    const [albums, setAlbums] = useState<AlbumT[]>([]);\r\n    const [selected, setSelected] = useState<string[]>([]);\r\n    const [selectable, setSelectable] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showLoadingBar, setShowLoadingBar] = useState(true);\r\n    const [viewId, setViewId] = useState(\"\");\r\n\r\n    const [showSearchBar, setShowSearchBar] = useState(false);\r\n    const [searchBarText, setSearchBarText] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const [autocompleteOptions, setAutocompleteOptions] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (photos.length === 0)\r\n                setAutocompleteOptions([])\r\n            else\r\n                setAutocompleteOptions((await getPhotoLabels(photos.map(photo => photo.id))).data)\r\n\r\n        })()\r\n    }, [photos])\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const { getRootProps, open: openM, getInputProps, acceptedFiles, fileRejections, isDragActive } = useDropzone({\r\n        // Disable click and keydown behavior\r\n        noClick: true,\r\n        noKeyboard: true,\r\n        accept: 'image/jpeg, image/png',\r\n    })\r\n\r\n    useEffect(() => { upload(acceptedFiles, fileRejections) }, [acceptedFiles, fileRejections])\r\n\r\n    const fetchPhotos = async () => {\r\n        setShowLoadingBar(true);\r\n        const resp = await getPhotosInAlbum(id, searchTerm);\r\n        if (resp.status === 200) {\r\n            setPhotos(resp.data);\r\n            setShowLoadingBar(false);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    const fetchAlbums = async () => {\r\n        const resp = await getAlbums(\"\")\r\n        if (resp.status === 200) {\r\n            setAlbums(resp.data);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchPhotos();\r\n        fetchAlbums();\r\n    }, [searchTerm, id]);\r\n    //#endregion hooks\r\n\r\n    //#region API\r\n\r\n    const cb = async (albumIds: string[]) => {\r\n        topBarButtonFunctions.unselect();\r\n        await addPhotosToAlbums(selected, albumIds, enqueueSnackbar, closeSnackbar);\r\n        await props.refresh();\r\n    };\r\n\r\n    const deletePhoto = async (pid: string) => {\r\n        setPhotos(photos.filter((p) => p.id !== pid));\r\n        await deletePhotos([pid], enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const removePhoto = async (pid: string) => {\r\n        setPhotos(photos.filter((p) => p.id !== pid));\r\n        await removePhotosFromAlbum([pid], id, enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const upload = async (files: File[], fileRejections: FileRejection[]) => {\r\n        if (!files) return;\r\n\r\n        const formData = new FormData();\r\n        files.forEach((file) => {\r\n            if (file.size > maxSize) {\r\n                fileRejections.push({ file, errors: [{ message: `File is bigger than ${maxSize} bytes`, code: \"file-too-large\" }] })\r\n            } else {\r\n                formData.append(\"file\", file);\r\n            }\r\n        });\r\n\r\n        const snackbar = UploadErrorSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n        snackbar?.begin(fileRejections)\r\n\r\n        if (formData.getAll(\"file\").length === 0) return;\r\n        const data = await addPhotos(formData, enqueueSnackbar, closeSnackbar, albums);\r\n\r\n        await addPhotosToAlbums(data, [id], enqueueSnackbar, closeSnackbar);\r\n        await fetchPhotos();\r\n        await props.refresh();\r\n    };\r\n    //#endregion API\r\n\r\n    //#region handlers\r\n\r\n    const imageClickHandler = (photoId: string) => () => {\r\n        if (anySelected()) {\r\n            clickHandler(photoId)();\r\n        } else {\r\n            history.push(`/albums/open/${id}/view/${photoId}`);\r\n        }\r\n    };\r\n\r\n    const clickHandler = (id: string) => () => {\r\n        let copy = selected.slice();\r\n        if (copy.includes(id)) copy = copy.filter((v) => v !== id);\r\n        else copy.push(id);\r\n        setSelected(copy);\r\n        if (copy.length === 0) {\r\n            setSelectable(false);\r\n        }\r\n    };\r\n\r\n    const anySelected = (): boolean => {\r\n        return selected.length !== 0 || selectable;\r\n    };\r\n\r\n    const viewButtonFunctions = {\r\n        delete: async (id: string) => {\r\n            await deletePhoto(id);\r\n            // await fetchPhotos();\r\n            await props.refresh();\r\n        },\r\n        remove: async (id: string) => {\r\n            await removePhoto(id);\r\n            setPhotos(photos.filter((p) => p.id !== id));\r\n            // await fetchPhotos();\r\n            await props.refresh();\r\n        },\r\n        addToAlbum: (id: string) => {\r\n            setSelected([id]);\r\n            setOpen(true);\r\n        },\r\n        setCover: async (photoID: string) => {\r\n            await setCover(id, photoID);\r\n            await props.refresh();\r\n        },\r\n        download: async (id: string) => {\r\n            await download(\r\n                photos.filter((photo) => id === photo.id),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n    };\r\n\r\n    const topBarButtonFunctions = {\r\n        setCover: async () => {\r\n            await setCover(id, selected[0]);\r\n            topBarButtonFunctions.unselect();\r\n            await props.refresh();\r\n        },\r\n        delete: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await deletePhotos(selected, enqueueSnackbar, closeSnackbar);\r\n            setPhotos(photos.filter((p) => !selected.includes(p.id)));\r\n\r\n            await fetchPhotos();\r\n            await props.refresh();\r\n        },\r\n        remove: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await removePhotosFromAlbum(selected, id, enqueueSnackbar, closeSnackbar);\r\n            setPhotos(photos.filter((p) => !selected.includes(p.id)));\r\n\r\n            await fetchPhotos();\r\n            await props.refresh();\r\n        },\r\n        unselect: () => {\r\n            setSelected([]);\r\n            setSelectable(false);\r\n        },\r\n        upload: () => {\r\n            openM()\r\n        },\r\n        settings: () => {\r\n            //Nav to settings page\r\n        },\r\n        select: () => {\r\n            setSelectable(!selectable);\r\n        },\r\n        addToAlbum: () => {\r\n            setOpen(true);\r\n        },\r\n        download: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            download(\r\n                photos.filter((photo) => selected.includes(photo.id)),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n        search: (s: string) => async () => {\r\n            setSearchTerm(s);\r\n        },\r\n        mobileSearch: () => {\r\n            setShowSearchBar(!showSearchBar);\r\n        },\r\n    };\r\n\r\n    //#endregion handlers\r\n\r\n    const topRightBar = (id: string, buttonFunctions: any) => {\r\n        return <TopRightBar id={id} buttonFunctions={buttonFunctions} />;\r\n    };\r\n\r\n    const lines = [\r\n        <div> </div>,\r\n        <Typography variant=\"h4\" style={{ paddingTop: 10, paddingLeft: 5 }}>\r\n            {(albums.find((album: AlbumT) => album.id.toString() === id) || { name: \"\" }).name}\r\n        </Typography>,\r\n        <Typography variant=\"h5\" style={{ display: searchTerm === \"\" || !searchTerm ? \"none\" : \"block\", paddingLeft: 5 }}>\r\n            Search results for {searchTerm}:\r\n        </Typography>,\r\n    ];\r\n\r\n    const heights = [12, 42, searchTerm === \"\" || !searchTerm ? 0 : 28];\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route path=\"/albums/open/:albumID/view\">\r\n                    <ViewPage setViewId={setViewId} photos={photos} topRightBar={topRightBar} buttonFunctions={viewButtonFunctions}></ViewPage>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    <div  {...getRootProps({ className: 'dropzone' })} className={classes.root} >\r\n                        <Backdrop open={isDragActive} transitionDuration={150} style={{\r\n                            zIndex: 1201,\r\n                            backgroundColor: \"#00006666\",\r\n                        }}>\r\n                            <div>\r\n                                <CloudUpload style={{ fontSize: 200, color: \"#1976d2aa\" }}></CloudUpload>\r\n                            </div>\r\n                        </Backdrop>\r\n\r\n                        <input {...getInputProps()} />\r\n                        <CssBaseline />\r\n\r\n                        <AppBar position=\"fixed\" className={classes.appBar}>\r\n                            <Toolbar>\r\n                                <IconButton color=\"inherit\" aria-label=\"open drawer\" edge=\"start\" onClick={props.handleDrawerToggle} className={classes.menuButton}>\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                                <TopBar searchBarText={searchBarText} setSearchBarText={setSearchBarText} autocompleteOptions={autocompleteOptions} anySelected={anySelected} buttonFunctions={topBarButtonFunctions} numSelected={() => selected.length} show={showLoadingBar} />\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n                        {props.drawerElement}\r\n\r\n                        <main className={classes.content}>\r\n                            <div className={classes.toolbar} />\r\n                            {showSearchBar && (\r\n                                <AutocompleteSearchBar\r\n                                    options={autocompleteOptions}\r\n                                    search={topBarButtonFunctions.search}\r\n                                    className={classes.onlyMobile}\r\n                                    value={searchBarText}\r\n                                    onChange={(s: string) => setSearchBarText(s)}\r\n                                    onRequestSearch={topBarButtonFunctions.search(searchBarText)}\r\n                                    style={{ marginLeft: -6, borderRadius: 0, alignSelf: \"flex-top\" }}\r\n                                />\r\n                            )}\r\n                            <div style={{ flexGrow: 1 }}>\r\n                                <AutoSizer>\r\n                                    {({ height, width }) => (\r\n                                        <AbstractPhotoPage\r\n                                            height={height - 1}\r\n                                            width={width}\r\n                                            photos={photos}\r\n                                            clickHandler={clickHandler}\r\n                                            selected={selected}\r\n                                            anySelected={anySelected}\r\n                                            imageClickHandler={imageClickHandler}\r\n                                            lines={lines}\r\n                                            heights={heights}\r\n                                            viewId={viewId}\r\n                                            setViewId={setViewId}\r\n                                        />\r\n                                    )}\r\n                                </AutoSizer>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            <AddToAlbum albums={albums} open={open} setOpen={setOpen} cb={cb}></AddToAlbum>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport { clearCover, deleteAlbum, renameAlbum } from \"../../API\";\r\n\r\nexport default function AlbumInfo(props: { album: AlbumT; open: boolean; setOpen: (arg0: boolean) => any; fetchAlbums: () => Promise<void> }) {\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n    const [nameField, setNameField] = useState(props.album.name);\r\n    const [hasCover, setHasCover] = useState(props.album.cover !== null);\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            setNameField(props.album.name);\r\n            setHasCover(props.album.cover !== null);\r\n        }\r\n    }, [props.open]);\r\n\r\n    const handleClose = (execute: boolean) => async () => {\r\n        let ex = false;\r\n        if (execute && props.album.name !== nameField) {\r\n            ex = true;\r\n            await renameAlbum(props.album.id, nameField);\r\n        }\r\n        if (execute && props.album.cover !== null && !hasCover) {\r\n            ex = true;\r\n            await clearCover(props.album.id);\r\n        }\r\n\r\n        if (ex) await props.fetchAlbums();\r\n\r\n        await props.setOpen(false);\r\n    };\r\n\r\n    const deleteThis = async () => {\r\n        await deleteAlbum(props.album.id);\r\n        await props.fetchAlbums();\r\n        await handleClose(false)();\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog fullScreen={fullScreen} open={props.open} onClose={handleClose(false)} aria-labelledby=\"responsive-dialog-title\">\r\n                <DialogTitle id=\"responsive-dialog-title\">Settings of {props.album.name}</DialogTitle>\r\n                <DialogContent>\r\n                    <Button style={{ backgroundColor: \"#dddddd\" }} disabled={!hasCover} onClick={() => setHasCover(false)}>\r\n                        {hasCover ? \"Clear cover\" : \"No album cover\"}\r\n                    </Button>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <TextField\r\n                        value={nameField}\r\n                        onChange={(e) => setNameField(e.target.value)}\r\n                        inputProps={{ style: { fontSize: 20 } }} // font size of input text\r\n                        InputLabelProps={{ style: { fontSize: 20 } }} // font size of input label\r\n                    ></TextField>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={deleteThis} color=\"primary\" autoFocus>\r\n                        Delete Album\r\n                    </Button>\r\n                    <Button onClick={handleClose(false)} color=\"primary\" autoFocus>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleClose(true)} color=\"primary\" autoFocus>\r\n                        Save\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useCallback, useState, useRef, useEffect } from \"react\";\r\nimport { createMuiTheme, createStyles, makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport { VariableSizeList as List } from \"react-window\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport { GridList, GridListTile, GridListTileBar, IconButton } from \"@material-ui/core\";\r\nimport { PhotoAlbum, Info } from \"@material-ui/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AlbumInfo from \"../AlbumPage/AlbumInfo\";\r\nimport { baseURL } from \"../../API\";\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: \"#cccccc\",\r\n            dark: \"#cccccc\",\r\n            light: \"#cccccc\",\r\n        },\r\n    },\r\n});\r\n\r\nfunction Album(props: { album: AlbumT; click: () => void; fetchAlbums: () => Promise<void>; dimension: number }) {\r\n    const useStyles = makeStyles(() =>\r\n        createStyles({\r\n            root: {\r\n                overflow: \"hidden\",\r\n                padding: 5,\r\n                paddingTop: 10,\r\n            },\r\n            icon: {\r\n                color: \"rgba(255, 255, 255, 0.54)\",\r\n            },\r\n            photoDiv: {\r\n                margin: 5,\r\n                // height: props.y,\r\n                // width: props.x,\r\n                // \"align-items\": \"center\",\r\n                // \"justify-content\": \"center\",\r\n                display: \"flex\",\r\n                flexFlow: \"row wrap\",\r\n                // background: \"#aaaaaa33\",\r\n                // position: \"relative\",\r\n            },\r\n            // photoBox: { transition: \"0.07s all  linear\", position: \"absolute\", left: 15, top: 15, height: 20, width: 20, opacity: opacity },\r\n        })\r\n    );\r\n\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [openInfo, setOpenInfo] = useState(false);\r\n\r\n    const onImageClick = () => {\r\n        history.push(`/albums/open/${props.album.id}`);\r\n    };\r\n\r\n    const onInfoClick = () => { };\r\n\r\n    return (\r\n        <GridList className={classes.root}>\r\n            <GridListTile key={props.album.id} style={{ height: props.dimension, width: props.dimension, backgroundColor: \"white\" }} onClick={onImageClick}>\r\n                {props.album.cover === null ? (\r\n                    <PhotoAlbum style={{ height: props.dimension, width: props.dimension, color: \"#666666\" }} />\r\n                ) : (\r\n                        <div\r\n                            style={{\r\n                                backgroundImage: `url(${baseURL + \"/media/thumb_\" + props.album.cover})`,\r\n                                backgroundSize: \"cover\",\r\n                                backgroundPosition: \"center\",\r\n                                height: props.dimension,\r\n                                width: props.dimension,\r\n                            }}\r\n                        />\r\n                    )}\r\n                <GridListTileBar\r\n                    title={props.album.name}\r\n                    subtitle={<span>{props.album.imagecount} elements</span>}\r\n                    actionIcon={\r\n                        <div\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                onInfoClick();\r\n                            }}\r\n                        >\r\n                            <ThemeProvider theme={theme}>\r\n                                <IconButton aria-label={`info about ${props.album.name}`} color=\"primary\" onClick={() => setOpenInfo(true)} className={classes.icon}>\r\n                                    <Info />\r\n                                </IconButton>\r\n                            </ThemeProvider>\r\n                        </div>\r\n                    }\r\n                />\r\n            </GridListTile>\r\n            <AlbumInfo album={props.album} open={openInfo} setOpen={setOpenInfo} fetchAlbums={props.fetchAlbums}></AlbumInfo>\r\n        </GridList>\r\n    );\r\n}\r\n\r\nconst makeAlbum = (album: AlbumT, dimension: number, props: any) => <Album key={album.id} album={album} dimension={dimension} click={props.openAlbum(album)} fetchAlbums={props.fetchAlbums} />;\r\n//need to pass h/w too tho\r\n\r\nconst targetHeight = 200;\r\n\r\nconst calculate = (photos: AlbumT[], width: number) => {\r\n    const rowH: number[] = [];\r\n    const rowPics: AlbumT[][] = [];\r\n\r\n    let ptr = 0;\r\n    let setH = -1;\r\n    while (ptr !== photos.length) {\r\n        let curPics: AlbumT[] = [];\r\n        let curWidth = 0;\r\n\r\n        while (ptr !== photos.length && (curWidth === 0 || Math.abs(targetHeight - (targetHeight * width) / curWidth) > Math.abs(targetHeight - (targetHeight * width) / (curWidth + targetHeight)))) {\r\n            curPics.push(photos[ptr]);\r\n            curWidth += targetHeight;\r\n            ptr++;\r\n        }\r\n\r\n        if (setH === -1) setH = (targetHeight * width) / curWidth;\r\n\r\n        if (rowPics.length === 0 && curWidth <= width && ptr === photos.length) rowH.push(targetHeight);\r\n        else rowH.push(setH);\r\n        rowPics.push(curPics);\r\n    }\r\n\r\n    return { rowH, rowPics };\r\n};\r\n\r\nconst Row = (altprops: any) =>\r\n    altprops.data.linNum <= altprops.index ? (\r\n        <div style={{ ...altprops.style, display: \"flex\", transition: \"0.05s linear\" }}>\r\n            {altprops.data.rowPics[altprops.index].map((a: AlbumT) => makeAlbum(a, altprops.data.rowH[altprops.index], altprops.data.props))}\r\n        </div>\r\n    ) : (\r\n            <div>{altprops.data.rowPics[altprops.index]}</div>\r\n        );\r\n\r\nconst CustomScrollbars = ({ onScroll, forwardedRef, style, children }: any) => {\r\n    const refSetter = useCallback(\r\n        (scrollbarsRef) => {\r\n            if (scrollbarsRef) {\r\n                forwardedRef(scrollbarsRef.view);\r\n            } else {\r\n                forwardedRef(null);\r\n            }\r\n        },\r\n        [forwardedRef]\r\n    );\r\n\r\n    return (\r\n        <Scrollbars ref={refSetter} style={{ ...style, overflow: \"hidden\" }} onScroll={onScroll}>\r\n            {children}\r\n        </Scrollbars>\r\n    );\r\n};\r\n\r\nconst CustomScrollbarsVirtualList = React.forwardRef((props, ref) => <CustomScrollbars {...props} forwardedRef={ref} />);\r\n\r\nexport default function AbstractAlbumPage(props: {\r\n    albums: AlbumT[];\r\n    height: number;\r\n    width: number;\r\n    openAlbum: (arg0: AlbumT) => () => void;\r\n    fetchAlbums: () => void;\r\n    heights: number[];\r\n    lines: any[];\r\n}) {\r\n    const listRef = useRef<List>(null);\r\n    useEffect(() => listRef.current?.resetAfterIndex(0), [props.width, props.albums, props.heights]);\r\n    let { rowH, rowPics } = calculate(props.albums, props.width - 20);\r\n    rowH = [...props.heights, ...rowH];\r\n    rowPics = [...props.lines, ...rowPics];\r\n    const getItemSize = (index: number) => rowH[index];\r\n\r\n    return (\r\n        <List\r\n            overscanCount={10}\r\n            height={props.height}\r\n            ref={listRef}\r\n            itemData={{ rowH, rowPics, props, linNum: props.lines.length }}\r\n            itemCount={rowH.length}\r\n            itemSize={getItemSize}\r\n            width={props.width - 1}\r\n            outerElementType={CustomScrollbarsVirtualList}\r\n        >\r\n            {Row}\r\n        </List>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { CssBaseline, AppBar, Toolbar, IconButton, createStyles, Theme, Typography } from \"@material-ui/core\";\r\nimport TopBar from \"./TopBar\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport CreateAlbum from \"./CreateAlbum\";\r\nimport AlbumPhotoPage from \"./AlbumPhotoPage/AlbumPhotoPage\";\r\nimport AbstractAlbumPage from \"../Shared/AbstractAlbumPage\";\r\nimport AutoSizer from \"react-virtualized-auto-sizer\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport { createAlbum, getAlbums } from \"../../API\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        appBar: {\r\n            background: \"white\",\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n            },\r\n        },\r\n        menuButton: {\r\n            color: theme.palette.primary.main,\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: {\r\n            ...theme.mixins.toolbar,\r\n            height: 64,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            paddingLeft: 12,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100vh\",\r\n        },\r\n    })\r\n);\r\n\r\nexport default function AlbumPage(props: { handleDrawerToggle: () => void; drawerElement: any }) {\r\n    const classes = useStyles();\r\n\r\n    const [albums, setAlbums] = useState<AlbumT[]>([]);\r\n    const [openCreateAlbum, setOpenCreateAlbum] = useState(false);\r\n    const [showLoadingBar, setShowLoadingBar] = useState(true);\r\n\r\n    const [showSearchBar, setShowSearchBar] = useState(false);\r\n    const [searchBarText, setSearchBarText] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [autocompleteOptions, setAutocompleteOption] = useState<string[]>([]);\r\n\r\n    const fetchAlbums = async () => {\r\n        setShowLoadingBar(true);\r\n        const resp = await getAlbums(searchTerm);\r\n        if (resp.status === 200) {\r\n            setAlbums(resp.data);\r\n            setShowLoadingBar(false);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchAlbums();\r\n    }, [searchTerm]);\r\n\r\n    const topBarButtonFunctions = {\r\n        add: async () => {\r\n            setOpenCreateAlbum(true);\r\n        },\r\n        search: (s: string) => async () => {\r\n            setSearchTerm(s);\r\n        },\r\n        mobileSearch: () => {\r\n            setShowSearchBar(!showSearchBar);\r\n        },\r\n    };\r\n\r\n    const createAlbumCallback = async (name: string) => {\r\n        await createAlbum(name);\r\n        await fetchAlbums();\r\n    };\r\n\r\n    const openAlbum = () => () => { };\r\n\r\n    const heights = [searchTerm === \"\" || !searchTerm ? 0 : 20];\r\n\r\n    const lines = [\r\n        <Typography variant=\"h5\" style={{ display: searchTerm === \"\" || !searchTerm ? \"none\" : \"block\" }}>\r\n            Search results for {searchTerm}:\r\n        </Typography>,\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route path=\"/albums/open\">\r\n                    <AlbumPhotoPage refresh={fetchAlbums} drawerElement={props.drawerElement} handleDrawerToggle={props.handleDrawerToggle} />\r\n                </Route>\r\n                <Route path=\"/albums/\">\r\n                    <div className={classes.root}>\r\n                        <CssBaseline />\r\n\r\n                        <AppBar position=\"fixed\" className={classes.appBar}>\r\n                            <Toolbar>\r\n                                <IconButton color=\"inherit\" aria-label=\"open drawer\" edge=\"start\" onClick={props.handleDrawerToggle} className={classes.menuButton}>\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                                <TopBar searchBarText={searchBarText} setSearchBarText={setSearchBarText} autocompleteOptions={autocompleteOptions} buttonFunctions={topBarButtonFunctions} show={showLoadingBar} />\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n                        {props.drawerElement}\r\n\r\n                        <main className={classes.content}>\r\n                            <div className={classes.toolbar} />\r\n                            {showSearchBar && (\r\n                                <AutocompleteSearchBar\r\n                                    options={autocompleteOptions}\r\n                                    search={topBarButtonFunctions.search}\r\n                                    className={classes.onlyMobile}\r\n                                    value={searchBarText}\r\n                                    onChange={(s: string) => setSearchBarText(s)}\r\n                                    onRequestSearch={topBarButtonFunctions.search(searchBarText)}\r\n                                    style={{ marginLeft: -6, borderRadius: 0, alignSelf: \"flex-top\" }}\r\n                                />\r\n                            )}\r\n                            <div style={{ flexGrow: 1 }}>\r\n                                <AutoSizer>\r\n                                    {({ height, width }) => (\r\n                                        <AbstractAlbumPage height={height - 1} width={width} albums={albums} openAlbum={openAlbum} fetchAlbums={fetchAlbums} lines={lines} heights={heights} />\r\n                                    )}\r\n                                </AutoSizer>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            <CreateAlbum albums={albums} open={openCreateAlbum} setOpen={setOpenCreateAlbum} cb={createAlbumCallback} />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Divider, Drawer, Hidden, List, ListItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme, Theme, createStyles } from \"@material-ui/core/styles\";\r\nimport PhotoPage from \"./PhotoPage/PhotoPage\";\r\nimport { Photo, PhotoAlbum } from \"@material-ui/icons\";\r\nimport { Switch, Route, useHistory, useLocation } from \"react-router-dom\";\r\nimport AlbumPage from \"./AlbumPage/AlbumPage\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        appBar: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n                background: \"white\",\r\n            },\r\n        },\r\n        menuButton: {\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: theme.mixins.toolbar,\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            padding: theme.spacing(3),\r\n        },\r\n    })\r\n);\r\n\r\nexport default function ResponsiveDrawer({ window }: any) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n    const handleDrawerToggle = () => {\r\n        setMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n\r\n    const drawer = (\r\n        <div>\r\n            <div className={classes.toolbar}>\r\n                <div className={classes.topleft}>ImageStore</div>\r\n            </div>\r\n            <Divider />\r\n            <List>\r\n                <ListItem\r\n                    button\r\n                    selected={location.pathname === \"/\"}\r\n                    onClick={() => {\r\n                        history.push(\"/\");\r\n                        setMobileOpen(false);\r\n                    }}\r\n                >\r\n                    <ListItemIcon>\r\n                        <Photo />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"Photos\" />\r\n                </ListItem>\r\n                <ListItem\r\n                    button\r\n                    selected={location.pathname.startsWith(\"/albums\")}\r\n                    onClick={() => {\r\n                        history.push(\"/albums\");\r\n                        setMobileOpen(false);\r\n                    }}\r\n                >\r\n                    <ListItemIcon>\r\n                        <PhotoAlbum />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"Albums\" />\r\n                </ListItem>\r\n            </List>\r\n        </div>\r\n    );\r\n\r\n    const container = window !== undefined ? () => window().document.body : undefined;\r\n\r\n    const drawerElement = (\r\n        <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n            {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n            <Hidden smUp implementation=\"css\">\r\n                <Drawer\r\n                    container={container}\r\n                    variant=\"temporary\"\r\n                    anchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\r\n                    open={mobileOpen}\r\n                    onClose={handleDrawerToggle}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    ModalProps={{\r\n                        keepMounted: true, // Better open performance on mobile.\r\n                    }}\r\n                >\r\n                    {drawer}\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden xsDown implementation=\"css\">\r\n                <Drawer\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    {drawer}\r\n                </Drawer>\r\n            </Hidden>\r\n        </nav>\r\n    );\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/albums\">\r\n                <AlbumPage drawerElement={drawerElement} handleDrawerToggle={handleDrawerToggle} />\r\n            </Route>\r\n            <Route path=\"/\">\r\n                <PhotoPage drawerElement={drawerElement} handleDrawerToggle={handleDrawerToggle} />\r\n            </Route>\r\n        </Switch>\r\n    );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport ResponsiveDrawer from \"./Components/Page\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\r\nimport { SnackbarProvider } from \"notistack\";\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: \"#444444\",\r\n            dark: \"#000000\",\r\n            light: \"#000000\",\r\n        },\r\n        secondary: {\r\n            main: \"#ff0000\",\r\n        },\r\n        background: {\r\n            // default: \"#00ff00\", background behind the photos while in miniview; change for dark mode\r\n            // paper: \"#0000ff\" searchbar + drawer on the left\r\n        },\r\n    },\r\n});\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Router>\r\n            <ThemeProvider theme={theme}>\r\n                <SnackbarProvider\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'right',\r\n                    }}\r\n                >\r\n                    <ResponsiveDrawer />\r\n                </SnackbarProvider>\r\n            </ThemeProvider>\r\n        </Router>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}