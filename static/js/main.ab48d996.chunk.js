(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{180:function(e,t,n){},213:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(19),s=n.n(i),o=(n(180),n(10)),l=n(21),u=n(314),b=n(315),d=n(298),j=n(316),h=n(299),p=n(337),f=n(313),x=n(283),O=n(285),m=n(25),v=n(5),g=n.n(v),w=n(8),k=n(16),y=n(76),S=n.n(y),C=n(87),N=n(161),I=n(310),B=n(322),T=n(323),F=n(136),R=n(289),M=n(290),P=n(291),D=n(292),E=n(293),L=n(294),A=n(295),q=n(296),H=Object(x.a)((function(e){return Object(O.a)({TopBar:{background:"#ffffff",display:"flex",flexGrow:1},left:{transition:"all 1s linear",padding:"7px",display:"block",float:"left","margin-left":"-15px","margin-right":"-5px","padding-left":"0px"},middle:Object(l.a)({flexGrow:1,display:"block",float:"left",padding:"7px"},e.breakpoints.down("sm"),{padding:"0px"}),right:{transition:"all 1s linear",padding:"7px",display:"block",justifySelf:"flex-end","margin-right":"-15px","padding-right":"0px"},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),notMobile:Object(l.a)({},e.breakpoints.down("sm"),{display:"none"})})})),_=n(287),z=n(336),G=n(153),U=n.n(G),K=Object(_.a)({limit:6});function W(e){var t=e.value,n=e.onChange;return Object(a.jsx)(z.a,{filterOptions:K,className:e.className,style:e.style,freeSolo:!0,options:e.options,onChange:function(){var t=Object(w.a)(g.a.mark((function t(a,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(r),e.search(r)();case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),renderInput:function(r){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(U.a,Object(k.a)(Object(k.a)({},Object(k.a)(Object(k.a)({},r.inputProps),{},{ref:null})),{},{onCancelSearch:Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(""),e.search("")();case 2:case"end":return t.stop()}}),t)}))),style:e.style,className:e.onlyMobile,value:t,onChange:function(t){""===t&&e.search("")(),r.inputProps.onChange({target:{value:t}}),n(t)},onRequestSearch:e.onRequestSearch})),Object(a.jsx)("div",{ref:r.InputProps.ref,children:Object(a.jsx)("div",Object(k.a)({},r.inputProps))})]})}})}function V(e){var t=H();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(a.jsxs)("div",{className:t.TopBar,children:[Object(a.jsx)("div",{className:t.middle,children:Object(a.jsx)(W,{options:e.autocompleteOptions,search:e.buttonFunctions.search,className:t.notMobile,value:e.searchBarText,onChange:function(t){return e.setSearchBarText(t)},onRequestSearch:e.buttonFunctions.search(e.searchBarText)})}),Object(a.jsxs)("div",{className:t.right,children:[Object(a.jsxs)("div",{style:{float:"left"},children:[Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"search",onClick:e.buttonFunctions.mobileSearch,children:Object(a.jsx)(R.a,{})}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"select",onClick:e.buttonFunctions.select,children:Object(a.jsx)(M.a,{})})]}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"upload",onClick:e.buttonFunctions.upload,children:Object(a.jsx)(P.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cancel",onClick:e.buttonFunctions.unselect,children:Object(a.jsx)(D.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cloud_download",onClick:e.buttonFunctions.download,children:Object(a.jsx)(E.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:e.buttonFunctions.addToAlbum,children:Object(a.jsx)(L.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:e.buttonFunctions.delete,children:Object(a.jsx)(A.a,{})})]})]}),Object(a.jsx)(q.a,{style:{marginTop:-2,display:e.show?"block":"none",flexGrow:1,marginLeft:-24,marginRight:-24}})]})}var Z=n(27),J=(n(213),n(297));function X(){var e=Object(Z.f)();return Object(a.jsx)("div",{className:"TopLeftBar",style:{alignSelf:"flex-start",justifySelf:"left",padding:10,marginRight:-25},children:Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"back",onClick:function(t){t.stopPropagation(),e.goBack()},children:Object(a.jsx)(J.a,{})})})}var Q=n(157),Y=n(300),$=n(286),ee=n(307),te=n(338),ne=n(333),ae=n(311),re=n(312),ce=n(306),ie=n(317),se=n(318),oe=n(319),le=n(4),ue=n(28),be=n.n(ue),de=n(155),je=n.n(de),he=n(79),pe=n.n(he),fe=n(43),xe=n(44),Oe=n(305),me=n(46),ve=n(301),ge=n(304),we=n(303),ke=n(302),ye=n(335),Se=Object(x.a)({root:{"&:hover":{backgroundColor:"transparent"}}});function Ce(e){var t=Se(),n=Object(r.useState)(!1),c=Object(o.a)(n,2),i=c[0],s=c[1];return Object(a.jsxs)(d.a,{button:!0,onClick:function(){i?e.remove(e.album.id):e.add(e.album.id),s(!i)},children:[Object(a.jsx)(ye.a,{className:t.root,color:"primary",checked:i,disableRipple:!0}),Object(a.jsx)(h.a,{primary:e.album.name})]})}function Ne(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1],s=Object(m.a)(),l=Object(Y.a)(s.breakpoints.down("sm")),u=function(e){i([].concat(Object(me.a)(c),[e]))},b=function(e){i(c.filter((function(t){return t!==e})))},d=function(t){return Object(w.a)(g.a.mark((function n(){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t&&c.length>0)){n.next=3;break}return n.next=3,e.cb(c);case 3:return i([]),n.next=6,e.setOpen(!1);case 6:null===(a=e.closeCallback)||void 0===a||a.call(e);case 7:case"end":return n.stop()}}),n)})))};return Object(a.jsx)("div",{children:Object(a.jsxs)(ve.a,{fullScreen:l,open:e.open,onClose:d(!1),style:{zIndex:1e6},"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsx)(ke.a,{id:"responsive-dialog-title",children:"Add to Album"}),Object(a.jsx)(we.a,{children:e.albums.map((function(e){return Object(a.jsx)(Ce,{album:e,add:u,remove:b},e.id)}))}),Object(a.jsx)(ge.a,{children:Object(a.jsx)(Oe.a,{onClick:d(!0),color:"primary",autoFocus:!0,children:"Add"})})]})})}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=function(n){return Object(a.jsxs)(a.Fragment,{children:[t&&t instanceof Function?t(n):t,e&&Object(a.jsx)(F.a,{size:"small",color:"inherit",onClick:function(){e(n)},children:Object(a.jsx)(ce.a,{fontSize:"small"})})]})};return n}function Be(e){var t=c.a.useState(!1),n=Object(o.a)(t,2),r=n[0],i=n[1],s=function(){var t=Object(w.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe(e.photos,n,e.enqueueSnackbar,e.closeSnackbar);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(Oe.a,{color:"inherit",onClick:function(){return i(!0)},children:"Add to album"}),Object(a.jsx)(Ne,{open:r,setOpen:i,albums:e.albums,cb:s,closeCallback:e.closeAddSnackbar})]})}var Te=function(){function e(t,n,a){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.albums=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n,this.albums=a}return Object(xe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being uploaded"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){var n=this;this.snackMsg&&this.closeSnackbar(this.snackMsg);var r="".concat(e.length," element").concat(1===e.length?" was":"s were"," uploaded"),c=Ie(this.closeSnackbar,this.albums?function(t){return Object(a.jsx)(Be,{photos:e,closeSnackbar:n.closeSnackbar,closeAddSnackbar:function(){t&&n.closeSnackbar(t)},enqueueSnackbar:n.enqueueSnackbar,albums:n.albums})}:null),i=0,s=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},i++)}))]}),o=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(r,{variant:"success",autoHideDuration:3e3,action:c}),0!==t.length&&this.enqueueSnackbar(s,{variant:"error",autoHideDuration:null,action:o})}}],[{key:"createInstance",value:function(e,t,n){return e&&t?new this(e,t,n):null}}]),e}(),Fe=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(xe.a)(e,[{key:"begin",value:function(e,t){var n="".concat(e," element").concat(1===e?" is":"s are"," being added to ").concat(t," album").concat(1===t?"":"s"),r=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(n,{variant:"info",autoHideDuration:null,action:r})}},{key:"end",value:function(e,t,n){this.snackMsg&&this.closeSnackbar(this.snackMsg);var r="".concat(e.length," element").concat(1===e.length?" was":"s were"," added to ").concat(t.length," album").concat(1===t.length?"":"s"),c=Ie(this.closeSnackbar),i=0,s=Object(a.jsxs)("div",{children:["The following errors occured:",n.map((function(e){return Object(a.jsx)("div",{children:e.toString()},i++)}))]}),o=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(r,{variant:"success",autoHideDuration:3e3,action:c}),0!==n.length&&this.enqueueSnackbar(s,{variant:"error",autoHideDuration:null,action:o})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),Re=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(xe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being deleted"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){this.snackMsg&&this.closeSnackbar(this.snackMsg);var n="".concat(e.length," element").concat(1===e.length?" was":"s were"," deleted"),r=Ie(this.closeSnackbar),c=0,i=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},c++)}))]}),s=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"success",autoHideDuration:3e3,action:r}),0!==t.length&&this.enqueueSnackbar(i,{variant:"error",autoHideDuration:null,action:s})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),Me=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(xe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being downloaded"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){this.snackMsg&&this.closeSnackbar(this.snackMsg);var n="".concat(e.length," element").concat(1===e.length?" was":"s were"," downloaded"),r=Ie(this.closeSnackbar),c=0,i=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},c++)}))]}),s=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"success",autoHideDuration:3e3,action:r}),0!==t.length&&this.enqueueSnackbar(i,{variant:"error",autoHideDuration:null,action:s})}}],[{key:"createInstance",value:function(e,t,n){return e&&t?new this(e,t):null}}]),e}(),Pe=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(xe.a)(e,[{key:"begin",value:function(e){var t="".concat(e," element").concat(1===e?" is":"s are"," being removed from this album"),n=Ie(null,Object(a.jsx)(ee.a,{color:"inherit",style:{padding:5}}));this.snackMsg=this.enqueueSnackbar(t,{variant:"info",autoHideDuration:null,action:n})}},{key:"end",value:function(e,t){this.snackMsg&&this.closeSnackbar(this.snackMsg);var n="".concat(e.length," element").concat(1===e.length?" was":"s were"," removed from this album"),r=Ie(this.closeSnackbar),c=0,i=Object(a.jsxs)("div",{children:["The following errors occured:",t.map((function(e){return Object(a.jsx)("div",{children:e.toString()},c++)}))]}),s=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"success",autoHideDuration:3e3,action:r}),0!==t.length&&this.enqueueSnackbar(i,{variant:"error",autoHideDuration:null,action:s})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}();console.log(window.location.hostname);var De="http://"+window.location.hostname+":4000";function Ee(e,t,n,a){return Le.apply(this,arguments)}function Le(){return(Le=Object(w.a)(g.a.mark((function e(t,n,a,r){var c,i,s,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Te.createInstance(n,a,r),e.prev=1,null===c||void 0===c||c.begin(t.getAll("file").length),e.next=5,be.a.post("/media/add",t);case 5:return i=e.sent,s=i.data.success,o=i.data.errors,null===c||void 0===c||c.end(s,o),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(1),null===c||void 0===c||c.end([],[e.t0]),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Ae(e,t,n){return qe.apply(this,arguments)}function qe(){return(qe=Object(w.a)(g.a.mark((function e(t,n,a){var r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Re.createInstance(n,a),e.prev=1,null===r||void 0===r||r.begin(t.length),e.next=5,Promise.all(t.map(function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post("/media/delete/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:c=e.sent,null===r||void 0===r||r.end(c,[]),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),null===r||void 0===r||r.end([],[e.t0]),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function He(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(w.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post("/albums/setCover/".concat(t,"/").concat(n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post("/albums/clearCover/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post("/albums/new/"+t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post("/albums/delete/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(w.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={newAlbumName:n,albumId:t},e.next=3,be.a.post("/albums/rename",pe.a.stringify(a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t,n,a){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(w.a)(g.a.mark((function e(t,n,a,r){var c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={photos:t,albums:n},i=Fe.createInstance(a,r),e.prev=2,null===i||void 0===i||i.begin(t.length,n.length),e.next=6,be.a.post("/albums/addPhotos",pe.a.stringify(c));case 6:e.sent,null===i||void 0===i||i.end(t,n,[]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),null===i||void 0===i||i.end([],[],[e.t0]);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Ye(e,t,n,a){return $e.apply(this,arguments)}function $e(){return($e=Object(w.a)(g.a.mark((function e(t,n,a,r){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Pe.createInstance(a,r),e.prev=1,null===c||void 0===c||c.begin(t.length),e.next=5,Promise.all(t.map(function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.post("/albums/remove/".concat(n,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:e.sent,null===c||void 0===c||c.end(t,[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),null===c||void 0===c||c.end([],[e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=Object(w.a)(g.a.mark((function e(t,n,a){var r,c,i,s,o,l,u,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(r=Me.createInstance(n,a),e.prev=3,null===r||void 0===r||r.begin(t.length),1!==t.length){e.next=14;break}return s=t[0],e.next=9,be()({url:"/media/".concat(s.id),method:"GET",responseType:"blob"});case 9:o=e.sent,c=o.data,i=s.name,e.next=21;break;case 14:return l=new je.a,e.next=17,Promise.all(t.map(function(){var e=Object(w.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be()({url:"/media/".concat(t.id),method:"GET",responseType:"blob"});case 2:n=e.sent,l.file(t.name,n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:return e.next=19,l.generateAsync({type:"blob"});case 19:c=e.sent,i="photos.zip";case 21:u=window.URL.createObjectURL(new Blob([c])),(b=document.createElement("a")).href=u,b.download=i,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(u),null===r||void 0===r||r.end([],[]),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(3),null===r||void 0===r||r.end([],[e.t0]);case 35:case"end":return e.stop()}}),e,null,[[3,32]])})))).apply(this,arguments)}function nt(e,t){return at.apply(this,arguments)}function at(){return(at=Object(w.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t,label:n},e.next=3,be.a.post("/labels/remove",pe.a.stringify(a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t){return ct.apply(this,arguments)}function ct(){return(ct=Object(w.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={ids:t,labels:n},e.next=3,be.a.post("/labels/add",pe.a.stringify(a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e){return st.apply(this,arguments)}function st(){return(st=Object(w.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:t},e.next=3,be.a.post("/labels/get/",pe.a.stringify(n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.get(""!==t&&t?"albums/search/"+t:"albums/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.get(""!==t&&t?"media/search/"+t:"media/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(w.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.get(""!==n&&n?"albums/".concat(t,"/search/").concat(n):"albums/".concat(t,"/all"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(De),be.a.defaults.baseURL=De,be.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var ht=n(320),pt=n(334),ft=n(332),xt=n(308),Ot=n(309);n(239);ft.a.use([xt.a,Ot.a]);var mt=Object(Q.a)({palette:{primary:{main:"#ffffff",dark:"#ffffff",light:"#ffffff"},secondary:{main:"#ff0000"}}}),vt=340,gt=Object(x.a)((function(e){return Object(O.a)({root:{display:"flex"},drawer:{width:vt,flexShrink:0},drawerPaper:{width:vt},drawerHeader:Object(k.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1),justifyContent:"space-between"},e.mixins.toolbar),content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-0},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:vt},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),notMobile:Object(l.a)({},e.breakpoints.down("sm"),{display:"none"}),chip:{margin:e.spacing(.5)}})}));function wt(e){var t=Object(Z.f)(),n=Object(r.useState)(window.location.pathname.split("/").slice(-1)[0]),c=Object(o.a)(n,2),i=c[0],s=c[1],p=Object(r.useState)(0),x=Object(o.a)(p,2),O=x[0],v=x[1],y=Object(r.useState)(0),S=Object(o.a)(y,2),N=S[0],B=S[1],T=Object(r.useState)(!1),R=Object(o.a)(T,2),M=R[0],P=R[1],D=Object(r.useState)("Loading"),E=Object(o.a)(D,2),L=E[0],A=E[1],q=e.photos.findIndex((function(e){return e.id===i})),H=e.photos[q];Object(r.useEffect)((function(){e.setViewId(i)}),[i,e.setViewed]),Object(r.useEffect)((function(){_()}),[i]);var _=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it([i]);case 2:if(200!==(t=e.sent).status){e.next=7;break}A(t.data),e.next=12;break;case 7:return e.t0=window,e.next=10,t.data;case 10:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=gt(Object(m.a)()),G=function(n){var a=e.photos,r=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1);t.replace("".concat(r).concat(a[n].id)),s(a[n].id)},U=function(){v(100),B(0)},K=function(){B(100),v(0)},W=Object(k.a)(Object(k.a)({},e.buttonFunctions),{},{delete:function(){var n=Object(w.a)(g.a.mark((function n(a){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 1===e.photos.length?t.goBack():G(0===q?1:q-1),n.next=3,e.buttonFunctions.delete(a);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object(w.a)(g.a.mark((function n(a){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 1===e.photos.length?t.goBack():G(0===q?1:q-1),n.next=3,e.buttonFunctions.remove(a);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),info:function(){P(!M)}}),V=Object(r.useRef)(null),J=Object(r.useRef)(null),Q=Object(r.useRef)(null),te=Object(Y.a)(mt.breakpoints.down("sm"));return Object(a.jsxs)("div",{className:z.root,children:[Object(a.jsx)(I.a,{}),Object(a.jsx)("main",{className:Object(le.a)(z.content,Object(l.a)({},z.contentShift,M)),children:Object(a.jsxs)($.a,{theme:mt,children:[Object(a.jsxs)("div",{className:"root",style:{display:"".concat(te?"none":"grid"),width:"calc(100% - ".concat(M?vt:0,"px)"),transition:mt.transitions.create("width",{easing:mt.transitions.easing.sharp,duration:mt.transitions.duration.leavingScreen})},children:[Object(a.jsx)("div",{ref:J,className:"leftIm",onMouseEnter:K,onMouseMove:K,children:Object(a.jsx)(F.a,{style:{transition:"0.01s linear",opacity:0===q?0:N,backgroundColor:"#222222",alignSelf:"center",justifySelf:"left",position:"absolute",marginLeft:"20px",height:"64px",width:"64px"},className:"IconButton",color:"primary","aria-label":"left",children:Object(a.jsx)(ae.a,{style:{height:"64px",width:"64px"}})})}),Object(a.jsx)("div",{className:"center",onClick:function(){return t.goBack()},onMouseEnter:function(){B(0),v(0)}}),Object(a.jsx)("div",{ref:Q,className:"rightIm",onMouseEnter:U,onMouseMove:U,children:Object(a.jsx)(F.a,{style:{transition:"0.01s linear",opacity:q===e.photos.length-1?0:O,backgroundColor:"#222222",alignSelf:"center",justifySelf:"right",position:"absolute",marginRight:"20px",height:"64px",width:"64px"},className:"IconButton",color:"primary","aria-label":"left",children:Object(a.jsx)(re.a,{style:{height:"64px",width:"64px"}})})})]}),Object(a.jsx)(St,{slideChange:G,index:q,photos:e.photos,open:M,swiperRef:V,prevRef:J,nextRef:Q}),Object(a.jsxs)("div",{className:"rootTop",style:{display:"flex",justifyContent:"space-between",width:"calc(100% - ".concat(M?vt:0,"px)"),transition:mt.transitions.create("width",{easing:mt.transitions.easing.sharp,duration:mt.transitions.duration.leavingScreen})},children:[Object(a.jsx)(X,{}),e.topRightBar(i,W)]})]})}),Object(a.jsxs)(f.a,{className:z.drawer,variant:"persistent",anchor:"right",open:M,classes:{paper:z.drawerPaper},children:[Object(a.jsxs)("div",{className:z.drawerHeader,children:[Object(a.jsx)(C.a,{variant:"h5",children:" Info"}),Object(a.jsx)(F.a,{style:{justifySelf:"end"},onClick:function(){P(!1)},children:Object(a.jsx)(ce.a,{})})]}),Object(a.jsx)(u.a,{}),Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(d.a,{children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(h.a,{primary:H?H.name:"",secondary:"Useful info"})]}),Object(a.jsxs)(d.a,{children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(se.a,{})}),Object(a.jsx)(h.a,{primary:"Labels"})]}),Object(a.jsx)(d.a,{children:Object(a.jsx)("ul",{style:{display:"flex",justifyContent:"left",flexWrap:"wrap",listStyle:"none",padding:0,margin:0,marginLeft:5,marginTop:-15},children:"Loading"===L?Object(a.jsx)(ee.a,{size:20,style:{margin:10}}):Object(a.jsxs)(a.Fragment,{children:[L.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(kt,{id:i,label:e,removeLabel:nt,getLabels:_})},e)})),Object(a.jsx)(yt,{addLabel:rt,getLabels:_,id:i})]})})})]})]})]})}function kt(e){var t=gt(Object(m.a)()),n=Object(r.useState)(!1),c=Object(o.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(te.a,{label:e.label,onDelete:Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,e.removeLabel(e.id,e.label);case 3:e.getLabels();case 4:case"end":return t.stop()}}),t)}))),className:t.chip,deleteIcon:i?Object(a.jsx)(ee.a,{style:{height:20,width:20,padding:1.5,marginRight:7}}):void 0})}function yt(e){var t=gt(Object(m.a)()),n=Object(r.useState)(""),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),b=u[0],d=u[1],j=function(){var t=Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,e.addLabel([e.id],[i]);case 3:s(""),d(!1),e.getLabels();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(te.a,{style:{width:120},label:Object(a.jsx)(ne.a,{style:{height:25,marginBottom:5,marginLeft:5},value:i,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(j(),e.preventDefault())}}),onKeyPress:function(e){console.log("Pressed keyCode ".concat(e.key)),"Enter"===e.key&&e.preventDefault()},onDelete:j,className:t.chip,deleteIcon:b?Object(a.jsx)(ee.a,{style:{height:20,width:20,padding:1.5,marginRight:7}}):Object(a.jsx)(oe.a,{style:{transform:"rotate(0deg)"}})})}var St=function(e){var t,n=Object(r.useState)(1),c=Object(o.a)(n,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){s(i+1)}),[e.photos,e.open]),0===e.photos.length?null:Object(a.jsx)(pt.a,{className:"imageHolder",spaceBetween:50,slidesPerView:1,virtual:!0,style:{width:"calc(100vw - ".concat(e.open?vt:0,"px)"),zIndex:-1,position:"absolute"},navigation:{prevEl:e.prevRef.current?e.prevRef.current:void 0,nextEl:e.nextRef.current?e.nextRef.current:void 0},initialSlide:e.index>=e.photos.length?e.photos.length-1:e.index,onInit:function(t){t.params.navigation.prevEl=e.prevRef.current,t.params.navigation.nextEl=e.nextRef.current,t.navigation.update()},onSlideChange:function(t){e.slideChange(t.activeIndex)},children:(t=e.photos,t.map((function(e,t){return Object(a.jsx)(ht.a,{virtualIndex:t,style:{alignSelf:"center",justifySelf:"center"},children:Object(a.jsx)("img",{className:"display",alt:e.id,style:{objectFit:"scale-down",height:"100vh",width:"100%"},src:De+"/media/"+e.id})},e.id)})))},i)},Ct=n(105),Nt=n(103),It=Object(x.a)({photoDiv:{padding:10,"align-items":"center","justify-content":"center",display:"flex",position:"relative",transition:"0.05s linear"},photoBox:{transition:"0.05s linear",position:"absolute",left:15,top:15,height:20,width:20}});function Bt(e){var t=De+"/media/thumb_"+e.id,n=Object(r.useState)(""),c=Object(o.a)(n,2),i=c[0],s=c[1];Object(r.useEffect)((function(){var t=setTimeout((function(){return s(De+"/media/thumb_"+e.id)}),500);return function(){return clearTimeout(t)}}),[e.id]),Object(r.useEffect)((function(){e.isScrolling||s(t)}));var l=e.selected?.9:1,u=Object(r.useState)(0),b=Object(o.a)(u,2),d=b[0],j=b[1],h=e.anySelected()?255:d,p=It();return Object(a.jsxs)("div",{className:p.photoDiv,style:{height:e.y,width:e.x},onMouseEnter:function(){return j(.4)},onMouseLeave:function(){return j(0)},children:[Object(a.jsx)("div",{onClick:e.imageClick,children:Object(a.jsx)("div",{style:{backgroundColor:"#eeeeee",height:e.y-5,width:e.x-5},children:Object(a.jsx)("div",{style:{transition:"0.05s linear",transform:"scale(".concat(l,")"),backgroundImage:""===i?"none":"url(".concat(i,")"),height:e.y-5,width:e.x-5,backgroundSize:"100% 100%"}})})}),(d||e.anySelected(),Object(a.jsx)("input",{className:p.photoBox,style:{opacity:h},readOnly:!0,checked:e.selected,type:"checkbox",onClick:e.click}))]})}var Tt=300,Ft=function(e){return e.data.linNum<=e.index?Object(a.jsx)("div",{style:Object(k.a)(Object(k.a)({},e.style),{},{display:"flex",transition:"0.05s linear"}),children:e.data.rowPics[e.index].map((function(t){return n=t,r=e.data.rowH[e.index],c=e.data.props,i=e.isScrolling,Object(a.jsx)(Bt,{id:n.id,x:n.width*r/n.height,y:r,click:c.clickHandler(n.id),imageClick:c.imageClickHandler(n.id),selected:c.selected.includes(n.id),anySelected:c.anySelected,outZoom:.9,isScrolling:i},n.id);var n,r,c,i}))}):Object(a.jsx)("div",{children:e.data.rowPics[e.index]})},Rt=function(e){var t=e.onScroll,n=e.forwardedRef,c=e.style,i=e.children,s=Object(r.useCallback)((function(e){n(e?e.view:null)}),[n]);return Object(a.jsx)(Nt.Scrollbars,{ref:s,style:Object(k.a)(Object(k.a)({},c),{},{overflow:"hidden"}),onScroll:t,children:i})},Mt=c.a.forwardRef((function(e,t){return Object(a.jsx)(Rt,Object(k.a)(Object(k.a)({},e),{},{forwardedRef:t}))}));function Pt(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],s=Object(r.useRef)(null);Object(r.useEffect)((function(){var t,n;null===(t=s.current)||void 0===t||t.resetAfterIndex(0);var a=b.findIndex((function(t){return 0!==t.filter((function(t){return t.id===e.viewId})).length}));c||1===a||null===(n=s.current)||void 0===n||n.scrollToItem(a+e.lines.length,"smart"),i(!0)}),[e.width,e.photos,e.heights]);var l=function(e,t){for(var n=[],a=[],r=0;r!==e.length;){for(var c=[],i=0;r!==e.length&&(0===i||Math.abs(Tt-Tt*t/i)>Math.abs(Tt-Tt*t/(i+e[r].width/e[r].height*Tt)));)c.push(e[r]),i+=e[r].width/e[r].height*Tt,r++;a.push(c),r!==e.length||t<i?n.push(Tt*t/i):n.push(Tt)}return{rowH:n,rowPics:a}}(e.photos,e.width-12),u=l.rowH,b=l.rowPics,d=[].concat(Object(me.a)(e.heights),Object(me.a)(u)),j=[].concat(Object(me.a)(e.lines),Object(me.a)(b));return Object(a.jsx)(Ct.a,{useIsScrolling:!0,overscanCount:10,height:e.height,ref:s,itemData:{rowH:d,rowPics:j,props:e,linNum:e.lines.length},itemCount:d.length,itemSize:function(e){return e!==d.length-1?d[e]:d[e]+20},width:e.width-1,outerElementType:Mt,children:Ft})}var Dt=n(321);function Et(e){return Object(a.jsxs)("div",{className:"TopRightBar",style:{alignSelf:"flex-start",justifySelf:"right",padding:10},children:[Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"info",onClick:function(t){t.stopPropagation(),e.buttonFunctions.info()},children:Object(a.jsx)(Dt.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"download",onClick:function(t){t.stopPropagation(),e.buttonFunctions.download(e.id)},children:Object(a.jsx)(E.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:function(t){t.stopPropagation(),e.buttonFunctions.addToAlbum(e.id)},children:Object(a.jsx)(L.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:function(t){t.stopPropagation(),e.buttonFunctions.delete(e.id)},children:Object(a.jsx)(A.a,{})})]})}var Lt=n(75),At=n(77),qt=n(104),Ht=function(){function e(t,n){Object(fe.a)(this,e),this.enqueueSnackbar=void 0,this.closeSnackbar=void 0,this.snackMsg=void 0,this.enqueueSnackbar=t,this.closeSnackbar=n}return Object(xe.a)(e,[{key:"begin",value:function(e){var t=0,n=Object(a.jsxs)("div",{children:["The following errors occured:",e.map((function(e){return Object(a.jsx)("div",{children:"".concat(e.file.name,": ").concat(e.errors[0].message)},t++)}))]}),r=Ie(this.closeSnackbar);0!==e.length&&this.enqueueSnackbar(n,{variant:"error",autoHideDuration:null,action:r})}}],[{key:"createInstance",value:function(e,t){return e&&t?new this(e,t):null}}]),e}(),_t=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"/ImageStore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MAX_SIZE||52428800..toString()),zt=240,Gt=Object(x.a)((function(e){return Object(O.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:zt,flexShrink:0}),appBar:Object(l.a)({background:"white"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(zt,"px)"),marginLeft:zt}),menuButton:Object(l.a)({color:e.palette.primary.main,marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(k.a)(Object(k.a)({},e.mixins.toolbar),{},{height:64}),drawerPaper:{width:zt},topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,paddingLeft:12,display:"flex",flexDirection:"column",height:"100vh"},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"})})}));function Ut(e){var t=Gt(),n=Object(r.useState)([]),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)([]),u=Object(o.a)(l,2),b=u[0],d=u[1],j=Object(r.useState)([]),h=Object(o.a)(j,2),p=h[0],f=h[1],x=Object(r.useState)(!1),O=Object(o.a)(x,2),m=O[0],v=O[1],y=Object(r.useState)(!1),R=Object(o.a)(y,2),M=R[0],D=R[1],E=Object(r.useState)(!0),L=Object(o.a)(E,2),A=L[0],q=L[1],H=Object(r.useState)(""),_=Object(o.a)(H,2),z=_[0],G=_[1],U=Object(At.b)(),K=U.enqueueSnackbar,J=U.closeSnackbar,X=Object(qt.a)({noClick:!0,noKeyboard:!0,accept:"image/jpeg, image/png"}),Q=X.getRootProps,Y=X.open,$=X.getInputProps,ee=X.acceptedFiles,te=X.fileRejections,ne=X.isDragActive;Object(r.useEffect)((function(){Te(ee,te)}),[ee,te]);var ae=Object(r.useState)(!1),re=Object(o.a)(ae,2),ce=re[0],ie=re[1],se=Object(r.useState)(""),oe=Object(o.a)(se,2),le=oe[0],ue=oe[1],be=Object(r.useState)(""),de=Object(o.a)(be,2),je=de[0],he=de[1],pe=Object(r.useState)([]),fe=Object(o.a)(pe,2),xe=fe[0],Oe=fe[1];Object(r.useEffect)((function(){Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.length){e.next=4;break}Oe([]),e.next=9;break;case 4:return e.t0=Oe,e.next=7,it(i.map((function(e){return e.id})));case 7:e.t1=e.sent.data,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))()}),[i]);var me=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,ut(je);case 3:if(200!==(t=e.sent).status){e.next=9;break}s(t.data),q(!1),e.next=14;break;case 9:return e.t0=window,e.next=12,t.data;case 12:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot("");case 2:if(200!==(t=e.sent).status){e.next=7;break}d(t.data),e.next=12;break;case 7:return e.t0=window,e.next=10,t.data;case 10:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){me(),ve()}),[je]);var ge=Object(Z.f)(),we=function(e){return function(){ye()?ke(e)():ge.push("/view/".concat(e))}},ke=function(e){return function(){var t=p.slice();t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),f(t),0===t.length&&v(!1)}},ye=function(){return 0!==p.length||m},Se=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.unselect(),e.next=3,Xe(p,t,K,J);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce={delete:function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:return e.next=4,me();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addToAlbum:function(e){f([e]),D(!0)},download:function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(i.filter((function(e){return t===e.id})),K,J);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ie=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(i.filter((function(e){return e.id!==t}))),e.next=3,Ae([t],K,J);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be={delete:function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.unselect(),e.next=3,Ae(p,K,J);case 3:return s(i.filter((function(e){return!p.includes(e.id)}))),e.next=6,me();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unselect:function(){f([]),v(!1)},upload:function(){Y()},settings:function(){},select:function(){v(!m)},addToAlbum:function(){D(!0)},download:function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.unselect(),e.next=3,et(i.filter((function(e){return p.includes(e.id)})),K,J);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),search:function(e){return Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:he(e);case 1:case"end":return t.stop()}}),t)})))},mobileSearch:function(){ie(!ce)}},Te=function(){var e=Object(w.a)(g.a.mark((function e(t,n){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=new FormData,t.forEach((function(e){e.size>_t?n.push({file:e,errors:[{message:"File is bigger than ".concat(_t," bytes"),code:"file-too-large"}]}):a.append("file",e)})),null===(r=Ht.createInstance(K,J))||void 0===r||r.begin(n),0!==a.getAll("file").length){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Ee(a,K,J,b);case 10:return e.next=12,me();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=[Object(a.jsx)("div",{}),Object(a.jsxs)(C.a,{variant:"h5",style:{display:""!==je&&je?"block":"none",paddingTop:10,paddingLeft:5},children:["Search results for ",je,":"]})],Re=[12,""!==je&&je?28:0];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(Z.c,{children:[Object(a.jsx)(Z.a,{path:"/view",children:Object(a.jsx)(wt,{setViewId:G,photos:i,topRightBar:function(e,t){return Object(a.jsx)(Et,{id:e,buttonFunctions:t})},buttonFunctions:Ce})}),Object(a.jsx)(Z.a,{path:"/",children:Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},Q({className:"dropzone"})),{},{className:t.root,children:[Object(a.jsx)(N.a,{open:ne,transitionDuration:150,style:{zIndex:1201,backgroundColor:"#00006666"},children:Object(a.jsx)("div",{children:Object(a.jsx)(P.a,{style:{fontSize:200,color:"#1976d2aa"}})})}),Object(a.jsx)("input",Object(k.a)({},$())),Object(a.jsx)(I.a,{}),Object(a.jsx)(B.a,{position:"fixed",className:t.appBar,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(V,{searchBarText:le,setSearchBarText:ue,autocompleteOptions:xe,anySelected:ye,buttonFunctions:Be,numSelected:function(){return p.length},show:A})]})}),e.drawerElement,Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.toolbar}),ce&&Object(a.jsx)(W,{options:xe,search:Be.search,className:t.onlyMobile,value:le,onChange:function(e){return ue(e)},onRequestSearch:Be.search(le),style:{marginLeft:-6,borderRadius:0,alignSelf:"flex-top"}}),Object(a.jsx)("div",{style:{flexGrow:1},children:Object(a.jsx)(Lt.a,{children:function(e){var t=e.height,n=e.width;return Object(a.jsx)(Pt,{height:t-1,width:n,photos:i,clickHandler:ke,selected:p,anySelected:ye,imageClickHandler:we,lines:Fe,heights:Re,viewId:z,setViewId:G})}})})]})]}))})]}),Object(a.jsx)(Ne,{albums:b,open:M,setOpen:D,cb:Se})]})}var Kt=n(331),Wt=n(329),Vt=n(324);function Zt(e){var t=H();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(a.jsxs)("div",{className:t.TopBar,children:[Object(a.jsx)("div",{className:t.middle,children:Object(a.jsx)(W,{options:e.autocompleteOptions,search:e.buttonFunctions.search,className:t.notMobile,value:e.searchBarText,onChange:function(t){return e.setSearchBarText(t)},onRequestSearch:e.buttonFunctions.search(e.searchBarText)})}),Object(a.jsxs)("div",{className:t.right,children:[Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"search",onClick:e.buttonFunctions.mobileSearch,children:Object(a.jsx)(R.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"add",onClick:e.buttonFunctions.add,children:Object(a.jsx)(Vt.a,{})})]})]}),Object(a.jsx)(q.a,{style:{marginTop:-2,display:e.show?"block":"none",flexGrow:1,marginLeft:-24,marginRight:-24}})]})}function Jt(e){var t=Object(m.a)(),n=Object(Y.a)(t.breakpoints.down("sm")),r=function(t){return Object(w.a)(g.a.mark((function n(){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return n.next=3,e.cb(l);case 3:return u(""),n.next=6,e.setOpen(!1);case 6:case"end":return n.stop()}}),n)})))},i=c.a.useState(""),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(a.jsx)("div",{children:Object(a.jsxs)(ve.a,{fullWidth:!0,fullScreen:n,open:e.open,onClose:r(!1),"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsx)(ke.a,{id:"responsive-dialog-title",children:"Add to Album"}),Object(a.jsx)(we.a,{children:Object(a.jsx)(ne.a,{label:"Name your album",placeholder:"My new album",variant:"filled",value:l,onChange:function(e){u(e.target.value)},fullWidth:!0,autoFocus:!0,margin:"dense"})}),Object(a.jsx)(ge.a,{children:Object(a.jsx)(Oe.a,{onClick:r(!0),color:"primary",children:"Add"})})]})})}var Xt=n(325),Qt=n(326);function Yt(e){var t=H(),n=Object(Z.f)();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(a.jsxs)("div",{className:t.TopBar,children:[Object(a.jsx)("div",{className:t.left,children:0===e.numSelected()&&Object(a.jsx)(F.a,{style:{float:"left"},"aria-label":"back",onClick:function(){return n.goBack()},className:"IconButton",children:Object(a.jsx)(J.a,{})})}),Object(a.jsx)("div",{className:t.middle,children:Object(a.jsx)(W,{options:e.autocompleteOptions,search:e.buttonFunctions.search,className:t.notMobile,value:e.searchBarText,onChange:function(t){return e.setSearchBarText(t)},onRequestSearch:e.buttonFunctions.search(e.searchBarText)})}),Object(a.jsxs)("div",{className:t.right,children:[Object(a.jsxs)("div",{style:{float:"left"},children:[Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"search",onClick:e.buttonFunctions.mobileSearch,children:Object(a.jsx)(R.a,{})}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:t.onlyMobile,color:"primary","aria-label":"select",onClick:e.buttonFunctions.select,children:Object(a.jsx)(M.a,{})})]}),1===e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"set as cover",onClick:e.buttonFunctions.setCover,children:Object(a.jsx)(Xt.a,{})}),0===e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"upload",onClick:e.buttonFunctions.upload,children:Object(a.jsx)(P.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cancel",onClick:e.buttonFunctions.unselect,children:Object(a.jsx)(D.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"cloud_download",onClick:e.buttonFunctions.download,children:Object(a.jsx)(E.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:e.buttonFunctions.addToAlbum,children:Object(a.jsx)(L.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"remove",onClick:e.buttonFunctions.remove,children:Object(a.jsx)(Qt.a,{})}),0!==e.numSelected()&&Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:e.buttonFunctions.delete,children:Object(a.jsx)(A.a,{})})]})]}),Object(a.jsx)(q.a,{style:{marginTop:-2,display:e.show?"block":"none",flexGrow:1,marginLeft:-24,marginRight:-24}})]})}function $t(e){return Object(a.jsxs)("div",{className:"TopRightBar",style:{alignSelf:"flex-start",justifySelf:"right",padding:10},children:[Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"info",onClick:function(t){t.stopPropagation(),e.buttonFunctions.info()},children:Object(a.jsx)(Dt.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"set cover",onClick:function(t){t.stopPropagation(),e.buttonFunctions.setCover(e.id)},children:Object(a.jsx)(Xt.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"download",onClick:function(t){t.stopPropagation(),e.buttonFunctions.download(e.id)},children:Object(a.jsx)(E.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"library_add",onClick:function(t){t.stopPropagation(),e.buttonFunctions.addToAlbum(e.id)},children:Object(a.jsx)(L.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"remove",onClick:function(t){t.stopPropagation(),e.buttonFunctions.remove(e.id)},children:Object(a.jsx)(Qt.a,{})}),Object(a.jsx)(F.a,{className:"IconButton",color:"primary","aria-label":"delete",onClick:function(t){t.stopPropagation(),e.buttonFunctions.delete(e.id)},children:Object(a.jsx)(A.a,{})})]})}var en=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"/ImageStore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MAX_SIZE||52428800..toString()),tn=240,nn=Object(x.a)((function(e){return Object(O.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:tn,flexShrink:0}),onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),appBar:Object(l.a)({background:"white"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(tn,"px)"),marginLeft:tn}),menuButton:Object(l.a)({color:e.palette.primary.main,marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(k.a)(Object(k.a)({},e.mixins.toolbar),{},{height:64}),drawerPaper:{width:tn},topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,paddingLeft:12,display:"flex",flexDirection:"column",height:"100vh"}})}));function an(e){var t=nn(),n=Object(Z.f)(),c=window.location.pathname.split("/")[3],i=Object(r.useState)([]),s=Object(o.a)(i,2),l=s[0],u=s[1],b=Object(r.useState)([]),d=Object(o.a)(b,2),j=d[0],h=d[1],p=Object(r.useState)([]),f=Object(o.a)(p,2),x=f[0],O=f[1],m=Object(r.useState)(!1),v=Object(o.a)(m,2),y=v[0],R=v[1],M=Object(r.useState)(!1),D=Object(o.a)(M,2),E=D[0],L=D[1],A=Object(r.useState)(!0),q=Object(o.a)(A,2),H=q[0],_=q[1],z=Object(r.useState)(""),G=Object(o.a)(z,2),U=G[0],K=G[1],V=Object(r.useState)(!1),J=Object(o.a)(V,2),X=J[0],Q=J[1],Y=Object(r.useState)(""),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ne=Object(r.useState)(""),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(r.useState)([]),se=Object(o.a)(ie,2),oe=se[0],le=se[1];Object(r.useEffect)((function(){Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l.length){e.next=4;break}le([]),e.next=9;break;case 4:return e.t0=le,e.next=7,it(l.map((function(e){return e.id})));case 7:e.t1=e.sent.data,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))()}),[l]);var ue=Object(At.b)(),be=ue.enqueueSnackbar,de=ue.closeSnackbar,je=Object(qt.a)({noClick:!0,noKeyboard:!0,accept:"image/jpeg, image/png"}),he=je.getRootProps,pe=je.open,fe=je.getInputProps,xe=je.acceptedFiles,Oe=je.fileRejections,me=je.isDragActive;Object(r.useEffect)((function(){Se(xe,Oe)}),[xe,Oe]);var ve=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,dt(c,re);case 3:if(200!==(t=e.sent).status){e.next=9;break}u(t.data),_(!1),e.next=14;break;case 9:return e.t0=window,e.next=12,t.data;case 12:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot("");case 2:if(200!==(t=e.sent).status){e.next=7;break}h(t.data),e.next=12;break;case 7:return e.t0=window,e.next=10,t.data;case 10:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){ve(),ge()}),[re,c]);var we=function(){var t=Object(w.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe.unselect(),t.next=3,Xe(x,n,be,de);case 3:return t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ke=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(l.filter((function(e){return e.id!==t}))),e.next=3,Ae([t],be,de);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(l.filter((function(e){return e.id!==t}))),e.next=3,Ye([t],c,be,de);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var t=Object(w.a)(g.a.mark((function t(n,a){var r,i,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(r=new FormData,n.forEach((function(e){e.size>en?a.push({file:e,errors:[{message:"File is bigger than ".concat(en," bytes"),code:"file-too-large"}]}):r.append("file",e)})),null===(i=Ht.createInstance(be,de))||void 0===i||i.begin(a),0!==r.getAll("file").length){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Ee(r,be,de,j);case 10:return s=t.sent,t.next=13,Xe(s,[c],be,de);case 13:return t.next=15,ve();case 15:return t.next=17,e.refresh();case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ce=function(e){return function(){Be()?Ie(e)():n.push("/albums/open/".concat(c,"/view/").concat(e))}},Ie=function(e){return function(){var t=x.slice();t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),O(t),0===t.length&&R(!1)}},Be=function(){return 0!==x.length||y},Te={delete:function(){var t=Object(w.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ke(n);case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),remove:function(){var t=Object(w.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ye(n);case 2:return u(l.filter((function(e){return e.id!==n}))),t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addToAlbum:function(e){O([e]),L(!0)},setCover:function(){var t=Object(w.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He(c,n);case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),download:function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(l.filter((function(e){return t===e.id})),be,de);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Fe={setCover:function(){var t=Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He(c,x[0]);case 2:return Fe.unselect(),t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),delete:function(){var t=Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe.unselect(),t.next=3,Ae(x,be,de);case 3:return u(l.filter((function(e){return!x.includes(e.id)}))),t.next=6,ve();case 6:return t.next=8,e.refresh();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fe.unselect(),t.next=3,Ye(x,c,be,de);case 3:return u(l.filter((function(e){return!x.includes(e.id)}))),t.next=6,ve();case 6:return t.next=8,e.refresh();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),unselect:function(){O([]),R(!1)},upload:function(){pe()},settings:function(){},select:function(){R(!y)},addToAlbum:function(){L(!0)},download:function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fe.unselect(),et(l.filter((function(e){return x.includes(e.id)})),be,de);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),search:function(e){return Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ce(e);case 1:case"end":return t.stop()}}),t)})))},mobileSearch:function(){Q(!X)}},Re=[Object(a.jsx)("div",{children:" "}),Object(a.jsx)(C.a,{variant:"h4",style:{paddingTop:10,paddingLeft:5},children:(j.find((function(e){return e.id.toString()===c}))||{name:""}).name}),Object(a.jsxs)(C.a,{variant:"h5",style:{display:""!==re&&re?"block":"none",paddingLeft:5},children:["Search results for ",re,":"]})],Me=[12,42,""!==re&&re?28:0];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(Z.c,{children:[Object(a.jsx)(Z.a,{path:"/albums/open/:albumID/view",children:Object(a.jsx)(wt,{setViewId:K,photos:l,topRightBar:function(e,t){return Object(a.jsx)($t,{id:e,buttonFunctions:t})},buttonFunctions:Te})}),Object(a.jsx)(Z.a,{path:"/",children:Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},he({className:"dropzone"})),{},{className:t.root,children:[Object(a.jsx)(N.a,{open:me,transitionDuration:150,style:{zIndex:1201,backgroundColor:"#00006666"},children:Object(a.jsx)("div",{children:Object(a.jsx)(P.a,{style:{fontSize:200,color:"#1976d2aa"}})})}),Object(a.jsx)("input",Object(k.a)({},fe())),Object(a.jsx)(I.a,{}),Object(a.jsx)(B.a,{position:"fixed",className:t.appBar,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(Yt,{searchBarText:ee,setSearchBarText:te,autocompleteOptions:oe,anySelected:Be,buttonFunctions:Fe,numSelected:function(){return x.length},show:H})]})}),e.drawerElement,Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.toolbar}),X&&Object(a.jsx)(W,{options:oe,search:Fe.search,className:t.onlyMobile,value:ee,onChange:function(e){return te(e)},onRequestSearch:Fe.search(ee),style:{marginLeft:-6,borderRadius:0,alignSelf:"flex-top"}}),Object(a.jsx)("div",{style:{flexGrow:1},children:Object(a.jsx)(Lt.a,{children:function(e){var t=e.height,n=e.width;return Object(a.jsx)(Pt,{height:t-1,width:n,photos:l,clickHandler:Ie,selected:x,anySelected:Be,imageClickHandler:Ce,lines:Re,heights:Me,viewId:U,setViewId:K})}})})]})]}))})]}),Object(a.jsx)(Ne,{albums:j,open:E,setOpen:L,cb:we})]})}var rn=n(327),cn=n(328),sn=n(330);function on(e){var t=Object(m.a)(),n=Object(Y.a)(t.breakpoints.down("sm")),c=Object(r.useState)(e.album.name),i=Object(o.a)(c,2),s=i[0],l=i[1],u=Object(r.useState)(null!==e.album.cover),b=Object(o.a)(u,2),d=b[0],j=b[1];Object(r.useEffect)((function(){e.open&&(l(e.album.name),j(null!==e.album.cover))}),[e.open]);var h=function(t){return Object(w.a)(g.a.mark((function n(){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=!1,!t||e.album.name===s){n.next=5;break}return a=!0,n.next=5,Ze(e.album.id,s);case 5:if(!t||null===e.album.cover||d){n.next=9;break}return a=!0,n.next=9,ze(e.album.id);case 9:if(!a){n.next=12;break}return n.next=12,e.fetchAlbums();case 12:return n.next=14,e.setOpen(!1);case 14:case"end":return n.stop()}}),n)})))},p=function(){var t=Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(e.album.id);case 2:return t.next=4,e.fetchAlbums();case 4:return t.next=6,h(!1)();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)(ve.a,{fullScreen:n,open:e.open,onClose:h(!1),"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsxs)(ke.a,{id:"responsive-dialog-title",children:["Settings of ",e.album.name]}),Object(a.jsxs)(we.a,{children:[Object(a.jsx)(Oe.a,{style:{backgroundColor:"#dddddd"},disabled:!d,onClick:function(){return j(!1)},children:d?"Clear cover":"No album cover"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(ne.a,{value:s,onChange:function(e){return l(e.target.value)},inputProps:{style:{fontSize:20}},InputLabelProps:{style:{fontSize:20}}})]}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(Oe.a,{onClick:p,color:"primary",autoFocus:!0,children:"Delete Album"}),Object(a.jsx)(Oe.a,{onClick:h(!1),color:"primary",autoFocus:!0,children:"Cancel"}),Object(a.jsx)(Oe.a,{onClick:h(!0),color:"primary",autoFocus:!0,children:"Save"})]})]})})}var ln=Object(Q.a)({palette:{primary:{main:"#cccccc",dark:"#cccccc",light:"#cccccc"}}});function un(e){var t=Object(x.a)((function(){return Object(O.a)({root:{overflow:"hidden",padding:5,paddingTop:10},icon:{color:"rgba(255, 255, 255, 0.54)"},photoDiv:{margin:5,display:"flex",flexFlow:"row wrap"}})}))(),n=Object(Z.f)(),c=Object(r.useState)(!1),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(a.jsxs)(rn.a,{className:t.root,children:[Object(a.jsxs)(cn.a,{style:{height:e.dimension,width:e.dimension,backgroundColor:"white"},onClick:function(){n.push("/albums/open/".concat(e.album.id))},children:[null===e.album.cover?Object(a.jsx)(Wt.a,{style:{height:e.dimension,width:e.dimension,color:"#666666"}}):Object(a.jsx)("div",{style:{backgroundImage:"url(".concat(De+"/media/thumb_"+e.album.cover,")"),backgroundSize:"cover",backgroundPosition:"center",height:e.dimension,width:e.dimension}}),Object(a.jsx)(sn.a,{title:e.album.name,subtitle:Object(a.jsxs)("span",{children:[e.album.imagecount," elements"]}),actionIcon:Object(a.jsx)("div",{onClick:function(e){e.stopPropagation()},children:Object(a.jsx)($.a,{theme:ln,children:Object(a.jsx)(F.a,{"aria-label":"info about ".concat(e.album.name),color:"primary",onClick:function(){return l(!0)},className:t.icon,children:Object(a.jsx)(Dt.a,{})})})})})]},e.album.id),Object(a.jsx)(on,{album:e.album,open:s,setOpen:l,fetchAlbums:e.fetchAlbums})]})}var bn=200,dn=function(e){return e.data.linNum<=e.index?Object(a.jsx)("div",{style:Object(k.a)(Object(k.a)({},e.style),{},{display:"flex",transition:"0.05s linear"}),children:e.data.rowPics[e.index].map((function(t){return n=t,r=e.data.rowH[e.index],c=e.data.props,Object(a.jsx)(un,{album:n,dimension:r,click:c.openAlbum(n),fetchAlbums:c.fetchAlbums},n.id);var n,r,c}))}):Object(a.jsx)("div",{children:e.data.rowPics[e.index]})},jn=function(e){var t=e.onScroll,n=e.forwardedRef,c=e.style,i=e.children,s=Object(r.useCallback)((function(e){n(e?e.view:null)}),[n]);return Object(a.jsx)(Nt.Scrollbars,{ref:s,style:Object(k.a)(Object(k.a)({},c),{},{overflow:"hidden"}),onScroll:t,children:i})},hn=c.a.forwardRef((function(e,t){return Object(a.jsx)(jn,Object(k.a)(Object(k.a)({},e),{},{forwardedRef:t}))}));function pn(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.resetAfterIndex(0)}),[e.width,e.albums,e.heights]);var n=function(e,t){for(var n=[],a=[],r=0,c=-1;r!==e.length;){for(var i=[],s=0;r!==e.length&&(0===s||Math.abs(bn-bn*t/s)>Math.abs(bn-bn*t/(s+bn)));)i.push(e[r]),s+=bn,r++;-1===c&&(c=bn*t/s),0===a.length&&s<=t&&r===e.length?n.push(bn):n.push(c),a.push(i)}return{rowH:n,rowPics:a}}(e.albums,e.width-20),c=n.rowH,i=n.rowPics;c=[].concat(Object(me.a)(e.heights),Object(me.a)(c)),i=[].concat(Object(me.a)(e.lines),Object(me.a)(i));return Object(a.jsx)(Ct.a,{overscanCount:10,height:e.height,ref:t,itemData:{rowH:c,rowPics:i,props:e,linNum:e.lines.length},itemCount:c.length,itemSize:function(e){return c[e]},width:e.width-1,outerElementType:hn,children:dn})}var fn=240,xn=Object(x.a)((function(e){return Object(O.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:fn,flexShrink:0}),appBar:Object(l.a)({background:"white"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(fn,"px)"),marginLeft:fn}),menuButton:Object(l.a)({color:e.palette.primary.main,marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:Object(k.a)(Object(k.a)({},e.mixins.toolbar),{},{height:64}),drawerPaper:{width:fn},onlyMobile:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,paddingLeft:12,display:"flex",flexDirection:"column",height:"100vh"}})}));function On(e){var t=xn(),n=Object(r.useState)([]),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),b=u[0],d=u[1],j=Object(r.useState)(!0),h=Object(o.a)(j,2),p=h[0],f=h[1],x=Object(r.useState)(!1),O=Object(o.a)(x,2),m=O[0],v=O[1],k=Object(r.useState)(""),y=Object(o.a)(k,2),N=y[0],R=y[1],M=Object(r.useState)(""),P=Object(o.a)(M,2),D=P[0],E=P[1],L=Object(r.useState)([]),A=Object(o.a)(L,2),q=A[0],H=(A[1],function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,ot(D);case 3:if(200!==(t=e.sent).status){e.next=9;break}s(t.data),f(!1),e.next=14;break;case 9:return e.t0=window,e.next=12,t.data;case 12:e.t1=e.sent,e.t0.alert.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(r.useEffect)((function(){H()}),[D]);var _={add:function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),search:function(e){return Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(e);case 1:case"end":return t.stop()}}),t)})))},mobileSearch:function(){v(!m)}},z=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t);case 2:return e.next=4,H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){return function(){}},U=[""!==D&&D?20:0],K=[Object(a.jsxs)(C.a,{variant:"h5",style:{display:""!==D&&D?"block":"none"},children:["Search results for ",D,":"]})];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(Z.c,{children:[Object(a.jsx)(Z.a,{path:"/albums/open",children:Object(a.jsx)(an,{refresh:H,drawerElement:e.drawerElement,handleDrawerToggle:e.handleDrawerToggle})}),Object(a.jsx)(Z.a,{path:"/albums/",children:Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(I.a,{}),Object(a.jsx)(B.a,{position:"fixed",className:t.appBar,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:t.menuButton,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(Zt,{searchBarText:N,setSearchBarText:R,autocompleteOptions:q,buttonFunctions:_,show:p})]})}),e.drawerElement,Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.toolbar}),m&&Object(a.jsx)(W,{options:q,search:_.search,className:t.onlyMobile,value:N,onChange:function(e){return R(e)},onRequestSearch:_.search(N),style:{marginLeft:-6,borderRadius:0,alignSelf:"flex-top"}}),Object(a.jsx)("div",{style:{flexGrow:1},children:Object(a.jsx)(Lt.a,{children:function(e){var t=e.height,n=e.width;return Object(a.jsx)(pn,{height:t-1,width:n,albums:i,openAlbum:G,fetchAlbums:H,lines:K,heights:U})}})})]})]})})]}),Object(a.jsx)(Jt,{albums:i,open:b,setOpen:d,cb:z})]})}var mn=240,vn=Object(x.a)((function(e){return Object(O.a)({root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:mn,flexShrink:0}),appBar:Object(l.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(mn,"px)"),marginLeft:mn,background:"white"}),menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:mn},topleft:{color:"#666666",fontSize:"xx-large",display:"flex","justify-content":"center","align-items":"center",height:64},content:{flexGrow:1,padding:e.spacing(3)}})}));function gn(e){var t=e.window,n=vn(),c=Object(m.a)(),i=Object(r.useState)(!1),s=Object(o.a)(i,2),l=s[0],x=s[1],O=function(){x(!l)},v=Object(Z.f)(),g=Object(Z.g)(),w=Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:n.toolbar,children:Object(a.jsx)("div",{className:n.topleft,children:"ImageStore"})}),Object(a.jsx)(u.a,{}),Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(d.a,{button:!0,selected:"/"===g.pathname,onClick:function(){v.push("/"),x(!1)},children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(Kt.a,{})}),Object(a.jsx)(h.a,{primary:"Photos"})]}),Object(a.jsxs)(d.a,{button:!0,selected:g.pathname.startsWith("/albums"),onClick:function(){v.push("/albums"),x(!1)},children:[Object(a.jsx)(j.a,{children:Object(a.jsx)(Wt.a,{})}),Object(a.jsx)(h.a,{primary:"Albums"})]})]})]}),k=void 0!==t?function(){return t().document.body}:void 0,y=Object(a.jsxs)("nav",{className:n.drawer,"aria-label":"mailbox folders",children:[Object(a.jsx)(p.a,{smUp:!0,implementation:"css",children:Object(a.jsx)(f.a,{container:k,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:l,onClose:O,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0},children:w})}),Object(a.jsx)(p.a,{xsDown:!0,implementation:"css",children:Object(a.jsx)(f.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0,children:w})})]});return Object(a.jsxs)(Z.c,{children:[Object(a.jsx)(Z.a,{path:"/albums",children:Object(a.jsx)(On,{drawerElement:y,handleDrawerToggle:O})}),Object(a.jsx)(Z.a,{path:"/",children:Object(a.jsx)(Ut,{drawerElement:y,handleDrawerToggle:O})})]})}var wn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,339)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},kn=n(53),yn=Object(Q.a)({palette:{primary:{main:"#444444",dark:"#000000",light:"#000000"},secondary:{main:"#ff0000"},background:{}}});s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(kn.a,{basename:"/ImageStore",children:Object(a.jsx)($.a,{theme:yn,children:Object(a.jsx)(At.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(a.jsx)(gn,{})})})})}),document.getElementById("root")),wn()}},[[255,1,2]]]);
//# sourceMappingURL=main.ab48d996.chunk.js.map