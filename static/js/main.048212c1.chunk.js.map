{"version":3,"sources":["Components/Shared/TopBarStyle.tsx","Components/Shared/SearchBar.tsx","Components/PhotoPage/TopBar.tsx","Components/ViewPage/TopLeftBar.tsx","Components/Shared/AddToAlbum.tsx","Components/Snackbars/SnackbarAction.tsx","Components/Snackbars/AddPhotosSnackbar.tsx","Components/Snackbars/AddPhotosToAlbumsSnackbar.tsx","Components/Snackbars/DeletePhotosSnackbar.tsx","Components/Snackbars/DownloadSnackbar.tsx","Components/Snackbars/RemovePhotosSnackbar.tsx","API.tsx","Components/ViewPage/ViewPage.tsx","Components/Shared/AbstractPhotoPage.tsx","Components/PhotoPage/TopRightBar.tsx","Components/Snackbars/UploadErrorSnackbar.tsx","Components/PhotoPage/PhotoPage.tsx","Components/AlbumPage/TopBar.tsx","Components/AlbumPage/CreateAlbum.tsx","Components/AlbumPage/AlbumPhotoPage/TopBar.tsx","Components/AlbumPage/AlbumPhotoPage/TopRightBar.tsx","Components/AlbumPage/AlbumPhotoPage/AlbumPhotoPage.tsx","Components/AlbumPage/AlbumInfo.tsx","Components/Shared/AbstractAlbumPage.tsx","Components/AlbumPage/AlbumPage.tsx","Components/Page.tsx","reportWebVitals.ts","index.tsx"],"names":["makeStyles","theme","createStyles","TopBar","background","display","flexGrow","left","transition","padding","float","middle","breakpoints","down","right","justifySelf","onlyMobile","up","notMobile","filterOptions","createFilterOptions","limit","AutocompleteSearchBar","props","value","setValue","onChange","Autocomplete","className","style","freeSolo","options","event","newValue","a","search","renderInput","params","inputProps","ref","onCancelSearch","target","onRequestSearch","InputProps","classes","TopBarStyle","flexDirection","autocompleteOptions","buttonFunctions","searchBarText","s","setSearchBarText","IconButton","color","aria-label","onClick","mobileSearch","Search","numSelected","select","CheckBox","upload","CloudUpload","unselect","Cancel","download","CloudDownload","addToAlbum","LibraryAdd","delete","Delete","LinearProgress","marginTop","show","marginLeft","marginRight","TopLeftBar","history","useHistory","alignSelf","e","stopPropagation","goBack","ArrowBack","useStyles","root","backgroundColor","Element","useState","checked","setChecked","ListItem","button","remove","album","id","add","Checkbox","disableRipple","ListItemText","primary","name","AddToAlbum","selected","setSelected","useTheme","fullScreen","useMediaQuery","albumId","filter","cur","handleClose","execute","length","cb","setOpen","closeCallback","Dialog","open","onClose","zIndex","aria-labelledby","DialogTitle","DialogContent","albums","map","DialogActions","Button","autoFocus","SnackbarAction","closeSnackbar","actions","action","key","Function","size","Close","fontSize","DialogComponent","React","albumIds","addPhotosToAlbums","photos","enqueueSnackbar","closeAddSnackbar","AddPhotosSnackbar","snackMsg","this","amount","message","CircularProgress","variant","autoHideDuration","errors","count","errorMessage","toString","errorAction","AddPhotosToAlbumsSnackbar","amountPhotos","amountAlbums","DeletePhotosSnackbar","DownloadSnackbar","toAlbum","RemovePhotosSnackbar","baseURL","window","location","hostname","port","delay","ms","Promise","resolve","setTimeout","console","log","axios","defaults","headers","post","height","width","cover","imagecount","addPhotos","formData","snackbar","createInstance","begin","getAll","end","deletePhotos","photoIds","before","JSON","parse","sessionStorage","getItem","stringify","after","p","includes","setItem","setCover","photoId","clearCover","createAlbum","max","parseInt","reduce","Math","push","albumPhotos","deleteAlbum","renameAlbum","newAlbumName","f","error","removePhotosFromAlbum","photo","url","method","responseType","response","content","data","zip","JSZip","all","file","generateAsync","type","URL","createObjectURL","Blob","document","createElement","href","body","appendChild","click","removeChild","revokeObjectURL","removeLabel","label","l","addLabel","ids","labels","getPhotoLabels","found","getAlbums","searchTerm","status","getPhotos","getPhotosInAlbum","included","SwiperCore","use","Virtual","Navigation","createMuiTheme","palette","main","dark","light","secondary","drawerWidth","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","spacing","justifyContent","mixins","toolbar","transitions","create","easing","sharp","duration","leavingScreen","contentShift","easeOut","enteringScreen","chip","margin","ViewPage","pathname","split","slice","setId","opacityRight","setOpacityRight","opacityLeft","setOpacityLeft","setLabels","index","findIndex","v","useEffect","setViewId","setViewed","getLabels","resp","alert","slideChange","afterWithout","substr","process","lastIndexOf","replace","mouseRight","mouseLeft","modifiedButtonFunctions","info","swiperRef","useRef","prevRef","nextRef","hideArrows","CssBaseline","clsx","ThemeProvider","onMouseEnter","onMouseMove","opacity","position","ChevronLeft","ChevronRight","topRightBar","Drawer","anchor","paper","Typography","Divider","List","ListItemIcon","PhotoOutlined","Label","flexWrap","listStyle","LabelChip","LabelInputChip","deleted","setDeleted","Chip","onDelete","deleteIcon","undefined","added","setAdded","handleAdd","TextField","marginBottom","onKeyPress","ev","preventDefault","AddCircle","transform","Carousel","setKey","spaceBetween","slidesPerView","virtual","navigation","prevEl","current","nextEl","initialSlide","onInit","swiper","update","onSlideChange","activeIndex","virtualIndex","alt","objectFit","src","photoDiv","photoBox","top","Photo","realUrl","setUrl","timeout","clearTimeout","isScrolling","vis","setVis","anySelected","y","x","onMouseLeave","imageClick","backgroundImage","backgroundSize","readOnly","targetHeight","Row","altprops","linNum","rowPics","realH","rowH","clickHandler","imageClickHandler","outZoom","CustomScrollbars","onScroll","forwardedRef","children","refSetter","useCallback","scrollbarsRef","view","overflow","CustomScrollbarsVirtualList","forwardRef","AbstractPhotoPage","jumped","setJumped","listRef","resetAfterIndex","item","tmpRowPics","viewId","scrollToItem","lines","heights","ptr","curPics","curWidth","abs","calculate","tmpRowH","useIsScrolling","overscanCount","itemData","itemCount","itemSize","outerElementType","TopRightBar","Info","UploadErrorSnackbar","fileRejections","fileRejection","maxSize","MAX_SIZE","appBar","menuButton","topleft","paddingLeft","PhotoPage","setPhotos","setAlbums","selectable","setSelectable","showLoadingBar","setShowLoadingBar","useSnackbar","useDropzone","noClick","noKeyboard","accept","getRootProps","openM","getInputProps","acceptedFiles","isDragActive","showSearchBar","setShowSearchBar","setSearchTerm","setAutocompleteOptions","fetchPhotos","fetchAlbums","copy","topBarButtonFunctions","viewButtonFunctions","deletePhoto","pid","settings","files","FormData","forEach","code","append","paddingTop","path","Backdrop","transitionDuration","AppBar","Toolbar","edge","handleDrawerToggle","drawerElement","borderRadius","CreateNewFolder","CreateAlbum","fullWidth","placeholder","Pages","RemoveCircleOutline","AlbumPhotoPage","refresh","removePhoto","photoID","find","AlbumInfo","nameField","setNameField","hasCover","setHasCover","ex","deleteThis","disabled","InputLabelProps","Album","icon","flexFlow","openInfo","setOpenInfo","GridList","GridListTile","dimension","PhotoAlbum","backgroundPosition","GridListTileBar","title","subtitle","actionIcon","openAlbum","AbstractAlbumPage","setH","AlbumPage","openCreateAlbum","setOpenCreateAlbum","createAlbumCallback","ResponsiveDrawer","mobileOpen","setMobileOpen","useLocation","startsWith","container","Hidden","smUp","implementation","direction","ModalProps","keepMounted","xsDown","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","anchorOrigin","vertical","horizontal","getElementById"],"mappings":"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","file":"static/js/main.048212c1.chunk.js","sourcesContent":["import { makeStyles, Theme, createStyles } from \"@material-ui/core\";\r\n\r\nexport default makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        TopBar: {\r\n            background: \"#ffffff\",\r\n            display: \"flex\",\r\n            flexGrow: 1,\r\n        },\r\n        left: {\r\n            transition: \"all 1s linear\",\r\n            padding: \"7px\",\r\n            display: \"block\",\r\n            float: \"left\",\r\n            \"margin-left\": \"-15px\",\r\n            \"margin-right\": \"-5px\",\r\n            \"padding-left\": \"0px\",\r\n        },\r\n        middle: {\r\n            flexGrow: 1,\r\n            display: \"block\",\r\n            float: \"left\",\r\n            padding: \"7px\",\r\n            [theme.breakpoints.down(\"sm\")]: {\r\n                padding: \"0px\",\r\n            },\r\n        },\r\n        right: {\r\n            transition: \"all 1s linear\",\r\n            padding: \"7px\",\r\n            display: \"block\",\r\n            justifySelf: \"flex-end\",\r\n            \"margin-right\": \"-15px\",\r\n            \"padding-right\": \"0px\",\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        notMobile: {\r\n            [theme.breakpoints.down(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n    })\r\n);\r\n","import { Autocomplete, createFilterOptions } from \"@material-ui/lab\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst filterOptions = createFilterOptions({\r\n    limit: 6\r\n});\r\n\r\nexport default function AutocompleteSearchBar(props: any) {\r\n    const value = props.value;\r\n    const setValue = props.onChange;\r\n    return (\r\n        <Autocomplete\r\n            filterOptions={filterOptions}\r\n            className={props.className}\r\n            style={props.style}\r\n            freeSolo\r\n            options={props.options}\r\n            onChange={async (event: any, newValue: any) => {\r\n                setValue(newValue);\r\n                props.search(newValue)();\r\n            }}\r\n            renderInput={(params: any) => {\r\n                return (\r\n                    <>\r\n                        <SearchBar\r\n                            {...{ ...params.inputProps, ref: null }}\r\n                            onCancelSearch={async () => {\r\n                                setValue(\"\");\r\n                                props.search(\"\")();\r\n                            }}\r\n                            style={props.style}\r\n                            className={props.onlyMobile}\r\n                            value={value}\r\n                            onChange={(newValue) => {\r\n                                if (newValue === \"\")\r\n                                    props.search(\"\")();\r\n                                params.inputProps.onChange({ target: { value: newValue } });\r\n                                setValue(newValue)\r\n                            }}\r\n                            onRequestSearch={props.onRequestSearch}\r\n                        />\r\n                        <div ref={params.InputProps.ref}>\r\n                            <div {...params.inputProps} />\r\n                        </div>\r\n                    </>\r\n                )\r\n            }\r\n            }\r\n        />\r\n    )\r\n}","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { CloudDownload, LibraryAdd, Delete, Cancel, CloudUpload, Search, CheckBox } from \"@material-ui/icons\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nimport TopBarStyle from \"../Shared/TopBarStyle\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nexport default function TopBar(props: any) {\r\n    const classes = TopBarStyle();\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1 }}>\r\n            <div className={classes.TopBar}>\r\n                <div className={classes.middle}>\r\n                    <AutocompleteSearchBar\r\n                        options={props.autocompleteOptions}\r\n                        search={props.buttonFunctions.search}\r\n                        className={classes.notMobile}\r\n                        value={props.searchBarText}\r\n                        onChange={(s: string) => props.setSearchBarText(s)}\r\n                        onRequestSearch={props.buttonFunctions.search(props.searchBarText)}\r\n                    />\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <div style={{ float: \"left\" }}>\r\n                        <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"search\" onClick={props.buttonFunctions.mobileSearch}>\r\n                            <Search />\r\n                        </IconButton>\r\n                        {props.numSelected() === 0 && (\r\n                            <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"select\" onClick={props.buttonFunctions.select}>\r\n                                <CheckBox />\r\n                            </IconButton>\r\n                        )}\r\n                    </div>\r\n                    {props.numSelected() === 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"upload\" onClick={props.buttonFunctions.upload}>\r\n                            <CloudUpload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cancel\" onClick={props.buttonFunctions.unselect}>\r\n                            <Cancel />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cloud_download\" onClick={props.buttonFunctions.download}>\r\n                            <CloudDownload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"library_add\" onClick={props.buttonFunctions.addToAlbum}>\r\n                            <LibraryAdd />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"delete\" onClick={props.buttonFunctions.delete}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <LinearProgress\r\n                style={{\r\n                    marginTop: -2,\r\n                    display: props.show ? \"block\" : \"none\",\r\n                    flexGrow: 1,\r\n                    marginLeft: -24,\r\n                    marginRight: -24,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { ArrowBack } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function TopLeftBar() {\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <div\r\n            className=\"TopLeftBar\"\r\n            style={{\r\n                alignSelf: \"flex-start\",\r\n                justifySelf: \"left\",\r\n                padding: 10,\r\n                marginRight: -25,\r\n            }}\r\n        >\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"back\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    history.goBack();\r\n                }}\r\n            >\r\n                <ArrowBack />\r\n            </IconButton>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { ListItem, ListItemText, Checkbox } from \"@material-ui/core\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n});\r\n\r\nfunction Element(props: { album: AlbumT; remove: (arg0: any) => void; add: (arg0: any) => void }) {\r\n    const classes = useStyles();\r\n    const [checked, setChecked] = useState(false);\r\n    return (\r\n        <ListItem\r\n            button\r\n            onClick={() => {\r\n                if (checked) props.remove(props.album.id);\r\n                else props.add(props.album.id);\r\n                setChecked(!checked);\r\n            }}\r\n        >\r\n            <Checkbox className={classes.root} color=\"primary\" checked={checked} disableRipple />\r\n            <ListItemText primary={props.album.name} />\r\n        </ListItem>\r\n    );\r\n}\r\n\r\nexport default function AddToAlbum(props: { cb: (arg0: string[]) => any; setOpen: (arg0: boolean) => any; open: boolean; albums: AlbumT[]; closeCallback?: (() => void) }) {\r\n    const [selected, setSelected] = useState<string[]>([]);\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const add = (albumId: string) => {\r\n        setSelected([...selected, albumId]);\r\n    };\r\n    const remove = (albumId: string) => {\r\n        setSelected(selected.filter((cur) => cur !== albumId));\r\n    };\r\n\r\n    const handleClose = (execute: boolean) => async () => {\r\n        if (execute && selected.length > 0) await props.cb(selected);\r\n        setSelected([]);\r\n        await props.setOpen(false);\r\n        props.closeCallback?.()\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog fullScreen={fullScreen} open={props.open} onClose={handleClose(false)} style={{ zIndex: 1000000 }} aria-labelledby=\"responsive-dialog-title\">\r\n                <DialogTitle id=\"responsive-dialog-title\">Add to Album</DialogTitle>\r\n                <DialogContent>\r\n                    {props.albums.map((album: any) => (\r\n                        <Element album={album} add={add} remove={remove} key={album.id} />\r\n                    ))}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose(true)} color=\"primary\" autoFocus>\r\n                        Add\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import { ReactNode } from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nexport default function SnackbarAction(closeSnackbar: null | ((key: any) => void), actions: ((key: any) => ReactNode) | ReactNode = null) {\r\n    const action = (key: any) => (\r\n        <>\r\n            {actions && (actions instanceof Function) ? actions(key) : actions}\r\n            {closeSnackbar && (\r\n                <IconButton\r\n                    size=\"small\"\r\n                    color=\"inherit\"\r\n                    onClick={() => {\r\n                        closeSnackbar(key);\r\n                    }}\r\n                >\r\n                    <Close fontSize=\"small\" />\r\n                </IconButton>\r\n            )}\r\n        </>\r\n    );\r\n\r\n    return action;\r\n}\r\n","import { Button, CircularProgress, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport { addPhotosToAlbums } from \"../../API\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport AddToAlbum from \"../Shared/AddToAlbum\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nfunction DialogComponent(props: any) {\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    const cb = async (albumIds: any) => {\r\n        await addPhotosToAlbums(props.photos, albumIds, props.enqueueSnackbar, props.closeSnackbar);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Button color=\"inherit\" onClick={() => setOpen(true)}>\r\n                Add to album\r\n            </Button>\r\n            <AddToAlbum open={open} setOpen={setOpen} albums={props.albums} cb={cb} closeCallback={props.closeAddSnackbar} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport class AddPhotosSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    albums?: AlbumT[]\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(\r\n        enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar: (key?: string | number | undefined) => void,\r\n        albums?: AlbumT[]\r\n    ) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n        this.albums = albums;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void,\r\n        albums?: AlbumT[]\r\n    ): null | AddPhotosSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar, albums);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being uploaded`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: string[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} uploaded`;\r\n        const action = SnackbarAction(\r\n            this.closeSnackbar,\r\n            this.albums ?\r\n                (key: any) => <DialogComponent photos={photos} closeSnackbar={this.closeSnackbar} closeAddSnackbar={() => { if (key) this.closeSnackbar(key) }} enqueueSnackbar={this.enqueueSnackbar} albums={this.albums} /> : null\r\n        );\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class AddPhotosToAlbumsSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | AddPhotosToAlbumsSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amountPhotos: number, amountAlbums: number) {\r\n        const message = `${amountPhotos} element${amountPhotos === 1 ? \" is\" : \"s are\"} being added to ${amountAlbums} album${amountAlbums === 1 ? \"\" : \"s\"}`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: any[], albums: any[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} added to ${albums.length} album${albums.length === 1 ? \"\" : \"s\"}`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class DeletePhotosSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | DeletePhotosSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being deleted`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: any[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} deleted`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class DownloadSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void,\r\n        toAlbum?: (photos: string[]) => void\r\n    ): null | DownloadSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being downloaded`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: string[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} downloaded`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class RemovePhotosSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | RemovePhotosSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(amount: number) {\r\n        const message = `${amount} element${amount === 1 ? \" is\" : \"s are\"} being removed from this album`;\r\n        const action = SnackbarAction(null, <CircularProgress color=\"inherit\" style={{ padding: 5 }} />);\r\n        this.snackMsg = this.enqueueSnackbar!(message, {\r\n            variant: \"info\",\r\n            autoHideDuration: null,\r\n            action,\r\n        });\r\n    }\r\n\r\n    end(photos: string[], errors: string[]) {\r\n        if (this.snackMsg) this.closeSnackbar(this.snackMsg);\r\n        const message = `${photos.length} element${photos.length === 1 ? \" was\" : \"s were\"} removed from this album`;\r\n        const action = SnackbarAction(this.closeSnackbar);\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {errors.map((e) => (\r\n                    <div key={count++}>{e.toString()}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n\r\n        if (photos.length !== 0)\r\n            this.enqueueSnackbar(message, {\r\n                variant: \"success\",\r\n                autoHideDuration: 3000,\r\n                action,\r\n            });\r\n\r\n        if (errors.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import axios from \"axios\";\r\nimport JSZip from \"jszip\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport { AddPhotosSnackbar } from \"./Components/Snackbars/AddPhotosSnackbar\";\r\nimport { AddPhotosToAlbumsSnackbar } from \"./Components/Snackbars/AddPhotosToAlbumsSnackbar\";\r\nimport { DeletePhotosSnackbar } from \"./Components/Snackbars/DeletePhotosSnackbar\";\r\nimport { DownloadSnackbar } from \"./Components/Snackbars/DownloadSnackbar\";\r\nimport { RemovePhotosSnackbar } from \"./Components/Snackbars/RemovePhotosSnackbar\";\r\nimport { AlbumT, PhotoT } from \"./Interfaces\";\r\n\r\nexport const baseURL = \"http://\" + window.location.hostname + (window.location.port ? \":\" : \"\") + window.location.port + \"/\" + process.env.PUBLIC_URL\r\nconsole.log(baseURL)\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\r\nfunction delay(ms: number) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nconst defaults = {\r\n    photos: [\r\n        { id: \"cat1.jpg\", name: \"my_cat_1.jpg\", height: 3458, width: 5026 },\r\n        { id: \"cat2.jpg\", name: \"my_cat_2.jpg\", height: 5866, width: 3035 },\r\n        { id: \"cat3.jpg\", name: \"my_cat_3.jpg\", height: 4498, width: 3374 },\r\n        { id: \"cat4.jpg\", name: \"my_cat_4.jpg\", height: 2333, width: 2333 },\r\n        { id: \"cat5.jpg\", name: \"my_cat_5.jpg\", height: 5472, width: 3648 },\r\n        { id: \"cat6.jpg\", name: \"my_cat_6.jpg\", height: 4032, width: 3024 },\r\n        { id: \"cat7.jpg\", name: \"my_cat_7.jpg\", height: 3803, width: 2853 },\r\n        { id: \"cat8.jpg\", name: \"my_cat_8.jpg\", height: 3648, width: 5472 },\r\n        { id: \"cat9.jpg\", name: \"my_cat_9.jpg\", height: 6016, width: 4000 },\r\n        { id: \"cat10.jpg\", name: \"my_cat_10.jpg\", height: 2834, width: 2834 },\r\n    ],\r\n\r\n    albums: [{ id: 6553538, name: \"My stock kitten\", cover: \"cat1.jpg\", imagecount: 3 }],\r\n    albumPhotos: { \"6553538\": [\"6596031\", \"cat1.jpg\", \"cat2.jpg\", \"cat3.jpg\", \"cat4.jpg\", \"cat5.jpg\", \"cat6.jpg\", \"cat9.jpg\", \"cat10.jpg\", \"cat7.jpg\", \"cat8.jpg\"] },\r\n\r\n    labels: { \"cat1.jpg\": [\"one\", \"tw\"] }\r\n\r\n}\r\n\r\nexport async function addPhotos(\r\n    formData: FormData,\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void,\r\n    albums?: AlbumT[]\r\n) {\r\n    const snackbar = AddPhotosSnackbar.createInstance(enqueueSnackbar, closeSnackbar, albums);\r\n    try {\r\n        snackbar?.begin(formData.getAll(\"file\").length);\r\n\r\n        await delay(200)\r\n\r\n        const photos: string[] = [];\r\n        const errors: string[] = [\"You cannot upload photos to the demo page, please download the self-hosted version\"];\r\n\r\n        snackbar?.end(photos, errors);\r\n\r\n        return photos;\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function deletePhotos(\r\n    photoIds: string[],\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    const snackbar = DeletePhotosSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n    try {\r\n        snackbar?.begin(photoIds.length);\r\n\r\n        const before: PhotoT[] = JSON.parse(sessionStorage.getItem(\"photos\") || JSON.stringify(defaults.photos))\r\n        const after = before.filter(p => !photoIds.includes(p.id))\r\n        sessionStorage.setItem(\"photos\", JSON.stringify(after));\r\n        await delay(300)\r\n\r\n        snackbar?.end(photoIds, []);\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function setCover(albumId: string, photoId: string) {\r\n    const before: AlbumT[] = JSON.parse(sessionStorage.getItem(\"albums\") || JSON.stringify(defaults.albums))\r\n    const after = before.map(a => a.id != albumId ? a : { id: a.id, name: a.name, cover: photoId, imagecount: a.imagecount })\r\n    sessionStorage.setItem(\"albums\", JSON.stringify(after));\r\n    console.log(photoId)\r\n    await delay(200)\r\n}\r\nexport async function clearCover(albumId: string) {\r\n    const before: AlbumT[] = JSON.parse(sessionStorage.getItem(\"albums\") || JSON.stringify(defaults.albums))\r\n    const after = before.map(a => a.id !== albumId ? a : { id: a.id, name: a.name, cover: null, imagecount: a.imagecount })\r\n    sessionStorage.setItem(\"albums\", JSON.stringify(after));\r\n    await delay(200)\r\n}\r\n\r\nexport async function createAlbum(name: string) {\r\n    const before: AlbumT[] = JSON.parse(sessionStorage.getItem(\"albums\") || JSON.stringify(defaults.albums))\r\n    const max = before.map(a => parseInt(a.id)).reduce((max, cur) => Math.max(max, cur))\r\n    before.push({ id: \"\" + max + 1, name: name, cover: null, imagecount: 0 })\r\n    sessionStorage.setItem(\"albums\", JSON.stringify(before));\r\n\r\n    const albumPhotos = JSON.parse(sessionStorage.getItem(\"albumPhotos\") || JSON.stringify(defaults.albumPhotos))\r\n    albumPhotos[max + 1] = []\r\n    sessionStorage.setItem(\"albumPhotos\", JSON.stringify(albumPhotos));\r\n    await delay(200)\r\n}\r\n\r\nexport async function deleteAlbum(albumId: string) {\r\n    const before: AlbumT[] = JSON.parse(sessionStorage.getItem(\"albums\") || JSON.stringify(defaults.albums))\r\n    const after = before.filter(a => a.id !== albumId)\r\n    sessionStorage.setItem(\"albums\", JSON.stringify(after));\r\n    await delay(200)\r\n}\r\n\r\nexport async function renameAlbum(albumId: string, newAlbumName: string) {\r\n    const before: AlbumT[] = JSON.parse(sessionStorage.getItem(\"albums\") || JSON.stringify(defaults.albums))\r\n    const after = before.map(a => a.id !== albumId ? a : { id: a.id, name: newAlbumName, cover: a.cover, imagecount: a.imagecount })\r\n    sessionStorage.setItem(\"albums\", JSON.stringify(after));\r\n    await delay(200)\r\n}\r\n\r\nexport async function addPhotosToAlbums(\r\n    photoIds: string[],\r\n    albumIds: string[],\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    const snackbar = AddPhotosToAlbumsSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n    try {\r\n        snackbar?.begin(photoIds.length, albumIds.length);\r\n\r\n\r\n        const albumPhotos = JSON.parse(sessionStorage.getItem(\"albumPhotos\") || JSON.stringify(defaults.albumPhotos))\r\n\r\n        for (const photoId of photoIds)\r\n            for (const albumId of albumIds) {\r\n                if (!albumPhotos[albumId].includes(photoId)) {\r\n                    albumPhotos[albumId].push(photoId)\r\n                }\r\n            }\r\n\r\n        sessionStorage.setItem(\"albumPhotos\", JSON.stringify(albumPhotos));\r\n\r\n        snackbar?.end(photoIds, albumIds, []);\r\n    } catch (error) {\r\n        snackbar?.end([], [], [error]);\r\n    }\r\n}\r\n\r\nexport async function removePhotosFromAlbum(\r\n    photoIds: string[],\r\n    albumId: string,\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    const snackbar = RemovePhotosSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n    try {\r\n\r\n        let albumPhotos = JSON.parse(sessionStorage.getItem(\"albumPhotos\") || JSON.stringify(defaults.albumPhotos))\r\n\r\n        for (const photoId of photoIds)\r\n            albumPhotos[albumId] = albumPhotos[albumId].filter((p: string) => p !== photoId)\r\n\r\n        sessionStorage.setItem(\"albumPhotos\", JSON.stringify(albumPhotos));\r\n\r\n        await delay(200)\r\n        snackbar?.end(photoIds, []);\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n    }\r\n}\r\n\r\nexport async function download(\r\n    photos: PhotoT[],\r\n    enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n    closeSnackbar?: (key?: string | number | undefined) => void\r\n) {\r\n    if (photos.length === 0) return;\r\n    const snackbar = DownloadSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n\r\n    try {\r\n        snackbar?.begin(photos.length);\r\n        let content: Blob;\r\n        let name: string;\r\n        if (photos.length === 1) {\r\n            const photo = photos[0];\r\n            const response = await axios({\r\n                url: `/media/${photo.id}`,\r\n                method: \"GET\",\r\n                responseType: \"blob\", // important\r\n            });\r\n\r\n            content = response.data;\r\n            name = photo.name;\r\n        } else {\r\n            const zip = new JSZip();\r\n            await Promise.all(\r\n                photos.map(async (photo) => {\r\n                    const response = await axios({\r\n                        url: `/media/${photo.id}`,\r\n                        method: \"GET\",\r\n                        responseType: \"blob\", // important\r\n                    });\r\n\r\n                    zip.file(photo.name, response.data);\r\n                })\r\n            );\r\n\r\n            content = await zip.generateAsync({ type: \"blob\" });\r\n            name = `photos.zip`;\r\n        }\r\n\r\n        const url = window.URL.createObjectURL(new Blob([content]));\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = name;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n        snackbar?.end([], []);\r\n    } catch (error) {\r\n        snackbar?.end([], [error]);\r\n    }\r\n}\r\n\r\nexport async function removeLabel(id: string, label: string) {\r\n    await delay(300)\r\n    const before = JSON.parse(sessionStorage.getItem(\"labels\") || JSON.stringify(defaults.labels))\r\n    before[id] = before[id].filter((l: string) => l !== label)\r\n    sessionStorage.setItem(\"labels\", JSON.stringify(before));\r\n}\r\n\r\nexport async function addLabel(ids: string[], labels: string[]) {\r\n    await delay(300)\r\n    const before = JSON.parse(sessionStorage.getItem(\"labels\") || JSON.stringify(defaults.labels))\r\n    for (const id of ids) {\r\n        if (!before[id])\r\n            before[id] = []\r\n        if (!before[id].includes(labels[0]))\r\n            before[id].push(labels[0])\r\n    }\r\n    sessionStorage.setItem(\"labels\", JSON.stringify(before));\r\n}\r\n\r\nexport async function getPhotoLabels(ids: string[]) {\r\n    const labels = JSON.parse(sessionStorage.getItem(\"labels\") || JSON.stringify(defaults.labels))\r\n\r\n    const found: string[] = []\r\n\r\n    for (const id of ids) {\r\n        if (labels[parseInt(id)]) {\r\n            for (const label of labels[parseInt(id)]) {\r\n                if (!found.includes(label))\r\n                    found.push(label)\r\n            }\r\n        }\r\n    }\r\n\r\n    return { \"status\": 200, \"data\": found }\r\n}\r\n\r\nexport async function getAlbums(searchTerm: string) {\r\n    const photos: PhotoT[] = JSON.parse(sessionStorage.getItem(\"photos\") || JSON.stringify(defaults.photos))\r\n    let before: AlbumT[] = JSON.parse(sessionStorage.getItem(\"albums\") || JSON.stringify(defaults.albums))\r\n    const albumPhotos = JSON.parse(sessionStorage.getItem(\"albumPhotos\") || JSON.stringify(defaults.albumPhotos))\r\n\r\n    if (searchTerm !== \"\") {\r\n        before = before.filter(a => {\r\n            if (a.name.includes(searchTerm))\r\n                return true;\r\n\r\n            return false;\r\n        })\r\n    }\r\n\r\n    const after: AlbumT[] = []\r\n\r\n    for (const album of before) {\r\n        let count = 0\r\n        for (const photo of albumPhotos[album.id])\r\n            if (photos.map(p => p.id).includes(photo))\r\n                count++;\r\n\r\n        after.push({ id: album.id, name: album.name, cover: album.cover, imagecount: count })\r\n    }\r\n\r\n    delay(200)\r\n    return { status: 200, data: after }\r\n}\r\n\r\nexport async function getPhotos(searchTerm: string) {\r\n    let before: PhotoT[] = JSON.parse(sessionStorage.getItem(\"photos\") || JSON.stringify(defaults.photos))\r\n    const labels = JSON.parse(sessionStorage.getItem(\"labels\") || JSON.stringify(defaults.labels))\r\n    if (searchTerm && searchTerm !== \"\") {\r\n        before = before.filter(p => {\r\n            if (p.name.includes(searchTerm))\r\n                return true;\r\n\r\n            if (labels[p.id] && labels[p.id].includes(searchTerm))\r\n                return true\r\n\r\n            return false;\r\n        })\r\n    }\r\n    delay(200)\r\n    return { status: 200, data: before }\r\n}\r\n\r\nexport async function getPhotosInAlbum(id: string, searchTerm: string) {\r\n    let photos: PhotoT[] = JSON.parse(sessionStorage.getItem(\"photos\") || JSON.stringify(defaults.photos))\r\n    const albumPhotos = JSON.parse(sessionStorage.getItem(\"albumPhotos\") || JSON.stringify(defaults.albumPhotos))\r\n\r\n    const included = albumPhotos[id]\r\n    console.log(included)\r\n\r\n    photos = photos.filter(p => included.includes(p.id))\r\n    console.log(searchTerm)\r\n    if (searchTerm && searchTerm !== \"\") {\r\n        photos = photos.filter(p => {\r\n            if (p.name.includes(searchTerm))\r\n                return true;\r\n\r\n            return false;\r\n        })\r\n    }\r\n\r\n    delay(200)\r\n    return { status: 200, data: photos }\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { renderToStaticMarkup } from \"react-dom/server\"\r\nimport \"./ViewPage.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useTransition, animated } from \"react-spring\";\r\nimport TopLeftBar from \"./TopLeftBar\";\r\nimport {\r\n    Chip,\r\n    CircularProgress,\r\n    createMuiTheme,\r\n    createStyles,\r\n    CssBaseline,\r\n    Divider,\r\n    Drawer,\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    makeStyles,\r\n    Paper,\r\n    TextField,\r\n    Theme,\r\n    ThemeProvider,\r\n    Typography,\r\n    useMediaQuery,\r\n    useTheme,\r\n} from \"@material-ui/core\";\r\nimport { ChevronLeft, ChevronRight, Close, Label, PhotoOutlined, AddCircle, HighlightOff } from \"@material-ui/icons\";\r\nimport clsx from \"clsx\";\r\nimport { PhotoT } from \"../../Interfaces\";\r\nimport { useSwipeable } from \"react-swipeable\";\r\nimport { addLabel, baseURL, getPhotoLabels, removeLabel } from \"../../API\";\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { Virtual, Navigation } from \"swiper\";\r\nimport 'swiper/swiper.min.css';\r\nSwiperCore.use([Virtual, Navigation]);\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: \"#ffffff\",\r\n            dark: \"#ffffff\",\r\n            light: \"#ffffff\",\r\n        },\r\n        secondary: {\r\n            main: \"#ff0000\",\r\n        },\r\n    },\r\n});\r\n\r\nconst drawerWidth = 340;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        drawerHeader: {\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            padding: theme.spacing(0, 1),\r\n            // necessary for content to be below app bar\r\n            justifyContent: \"space-between\",\r\n            ...theme.mixins.toolbar,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            transition: theme.transitions.create(\"margin\", {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n            marginRight: -0,\r\n        },\r\n        contentShift: {\r\n            transition: theme.transitions.create(\"margin\", {\r\n                easing: theme.transitions.easing.easeOut,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n            marginRight: drawerWidth,\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        notMobile: {\r\n            [theme.breakpoints.down(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        chip: {\r\n            margin: theme.spacing(0.5),\r\n        },\r\n    })\r\n);\r\n\r\nexport default function ViewPage(props: any) {\r\n    const history = useHistory();\r\n    const [id, setId] = useState(window.location.pathname.split(\"/\").slice(-1)[0]);\r\n    const [opacityRight, setOpacityRight] = useState(0);\r\n    const [opacityLeft, setOpacityLeft] = useState(0);\r\n    const [open, setOpen] = useState(false);\r\n    const [labels, setLabels] = useState<string[] | \"Loading\">(\"Loading\");\r\n    const index = props.photos.findIndex((v: PhotoT) => v.id === id);\r\n    const photo = props.photos[index];\r\n\r\n    useEffect(() => {\r\n        props.setViewId(id);\r\n    }, [id, props.setViewed]);\r\n\r\n    useEffect(() => {\r\n        getLabels();\r\n    }, [id])\r\n\r\n    const getLabels = async () => {\r\n        const resp = await getPhotoLabels([id])\r\n        if (resp.status === 200) {\r\n            setLabels(resp.data);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    }\r\n\r\n    const classes = useStyles(useTheme());\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const slideChange = (index: number) => {\r\n        const photos = props.photos;\r\n        const afterWithout = window.location.pathname.substr(process.env.PUBLIC_URL.length, window.location.pathname.lastIndexOf(\"/\") + 1 - process.env.PUBLIC_URL.length);\r\n        history.replace(`${afterWithout}${photos[index].id}`);\r\n        setId(photos[index].id);\r\n    }\r\n\r\n    const mouseRight = () => {\r\n        setOpacityRight(100);\r\n        setOpacityLeft(0);\r\n    };\r\n\r\n    const mouseLeft = () => {\r\n        setOpacityLeft(100);\r\n        setOpacityRight(0);\r\n    };\r\n    const mouseCenter = () => {\r\n        setOpacityLeft(0);\r\n        setOpacityRight(0);\r\n    };\r\n\r\n    const modifiedButtonFunctions = {\r\n        ...props.buttonFunctions,\r\n        delete: async (id: string) => {\r\n            if (props.photos.length === 1) history.goBack();\r\n            else if (index === 0) {\r\n                slideChange(1)\r\n            } else {\r\n                slideChange(index - 1)\r\n            }\r\n            await props.buttonFunctions.delete(id);\r\n        },\r\n        remove: async (id: string) => {\r\n            if (props.photos.length === 1) history.goBack();\r\n            else\r\n                slideChange(index === 0 ? 1 : index - 1)\r\n            await props.buttonFunctions.remove(id);\r\n        },\r\n        info: () => {\r\n            setOpen(!open);\r\n        },\r\n    };\r\n\r\n    const swiperRef = useRef<SwiperCore>(null)\r\n    const prevRef = useRef<HTMLDivElement>(null)\r\n    const nextRef = useRef<HTMLDivElement>(null)\r\n\r\n    const hideArrows = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline />\r\n            <main\r\n                className={clsx(classes.content, {\r\n                    [classes.contentShift]: open,\r\n                })}\r\n            >\r\n                <ThemeProvider theme={theme}>\r\n                    <div\r\n                        className=\"root\"\r\n                        style={{\r\n                            display: `${hideArrows ? \"none\" : \"grid\"}`,\r\n                            width: `calc(100% - ${open ? drawerWidth : 0}px)`,\r\n                            transition: theme.transitions.create(\"width\", {\r\n                                easing: theme.transitions.easing.sharp,\r\n                                duration: theme.transitions.duration.leavingScreen,\r\n                            }),\r\n                        }}\r\n                    >\r\n                        <div ref={prevRef} className=\"leftIm\" onMouseEnter={mouseLeft} onMouseMove={mouseLeft}>\r\n                            <IconButton\r\n                                style={{\r\n                                    transition: \"0.01s linear\",\r\n                                    opacity: index === 0 ? 0 : opacityLeft,\r\n                                    backgroundColor: \"#222222\",\r\n                                    alignSelf: \"center\",\r\n                                    justifySelf: \"left\",\r\n                                    position: \"absolute\",\r\n                                    marginLeft: \"20px\",\r\n                                    height: \"64px\",\r\n                                    width: \"64px\",\r\n                                }}\r\n                                className=\"IconButton\"\r\n                                color=\"primary\"\r\n                                aria-label=\"left\"\r\n                            >\r\n                                <ChevronLeft style={{ height: \"64px\", width: \"64px\" }} />\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className=\"center\" onClick={() => history.goBack()} onMouseEnter={mouseCenter}></div>\r\n                        <div ref={nextRef} className=\"rightIm\" onMouseEnter={mouseRight} onMouseMove={mouseRight}>\r\n                            <IconButton\r\n                                style={{\r\n                                    transition: \"0.01s linear\",\r\n                                    opacity: index === props.photos.length - 1 ? 0 : opacityRight,\r\n                                    backgroundColor: \"#222222\",\r\n                                    alignSelf: \"center\",\r\n                                    justifySelf: \"right\",\r\n                                    position: \"absolute\",\r\n                                    marginRight: \"20px\",\r\n                                    height: \"64px\",\r\n                                    width: \"64px\",\r\n                                }}\r\n                                className=\"IconButton\"\r\n                                color=\"primary\"\r\n                                aria-label=\"left\"\r\n                            >\r\n                                <ChevronRight style={{ height: \"64px\", width: \"64px\" }} />\r\n                            </IconButton>\r\n                        </div>\r\n                    </div>\r\n                    <Carousel slideChange={slideChange} index={index} photos={props.photos} open={open} swiperRef={swiperRef} prevRef={prevRef} nextRef={nextRef} />\r\n                    <div className=\"rootTop\" style={{\r\n                        display: \"flex\", justifyContent: \"space-between\",\r\n                        width: `calc(100% - ${open ? drawerWidth : 0}px)`,\r\n                        transition: theme.transitions.create(\"width\", {\r\n                            easing: theme.transitions.easing.sharp,\r\n                            duration: theme.transitions.duration.leavingScreen,\r\n                        }),\r\n                    }}>\r\n                        <TopLeftBar />\r\n                        {props.topRightBar(id, modifiedButtonFunctions)}\r\n                    </div>\r\n\r\n                </ThemeProvider>\r\n            </main>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"right\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <Typography variant=\"h5\"> Info</Typography>\r\n                    <IconButton style={{ justifySelf: \"end\" }} onClick={handleDrawerClose}>\r\n                        <Close />\r\n                    </IconButton>\r\n                </div>\r\n                <Divider></Divider>\r\n\r\n                <List>\r\n                    <ListItem>\r\n                        <ListItemIcon>\r\n                            <PhotoOutlined />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={photo ? photo.name : \"\"} secondary=\"Useful info\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                        <ListItemIcon>\r\n                            <Label />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Labels\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                        <ul style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'left',\r\n                            flexWrap: 'wrap',\r\n                            listStyle: 'none',\r\n                            padding: 0,\r\n                            margin: 0,\r\n                            marginLeft: 5,\r\n                            marginTop: -15,\r\n                        }}>\r\n                            {labels === \"Loading\" ? <CircularProgress size={20} style={{ margin: 10 }} /> :\r\n                                <>\r\n                                    {labels.map((label) => {\r\n                                        return (\r\n                                            <li key={label}>\r\n                                                <LabelChip id={id} label={label} removeLabel={removeLabel} getLabels={getLabels} />\r\n                                            </li>\r\n                                        );\r\n                                    })}\r\n                                    <LabelInputChip addLabel={addLabel} getLabels={getLabels} id={id} />\r\n                                </>\r\n                            }\r\n                        </ul>\r\n                    </ListItem>\r\n                </List>\r\n            </Drawer>\r\n        </div >\r\n    );\r\n}\r\n\r\nfunction LabelChip(props: any) {\r\n\r\n    const classes = useStyles(useTheme());\r\n    const [deleted, setDeleted] = useState(false);\r\n\r\n    return (\r\n        <Chip\r\n            label={props.label}\r\n            onDelete={async () => { setDeleted(true); await props.removeLabel(props.id, props.label); props.getLabels() }}\r\n            className={classes.chip}\r\n            deleteIcon={deleted ? <CircularProgress style={{ height: 20, width: 20, padding: 1.5, marginRight: 7 }} /> : undefined}\r\n        />)\r\n}\r\n\r\nfunction LabelInputChip(props: any) {\r\n    const classes = useStyles(useTheme());\r\n    const [value, setValue] = useState(\"\");\r\n    const [added, setAdded] = useState(false);\r\n\r\n    const handleAdd = async () => {\r\n        setAdded(true);\r\n        await props.addLabel([props.id], [value]);\r\n        setValue(\"\");\r\n        setAdded(false);\r\n        props.getLabels();\r\n    }\r\n\r\n    return (\r\n        <Chip style={{ width: 120 }}\r\n            label={<TextField\r\n                style={{ height: 25, marginBottom: 5, marginLeft: 5 }}\r\n                value={value}\r\n                onChange={(event) => setValue(event.target.value)}\r\n                onKeyPress={(ev) => {\r\n                    if (ev.key === 'Enter') {\r\n                        handleAdd()\r\n                        ev.preventDefault();\r\n                    }\r\n                }}\r\n            />}\r\n            onKeyPress={(ev) => {\r\n                console.log(`Pressed keyCode ${ev.key}`);\r\n                if (ev.key === 'Enter') {\r\n                    // Do code here\r\n                    //TODO::IMPORTANT!\r\n                    ev.preventDefault();\r\n                }\r\n            }}\r\n            onDelete={handleAdd}\r\n            className={classes.chip}\r\n            deleteIcon={added ? <CircularProgress style={{ height: 20, width: 20, padding: 1.5, marginRight: 7 }} /> : < AddCircle style={{ transform: \"rotate(0deg)\" }} />}\r\n        />)\r\n}\r\n\r\nfunction makeSlides(photos: PhotoT[]): any[] {\r\n    return photos.map((photo: PhotoT, index: number) => {\r\n        return (\r\n            <SwiperSlide key={photo.id} virtualIndex={index} style={{ alignSelf: \"center\", justifySelf: \"center\" }}>\r\n                <img\r\n                    className=\"display\"\r\n                    alt={photo.id}\r\n                    style={{\r\n                        objectFit: \"scale-down\",\r\n                        height: \"100vh\",\r\n                        width: `100%`,\r\n                    }}\r\n                    src={baseURL + \"/media/\" + photo.id}\r\n                />\r\n            </SwiperSlide>\r\n        );\r\n    })\r\n}\r\n\r\nconst Carousel = (props: any) => {\r\n    const [key, setKey] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setKey(key + 1)\r\n    }, [props.photos, props.open])\r\n\r\n    return props.photos.length === 0 ? null : <Swiper key={key} className=\"imageHolder\" spaceBetween={50} slidesPerView={1} virtual style={{\r\n        width: `calc(100vw - ${props.open ? drawerWidth : 0}px)`,\r\n        zIndex: -1,\r\n        position: \"absolute\",\r\n    }}\r\n        navigation={{\r\n            prevEl: props.prevRef.current ? props.prevRef.current : undefined,\r\n            nextEl: props.nextRef.current ? props.nextRef.current : undefined,\r\n        }}\r\n        initialSlide={props.index >= props.photos.length ? props.photos.length - 1 : props.index}\r\n        onInit={swiper => {\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            // eslint-disable-next-line no-param-reassign\r\n            swiper.params.navigation.prevEl = props.prevRef.current\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            // eslint-disable-next-line no-param-reassign\r\n            swiper.params.navigation.nextEl = props.nextRef.current\r\n            swiper.navigation.update()\r\n        }}\r\n        onSlideChange={(e) => { props.slideChange(e.activeIndex) }}\r\n    >\r\n        {makeSlides(props.photos)}\r\n    </Swiper>\r\n}","import React, { useCallback, useState, useRef, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { PhotoT } from \"../../Interfaces\";\r\nimport { VariableSizeList as List } from \"react-window\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport { baseURL } from \"../../API\";\r\n\r\nconst useStyles = makeStyles({\r\n    photoDiv: {\r\n        padding: 10,\r\n        \"align-items\": \"center\",\r\n        \"justify-content\": \"center\",\r\n        display: \"flex\",\r\n        position: \"relative\",\r\n        transition: \"0.05s linear\",\r\n    },\r\n    photoBox: { transition: \"0.05s linear\", position: \"absolute\", left: 15, top: 15, height: 20, width: 20 },\r\n});\r\n\r\nfunction Photo(props: any) {\r\n    const realUrl = baseURL + \"/media/\" + props.id\r\n    const [url, setUrl] = useState(\"\");\r\n    useEffect(() => {\r\n        const timeout = setTimeout(() => setUrl(baseURL + \"/media/\" + props.id), 500);\r\n        return () => clearTimeout(timeout)\r\n    }, [props.id])\r\n    useEffect(() => {\r\n        if (!props.isScrolling)\r\n            setUrl(realUrl)\r\n    })\r\n    const padding = props.selected ? 0.9 : 1.0;\r\n    const [vis, setVis] = useState(0);\r\n    const opacity = props.anySelected() ? 255 : vis;\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <div\r\n            className={classes.photoDiv}\r\n            style={{\r\n                height: props.y,\r\n                width: props.x,\r\n            }}\r\n            onMouseEnter={() => setVis(0.4)}\r\n            onMouseLeave={() => setVis(0)}\r\n        >\r\n            <div onClick={props.imageClick}>\r\n                <div style={{ backgroundColor: \"#eeeeee\", height: props.y - 5, width: props.x - 5 }}>\r\n                    <div style={{ transition: \"0.05s linear\", transform: `scale(${padding})`, backgroundImage: url === \"\" ? \"none\" : `url(${url})`, height: props.y - 5, width: props.x - 5, backgroundSize: \"100% 100%\" }} />\r\n                </div>\r\n            </div>\r\n            {(vis || props.anySelected() || true) && <input className={classes.photoBox} style={{ opacity: opacity }} readOnly={true} checked={props.selected} type=\"checkbox\" onClick={props.click} />}\r\n        </div>\r\n    );\r\n}\r\nconst makePhoto = (photo: PhotoT, realH: number, props: any, isScrolling: boolean) => (\r\n    <Photo\r\n        key={photo.id}\r\n        id={photo.id}\r\n        x={(photo.width * realH) / photo.height}\r\n        y={realH}\r\n        click={props.clickHandler(photo.id)}\r\n        imageClick={props.imageClickHandler(photo.id)}\r\n        selected={props.selected.includes(photo.id)}\r\n        anySelected={props.anySelected}\r\n        outZoom={0.9}\r\n        isScrolling={isScrolling}\r\n    />\r\n);\r\n\r\nconst targetHeight = 300;\r\n\r\nconst calculate = (photos: PhotoT[], width: number) => {\r\n    const rowH: number[] = [];\r\n    const rowPics: PhotoT[][] = [];\r\n\r\n    let ptr = 0;\r\n\r\n    while (ptr !== photos.length) {\r\n        let curPics: PhotoT[] = [];\r\n        let curWidth = 0;\r\n\r\n        while (\r\n            ptr !== photos.length &&\r\n            (curWidth === 0 ||\r\n                Math.abs(targetHeight - (targetHeight * width) / curWidth) > Math.abs(targetHeight - (targetHeight * width) / (curWidth + (photos[ptr].width / photos[ptr].height) * targetHeight)))\r\n        ) {\r\n            curPics.push(photos[ptr]);\r\n            curWidth += (photos[ptr].width / photos[ptr].height) * targetHeight;\r\n            ptr++;\r\n        }\r\n\r\n        rowPics.push(curPics);\r\n        if (ptr !== photos.length || width < curWidth) rowH.push((targetHeight * width) / curWidth);\r\n        else rowH.push(targetHeight);\r\n    }\r\n\r\n    return { rowH, rowPics };\r\n};\r\n\r\nconst Row = (altprops: any) =>\r\n    altprops.data.linNum <= altprops.index ? (\r\n        <div style={{ ...altprops.style, display: \"flex\", transition: \"0.05s linear\" }}>\r\n            {altprops.data.rowPics[altprops.index].map((p: PhotoT) => makePhoto(p, altprops.data.rowH[altprops.index], altprops.data.props, altprops.isScrolling))}\r\n        </div>\r\n    ) : (\r\n            <div>{altprops.data.rowPics[altprops.index]}</div>\r\n        );\r\n\r\nconst CustomScrollbars = ({ onScroll, forwardedRef, style, children }: any) => {\r\n    const refSetter = useCallback(\r\n        (scrollbarsRef) => {\r\n            if (scrollbarsRef) {\r\n                forwardedRef(scrollbarsRef.view);\r\n            } else {\r\n                forwardedRef(null);\r\n            }\r\n        },\r\n        [forwardedRef]\r\n    );\r\n\r\n    return (\r\n        <Scrollbars ref={refSetter} style={{ ...style, overflow: \"hidden\" }} onScroll={onScroll}>\r\n            {children}\r\n        </Scrollbars>\r\n    );\r\n};\r\n\r\nconst CustomScrollbarsVirtualList = React.forwardRef((props, ref) => <CustomScrollbars {...props} forwardedRef={ref} />);\r\n\r\nexport default function AbstractPhotoPage(props: {\r\n    photos: PhotoT[];\r\n    height: number;\r\n    width: number;\r\n    clickHandler: (id: string) => () => void;\r\n    imageClickHandler: (id: string) => () => void;\r\n    selected: string[];\r\n    anySelected: any;\r\n    heights: number[];\r\n    lines: any[];\r\n    viewId: string;\r\n    setViewId: (id: string) => void;\r\n}) {\r\n    const [jumped, setJumped] = useState(false);\r\n    const listRef = useRef<List>(null);\r\n    useEffect(() => {\r\n        listRef.current?.resetAfterIndex(0);\r\n        const item = tmpRowPics.findIndex((photos: PhotoT[]) => {\r\n            return photos.filter((p) => p.id === props.viewId).length !== 0;\r\n        });\r\n        if (!jumped && item !== 1) listRef.current?.scrollToItem(item + props.lines.length, \"smart\");\r\n        setJumped(true);\r\n    }, [props.width, props.photos, props.heights]);\r\n    const { rowH: tmpRowH, rowPics: tmpRowPics } = calculate(props.photos, props.width - 12);\r\n    const rowH = [...props.heights, ...tmpRowH];\r\n    const rowPics = [...props.lines, ...tmpRowPics];\r\n    const getItemSize = (index: number) => (index !== rowH.length - 1 ? rowH[index] : rowH[index] + 20);\r\n\r\n    return (\r\n        <List\r\n            useIsScrolling\r\n            overscanCount={10}\r\n            height={props.height}\r\n            ref={listRef}\r\n            itemData={{ rowH, rowPics, props, linNum: props.lines.length }}\r\n            itemCount={rowH.length}\r\n            itemSize={getItemSize}\r\n            width={props.width - 1}\r\n            outerElementType={CustomScrollbarsVirtualList}\r\n        >\r\n            {Row}\r\n        </List>\r\n    );\r\n}\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { CloudDownload, Delete, Info, LibraryAdd } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\n\r\nexport default function TopRightBar(props: any) {\r\n    return (\r\n        <div\r\n            className=\"TopRightBar\"\r\n            style={{\r\n                alignSelf: \"flex-start\",\r\n                justifySelf: \"right\",\r\n                padding: 10,\r\n            }}\r\n        >\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"info\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.info();\r\n                }}\r\n            >\r\n                <Info />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"download\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.download(props.id);\r\n                }}\r\n            >\r\n                <CloudDownload />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"library_add\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.addToAlbum(props.id);\r\n                }}\r\n            >\r\n                <LibraryAdd />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"delete\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.delete(props.id);\r\n                }}\r\n            >\r\n                <Delete />\r\n            </IconButton>\r\n        </div>\r\n    );\r\n}\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { OptionsObject } from \"notistack\";\r\nimport React from \"react\";\r\nimport { FileRejection } from \"react-dropzone\";\r\nimport SnackbarAction from \"./SnackbarAction\";\r\n\r\nexport class UploadErrorSnackbar {\r\n    enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number;\r\n    closeSnackbar: (key?: string | number | undefined) => void;\r\n    snackMsg: string | number | undefined;\r\n\r\n    constructor(enqueueSnackbar: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number, closeSnackbar: (key?: string | number | undefined) => void) {\r\n        this.enqueueSnackbar = enqueueSnackbar;\r\n        this.closeSnackbar = closeSnackbar;\r\n    }\r\n\r\n    static createInstance(\r\n        enqueueSnackbar?: (message: React.ReactNode, options?: OptionsObject | undefined) => string | number,\r\n        closeSnackbar?: (key?: string | number | undefined) => void\r\n    ): null | UploadErrorSnackbar {\r\n        if (enqueueSnackbar && closeSnackbar) return new this(enqueueSnackbar, closeSnackbar);\r\n        else return null;\r\n    }\r\n\r\n    begin(fileRejections: FileRejection[]) {\r\n        let count = 0;\r\n        const errorMessage = (\r\n            <div>\r\n                The following errors occured:\r\n                {fileRejections.map((fileRejection) => (\r\n                    <div key={count++}>{`${fileRejection.file.name}: ${fileRejection.errors[0].message}`}</div>\r\n                ))}\r\n            </div>\r\n        );\r\n        const errorAction = SnackbarAction(this.closeSnackbar);\r\n        if (fileRejections.length !== 0)\r\n            this.enqueueSnackbar(errorMessage, {\r\n                variant: \"error\",\r\n                autoHideDuration: null,\r\n                action: errorAction,\r\n            });\r\n    }\r\n}\r\n","import React, { ChangeEvent, RefObject, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { CssBaseline, AppBar, Toolbar, IconButton, createStyles, Theme, Typography, Backdrop } from \"@material-ui/core\";\r\nimport TopBar from \"./TopBar\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport ViewPage from \"../ViewPage/ViewPage\";\r\nimport AddToAlbum from \"../Shared/AddToAlbum\";\r\nimport { PhotoT, AlbumT } from \"../../Interfaces\";\r\nimport AbstractPhotoPage from \"../Shared/AbstractPhotoPage\";\r\nimport { addPhotos, addPhotosToAlbums, deletePhotos, download, getAlbums, getPhotoLabels, getPhotos } from \"../../API\";\r\nimport TopRightBar from \"./TopRightBar\";\r\nimport AutoSizer from \"react-virtualized-auto-sizer\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { useDropzone, FileRejection } from \"react-dropzone\";\r\nimport { UploadErrorSnackbar } from \"../Snackbars/UploadErrorSnackbar\";\r\nimport { CloudUpload } from \"@material-ui/icons\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nconst maxSize = parseInt(process.env.MAX_SIZE || (50 * 1024 * 1024).toString());\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        appBar: {\r\n            background: \"white\",\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n            },\r\n        },\r\n        menuButton: {\r\n            color: theme.palette.primary.main,\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: {\r\n            ...theme.mixins.toolbar,\r\n            height: 64,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            paddingLeft: 12,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100vh\",\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n    })\r\n);\r\n\r\nexport default function PhotoPage(props: { handleDrawerToggle: () => void; drawerElement: any }) {\r\n    const classes = useStyles();\r\n\r\n    const [photos, setPhotos] = useState<PhotoT[]>([]);\r\n    const [albums, setAlbums] = useState<AlbumT[]>([]);\r\n    const [selected, setSelected] = useState<string[]>([]);\r\n    const [selectable, setSelectable] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showLoadingBar, setShowLoadingBar] = useState(true);\r\n    const [viewId, setViewId] = useState(\"\");\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const { getRootProps, open: openM, getInputProps, acceptedFiles, fileRejections, isDragActive } = useDropzone({\r\n        // Disable click and keydown behavior\r\n        noClick: true,\r\n        noKeyboard: true,\r\n        accept: 'image/jpeg, image/png',\r\n    })\r\n\r\n    useEffect(() => { upload(acceptedFiles, fileRejections) }, [acceptedFiles, fileRejections])\r\n\r\n    const [showSearchBar, setShowSearchBar] = useState(false);\r\n    const [searchBarText, setSearchBarText] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const [autocompleteOptions, setAutocompleteOptions] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (photos.length === 0)\r\n                setAutocompleteOptions([])\r\n            else\r\n                setAutocompleteOptions((await getPhotoLabels(photos.map(photo => photo.id))).data)\r\n\r\n        })()\r\n    }, [photos])\r\n\r\n    const fetchPhotos = async () => {\r\n        setShowLoadingBar(true);\r\n        const resp = await getPhotos(searchTerm);\r\n        if (resp.status === 200) {\r\n            setPhotos(resp.data);\r\n            setShowLoadingBar(false);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    const fetchAlbums = async () => {\r\n        const resp = await getAlbums(\"\");\r\n        if (resp.status === 200) {\r\n            setAlbums(resp.data);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchPhotos();\r\n        fetchAlbums();\r\n    }, [searchTerm]);\r\n\r\n    const history = useHistory();\r\n\r\n    const imageClickHandler = (id: string) => () => {\r\n        if (anySelected()) {\r\n            clickHandler(id)();\r\n        } else {\r\n            history.push(`/view/${id}`);\r\n        }\r\n    };\r\n\r\n    const clickHandler = (id: string) => () => {\r\n        let copy = selected.slice();\r\n        if (copy.includes(id)) copy = copy.filter((v) => v !== id);\r\n        else copy.push(id);\r\n        setSelected(copy);\r\n        if (copy.length === 0) {\r\n            setSelectable(false);\r\n        }\r\n    };\r\n\r\n    const anySelected = () => {\r\n        return selected.length !== 0 || selectable;\r\n    };\r\n\r\n    const cb = async (albumIds: any) => {\r\n        topBarButtonFunctions.unselect();\r\n        await addPhotosToAlbums(selected, albumIds, enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const viewButtonFunctions = {\r\n        delete: async (id: string) => {\r\n            await deletePhoto(id);\r\n        },\r\n        addToAlbum: (id: string) => {\r\n            setSelected([id]);\r\n            setOpen(true);\r\n        },\r\n        download: async (id: string) => {\r\n            await download(\r\n                photos.filter((photo) => id === photo.id),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n    };\r\n\r\n    const deletePhoto = async (pid: any) => {\r\n        setPhotos(photos.filter((p) => p.id !== pid));\r\n        await deletePhotos([pid], enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const topBarButtonFunctions = {\r\n        delete: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await deletePhotos(selected, enqueueSnackbar, closeSnackbar);\r\n            setPhotos(photos.filter((p) => !selected.includes(p.id)));\r\n            await fetchPhotos();\r\n        },\r\n        unselect: () => {\r\n            setSelected([]);\r\n            setSelectable(false);\r\n        },\r\n        upload: () => {\r\n            openM()\r\n        },\r\n        settings: () => {\r\n            //Nav to settings page\r\n        },\r\n        select: () => {\r\n            setSelectable(!selectable);\r\n        },\r\n        addToAlbum: () => {\r\n            setOpen(true);\r\n        },\r\n        download: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await download(\r\n                photos.filter((photo) => selected.includes(photo.id)),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n        search: (s: string) => async () => {\r\n            setSearchTerm(s);\r\n        },\r\n        mobileSearch: () => {\r\n            setShowSearchBar(!showSearchBar);\r\n        },\r\n    };\r\n    const upload = async (files: File[], fileRejections: FileRejection[]) => {\r\n        if (!files) return;\r\n\r\n        const formData = new FormData();\r\n        files.forEach((file) => {\r\n            if (file.size > maxSize) {\r\n                fileRejections.push({ file, errors: [{ message: `File is bigger than ${maxSize} bytes`, code: \"file-too-large\" }] })\r\n            } else {\r\n                formData.append(\"file\", file);\r\n            }\r\n        });\r\n\r\n        const snackbar = UploadErrorSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n        snackbar?.begin(fileRejections)\r\n\r\n        if (formData.getAll(\"file\").length === 0) return;\r\n\r\n        await addPhotos(formData, enqueueSnackbar, closeSnackbar, albums);\r\n        await fetchPhotos();\r\n    };\r\n\r\n    const topRightBar = (id: string, buttonFunctions: any) => {\r\n        return <TopRightBar id={id} buttonFunctions={buttonFunctions} />;\r\n    };\r\n\r\n    const lines = [\r\n        <div></div>,\r\n        <Typography variant=\"h5\" style={{ display: searchTerm === \"\" || !searchTerm ? \"none\" : \"block\", paddingTop: 10, paddingLeft: 5 }}>\r\n            Search results for {searchTerm}:\r\n        </Typography>,\r\n    ];\r\n\r\n    const heights = [12, searchTerm === \"\" || !searchTerm ? 0 : 28];\r\n\r\n    return (\r\n        <div>\r\n            <Switch >\r\n                <Route path=\"/view\">\r\n                    <ViewPage setViewId={setViewId} photos={photos} topRightBar={topRightBar} buttonFunctions={viewButtonFunctions}></ViewPage>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    <div  {...getRootProps({ className: 'dropzone' })} className={classes.root} >\r\n\r\n                        <Backdrop open={isDragActive} transitionDuration={150} style={{\r\n                            zIndex: 1201,\r\n                            backgroundColor: \"#00006666\",\r\n                        }}>\r\n                            <div>\r\n                                <CloudUpload style={{ fontSize: 200, color: \"#1976d2aa\" }}></CloudUpload>\r\n                            </div>\r\n                        </Backdrop>\r\n                        <input {...getInputProps()} />\r\n                        <CssBaseline />\r\n\r\n                        <AppBar position=\"fixed\" className={classes.appBar}>\r\n                            <Toolbar>\r\n                                <IconButton color=\"inherit\" aria-label=\"open drawer\" edge=\"start\" onClick={props.handleDrawerToggle} className={classes.menuButton}>\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                                <TopBar searchBarText={searchBarText} setSearchBarText={setSearchBarText} autocompleteOptions={autocompleteOptions} anySelected={anySelected} buttonFunctions={topBarButtonFunctions} numSelected={() => selected.length} show={showLoadingBar} />\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n                        {props.drawerElement}\r\n\r\n                        <main className={classes.content}>\r\n                            <div className={classes.toolbar} />\r\n                            {showSearchBar && (\r\n                                <AutocompleteSearchBar\r\n                                    options={autocompleteOptions}\r\n                                    search={topBarButtonFunctions.search}\r\n                                    className={classes.onlyMobile}\r\n                                    value={searchBarText}\r\n                                    onChange={(s: string) => setSearchBarText(s)}\r\n                                    onRequestSearch={topBarButtonFunctions.search(searchBarText)}\r\n                                    style={{ marginLeft: -6, borderRadius: 0, alignSelf: \"flex-top\" }}\r\n                                />\r\n                            )}\r\n                            <div style={{ flexGrow: 1 }}>\r\n                                <AutoSizer>\r\n                                    {({ height, width }) => (\r\n                                        <AbstractPhotoPage\r\n                                            height={height - 1}\r\n                                            width={width}\r\n                                            photos={photos}\r\n                                            clickHandler={clickHandler}\r\n                                            selected={selected}\r\n                                            anySelected={anySelected}\r\n                                            imageClickHandler={imageClickHandler}\r\n                                            lines={lines}\r\n                                            heights={heights}\r\n                                            viewId={viewId}\r\n                                            setViewId={setViewId}\r\n                                        />\r\n                                    )}\r\n                                </AutoSizer>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            <AddToAlbum albums={albums} open={open} setOpen={setOpen} cb={cb} />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Search, CreateNewFolder } from \"@material-ui/icons\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport TopBarStyle from \"../Shared/TopBarStyle\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nexport default function TopBar(props: any) {\r\n    const classes = TopBarStyle();\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1 }}>\r\n            <div className={classes.TopBar}>\r\n                <div className={classes.middle}>\r\n                    <AutocompleteSearchBar\r\n                        options={props.autocompleteOptions}\r\n                        search={props.buttonFunctions.search}\r\n                        className={classes.notMobile}\r\n                        value={props.searchBarText}\r\n                        onChange={(s: string) => props.setSearchBarText(s)}\r\n                        onRequestSearch={props.buttonFunctions.search(props.searchBarText)}\r\n                    />\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"search\" onClick={props.buttonFunctions.mobileSearch}>\r\n                        <Search />\r\n                    </IconButton>\r\n                    <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"add\" onClick={props.buttonFunctions.add}>\r\n                        <CreateNewFolder />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            <LinearProgress\r\n                style={{\r\n                    marginTop: -2,\r\n                    display: props.show ? \"block\" : \"none\",\r\n                    flexGrow: 1,\r\n                    marginLeft: -24,\r\n                    marginRight: -24,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\n\r\nexport default function CreateAlbum(props: { cb: (arg0: string) => any; setOpen: (arg0: boolean) => any; open: boolean; albums: AlbumT[] }) {\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const handleClose = (execute: boolean) => async () => {\r\n        if (execute) await props.cb(value);\r\n        setValue(\"\");\r\n        await props.setOpen(false);\r\n    };\r\n    const [value, setValue] = React.useState(\"\");\r\n\r\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setValue(event.target.value);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog fullWidth fullScreen={fullScreen} open={props.open} onClose={handleClose(false)} aria-labelledby=\"responsive-dialog-title\">\r\n                <DialogTitle id=\"responsive-dialog-title\">Add to Album</DialogTitle>\r\n                <DialogContent>\r\n                    <TextField label=\"Name your album\" placeholder=\"My new album\" variant=\"filled\" value={value} onChange={handleChange} fullWidth autoFocus margin=\"dense\" />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose(true)} color=\"primary\">\r\n                        Add\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { CloudDownload, LibraryAdd, Delete, Cancel, CloudUpload, Search, CheckBox, RemoveCircleOutline, Pages, ArrowBack } from \"@material-ui/icons\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport TopBarStyle from \"../../Shared/TopBarStyle\";\r\nimport { LinearProgress } from \"@material-ui/core\";\r\nimport AutocompleteSearchBar from \"../../Shared/SearchBar\";\r\n\r\nexport default function TopBar(props: any) {\r\n    const classes = TopBarStyle();\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1 }}>\r\n            <div className={classes.TopBar}>\r\n                <div className={classes.left}>\r\n                    {props.numSelected() === 0 && (\r\n                        <IconButton style={{ float: \"left\" }} aria-label=\"back\" onClick={() => history.goBack()} className=\"IconButton\">\r\n                            <ArrowBack />\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n                <div className={classes.middle}>\r\n                    <AutocompleteSearchBar\r\n                        options={props.autocompleteOptions}\r\n                        search={props.buttonFunctions.search}\r\n                        className={classes.notMobile}\r\n                        value={props.searchBarText}\r\n                        onChange={(s: string) => props.setSearchBarText(s)}\r\n                        onRequestSearch={props.buttonFunctions.search(props.searchBarText)}\r\n                    />\r\n                </div>\r\n                <div className={classes.right}>\r\n                    <div style={{ float: \"left\" }}>\r\n                        <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"search\" onClick={props.buttonFunctions.mobileSearch}>\r\n                            <Search />\r\n                        </IconButton>\r\n                        {props.numSelected() === 0 && (\r\n                            <IconButton className={classes.onlyMobile} color=\"primary\" aria-label=\"select\" onClick={props.buttonFunctions.select}>\r\n                                <CheckBox />\r\n                            </IconButton>\r\n                        )}\r\n                    </div>\r\n                    {props.numSelected() === 1 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"set as cover\" onClick={props.buttonFunctions.setCover}>\r\n                            <Pages />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() === 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"upload\" onClick={props.buttonFunctions.upload}>\r\n                            <CloudUpload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cancel\" onClick={props.buttonFunctions.unselect}>\r\n                            <Cancel />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"cloud_download\" onClick={props.buttonFunctions.download}>\r\n                            <CloudDownload />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"library_add\" onClick={props.buttonFunctions.addToAlbum}>\r\n                            <LibraryAdd />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"remove\" onClick={props.buttonFunctions.remove}>\r\n                            <RemoveCircleOutline />\r\n                        </IconButton>\r\n                    )}\r\n                    {props.numSelected() !== 0 && (\r\n                        <IconButton className=\"IconButton\" color=\"primary\" aria-label=\"delete\" onClick={props.buttonFunctions.delete}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <LinearProgress\r\n                style={{\r\n                    marginTop: -2,\r\n                    display: props.show ? \"block\" : \"none\",\r\n                    flexGrow: 1,\r\n                    marginLeft: -24,\r\n                    marginRight: -24,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { CloudDownload, Delete, Info, LibraryAdd, Pages, RemoveCircleOutline } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\n\r\nexport default function TopRightBar(props: any) {\r\n    return (\r\n        <div\r\n            className=\"TopRightBar\"\r\n            style={{\r\n                alignSelf: \"flex-start\",\r\n                justifySelf: \"right\",\r\n                padding: 10,\r\n            }}\r\n        >\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"info\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.info();\r\n                }}\r\n            >\r\n                <Info />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"set cover\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.setCover(props.id);\r\n                }}\r\n            >\r\n                <Pages />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"download\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.download(props.id);\r\n                }}\r\n            >\r\n                <CloudDownload />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"library_add\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.addToAlbum(props.id);\r\n                }}\r\n            >\r\n                <LibraryAdd />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"remove\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.remove(props.id);\r\n                }}\r\n            >\r\n                <RemoveCircleOutline />\r\n            </IconButton>\r\n            <IconButton\r\n                className=\"IconButton\"\r\n                color=\"primary\"\r\n                aria-label=\"delete\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.buttonFunctions.delete(props.id);\r\n                }}\r\n            >\r\n                <Delete />\r\n            </IconButton>\r\n        </div>\r\n    );\r\n}\r\n","import React, { ChangeEvent, RefObject, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { CssBaseline, AppBar, Toolbar, IconButton, createStyles, Theme, Typography, Backdrop } from \"@material-ui/core\";\r\nimport TopBar from \"./TopBar\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport ViewPage from \"../../ViewPage/ViewPage\";\r\nimport AddToAlbum from \"../../Shared/AddToAlbum\";\r\nimport { PhotoT, AlbumT } from \"../../../Interfaces\";\r\nimport AbstractPhotoPage from \"../../Shared/AbstractPhotoPage\";\r\nimport { addPhotos, addPhotosToAlbums, deletePhotos, download, getAlbums, getPhotoLabels, getPhotosInAlbum, removePhotosFromAlbum, setCover } from \"../../../API\";\r\nimport TopRightBar from \"./TopRightBar\";\r\nimport AutoSizer from \"react-virtualized-auto-sizer\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { FileRejection, useDropzone } from \"react-dropzone\";\r\nimport { UploadErrorSnackbar } from \"../../Snackbars/UploadErrorSnackbar\";\r\nimport { CloudUpload } from \"@material-ui/icons\";\r\nimport AutocompleteSearchBar from \"../../Shared/SearchBar\";\r\n\r\nconst maxSize = parseInt(process.env.MAX_SIZE || (50 * 1024 * 1024).toString());\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        appBar: {\r\n            background: \"white\",\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n            },\r\n        },\r\n        menuButton: {\r\n            color: theme.palette.primary.main,\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: {\r\n            ...theme.mixins.toolbar,\r\n            height: 64,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            paddingLeft: 12,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100vh\",\r\n        },\r\n    })\r\n);\r\n\r\nexport default function AlbumPhotoPage(props: { handleDrawerToggle: () => void; drawerElement: any; refresh: () => Promise<void> }) {\r\n    //#region Hooks\r\n    const classes = useStyles();\r\n\r\n    const history = useHistory();\r\n\r\n    const id = window.location.pathname.split(\"/\")[2 + process.env.PUBLIC_URL.split('/').length];\r\n\r\n    const [photos, setPhotos] = useState<PhotoT[]>([]);\r\n    const [albums, setAlbums] = useState<AlbumT[]>([]);\r\n    const [selected, setSelected] = useState<string[]>([]);\r\n    const [selectable, setSelectable] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showLoadingBar, setShowLoadingBar] = useState(true);\r\n    const [viewId, setViewId] = useState(\"\");\r\n\r\n    const [showSearchBar, setShowSearchBar] = useState(false);\r\n    const [searchBarText, setSearchBarText] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const [autocompleteOptions, setAutocompleteOptions] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (photos.length === 0)\r\n                setAutocompleteOptions([])\r\n            else\r\n                setAutocompleteOptions((await getPhotoLabels(photos.map(photo => photo.id))).data)\r\n\r\n        })()\r\n    }, [photos])\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const { getRootProps, open: openM, getInputProps, acceptedFiles, fileRejections, isDragActive } = useDropzone({\r\n        // Disable click and keydown behavior\r\n        noClick: true,\r\n        noKeyboard: true,\r\n        accept: 'image/jpeg, image/png',\r\n    })\r\n\r\n    useEffect(() => { upload(acceptedFiles, fileRejections) }, [acceptedFiles, fileRejections])\r\n\r\n    const fetchPhotos = async () => {\r\n        setShowLoadingBar(true);\r\n        const resp = await getPhotosInAlbum(id, searchTerm);\r\n        if (resp.status === 200) {\r\n            setPhotos(resp.data);\r\n            setShowLoadingBar(false);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    const fetchAlbums = async () => {\r\n        const resp = await getAlbums(\"\")\r\n        if (resp.status === 200) {\r\n            setAlbums(resp.data);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchPhotos();\r\n        fetchAlbums();\r\n    }, [searchTerm, id]);\r\n    //#endregion hooks\r\n\r\n    //#region API\r\n\r\n    const cb = async (albumIds: string[]) => {\r\n        topBarButtonFunctions.unselect();\r\n        await addPhotosToAlbums(selected, albumIds, enqueueSnackbar, closeSnackbar);\r\n        await props.refresh();\r\n    };\r\n\r\n    const deletePhoto = async (pid: string) => {\r\n        setPhotos(photos.filter((p) => p.id !== pid));\r\n        await deletePhotos([pid], enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const removePhoto = async (pid: string) => {\r\n        setPhotos(photos.filter((p) => p.id !== pid));\r\n        await removePhotosFromAlbum([pid], id, enqueueSnackbar, closeSnackbar);\r\n    };\r\n\r\n    const upload = async (files: File[], fileRejections: FileRejection[]) => {\r\n        if (!files) return;\r\n\r\n        const formData = new FormData();\r\n        files.forEach((file) => {\r\n            if (file.size > maxSize) {\r\n                fileRejections.push({ file, errors: [{ message: `File is bigger than ${maxSize} bytes`, code: \"file-too-large\" }] })\r\n            } else {\r\n                formData.append(\"file\", file);\r\n            }\r\n        });\r\n\r\n        const snackbar = UploadErrorSnackbar.createInstance(enqueueSnackbar, closeSnackbar);\r\n        snackbar?.begin(fileRejections)\r\n\r\n        if (formData.getAll(\"file\").length === 0) return;\r\n        const data = await addPhotos(formData, enqueueSnackbar, closeSnackbar, albums);\r\n\r\n        await addPhotosToAlbums(data, [id], enqueueSnackbar, closeSnackbar);\r\n        await fetchPhotos();\r\n        await props.refresh();\r\n    };\r\n    //#endregion API\r\n\r\n    //#region handlers\r\n\r\n    const imageClickHandler = (photoId: string) => () => {\r\n        if (anySelected()) {\r\n            clickHandler(photoId)();\r\n        } else {\r\n            history.push(`/albums/open/${id}/view/${photoId}`);\r\n        }\r\n    };\r\n\r\n    const clickHandler = (id: string) => () => {\r\n        let copy = selected.slice();\r\n        if (copy.includes(id)) copy = copy.filter((v) => v !== id);\r\n        else copy.push(id);\r\n        setSelected(copy);\r\n        if (copy.length === 0) {\r\n            setSelectable(false);\r\n        }\r\n    };\r\n\r\n    const anySelected = (): boolean => {\r\n        return selected.length !== 0 || selectable;\r\n    };\r\n\r\n    const viewButtonFunctions = {\r\n        delete: async (id: string) => {\r\n            await deletePhoto(id);\r\n            // await fetchPhotos();\r\n            await props.refresh();\r\n        },\r\n        remove: async (id: string) => {\r\n            await removePhoto(id);\r\n            setPhotos(photos.filter((p) => p.id !== id));\r\n            // await fetchPhotos();\r\n            await props.refresh();\r\n        },\r\n        addToAlbum: (id: string) => {\r\n            setSelected([id]);\r\n            setOpen(true);\r\n        },\r\n        setCover: async (photoID: string) => {\r\n            await setCover(id, photoID);\r\n            await props.refresh();\r\n        },\r\n        download: async (id: string) => {\r\n            await download(\r\n                photos.filter((photo) => id === photo.id),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n    };\r\n\r\n    const topBarButtonFunctions = {\r\n        setCover: async () => {\r\n            await setCover(id, selected[0]);\r\n            topBarButtonFunctions.unselect();\r\n            await props.refresh();\r\n        },\r\n        delete: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await deletePhotos(selected, enqueueSnackbar, closeSnackbar);\r\n            setPhotos(photos.filter((p) => !selected.includes(p.id)));\r\n\r\n            await props.refresh();\r\n        },\r\n        remove: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            await removePhotosFromAlbum(selected, id, enqueueSnackbar, closeSnackbar);\r\n            setPhotos(photos.filter((p) => !selected.includes(p.id)));\r\n\r\n            await props.refresh();\r\n        },\r\n        unselect: () => {\r\n            setSelected([]);\r\n            setSelectable(false);\r\n        },\r\n        upload: () => {\r\n            openM()\r\n        },\r\n        settings: () => {\r\n            //Nav to settings page\r\n        },\r\n        select: () => {\r\n            setSelectable(!selectable);\r\n        },\r\n        addToAlbum: () => {\r\n            setOpen(true);\r\n        },\r\n        download: async () => {\r\n            topBarButtonFunctions.unselect();\r\n            download(\r\n                photos.filter((photo) => selected.includes(photo.id)),\r\n                enqueueSnackbar,\r\n                closeSnackbar\r\n            );\r\n        },\r\n        search: (s: string) => async () => {\r\n            setSearchTerm(s);\r\n        },\r\n        mobileSearch: () => {\r\n            setShowSearchBar(!showSearchBar);\r\n        },\r\n    };\r\n\r\n    //#endregion handlers\r\n\r\n    const topRightBar = (id: string, buttonFunctions: any) => {\r\n        return <TopRightBar id={id} buttonFunctions={buttonFunctions} />;\r\n    };\r\n\r\n    const lines = [\r\n        <div> </div>,\r\n        <Typography variant=\"h4\" style={{ paddingTop: 10, paddingLeft: 5 }}>\r\n            {(albums.find((album: AlbumT) => album.id.toString() === id) || { name: \"\" }).name}\r\n        </Typography>,\r\n        <Typography variant=\"h5\" style={{ display: searchTerm === \"\" || !searchTerm ? \"none\" : \"block\", paddingLeft: 5 }}>\r\n            Search results for {searchTerm}:\r\n        </Typography>,\r\n    ];\r\n\r\n    const heights = [12, 42, searchTerm === \"\" || !searchTerm ? 0 : 28];\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route path=\"/albums/open/:albumID/view\">\r\n                    <ViewPage setViewId={setViewId} photos={photos} topRightBar={topRightBar} buttonFunctions={viewButtonFunctions}></ViewPage>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                    <div  {...getRootProps({ className: 'dropzone' })} className={classes.root} >\r\n                        <Backdrop open={isDragActive} transitionDuration={150} style={{\r\n                            zIndex: 1201,\r\n                            backgroundColor: \"#00006666\",\r\n                        }}>\r\n                            <div>\r\n                                <CloudUpload style={{ fontSize: 200, color: \"#1976d2aa\" }}></CloudUpload>\r\n                            </div>\r\n                        </Backdrop>\r\n\r\n                        <input {...getInputProps()} />\r\n                        <CssBaseline />\r\n\r\n                        <AppBar position=\"fixed\" className={classes.appBar}>\r\n                            <Toolbar>\r\n                                <IconButton color=\"inherit\" aria-label=\"open drawer\" edge=\"start\" onClick={props.handleDrawerToggle} className={classes.menuButton}>\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                                <TopBar searchBarText={searchBarText} setSearchBarText={setSearchBarText} autocompleteOptions={autocompleteOptions} anySelected={anySelected} buttonFunctions={topBarButtonFunctions} numSelected={() => selected.length} show={showLoadingBar} />\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n                        {props.drawerElement}\r\n\r\n                        <main className={classes.content}>\r\n                            <div className={classes.toolbar} />\r\n                            {showSearchBar && (\r\n                                <AutocompleteSearchBar\r\n                                    options={autocompleteOptions}\r\n                                    search={topBarButtonFunctions.search}\r\n                                    className={classes.onlyMobile}\r\n                                    value={searchBarText}\r\n                                    onChange={(s: string) => setSearchBarText(s)}\r\n                                    onRequestSearch={topBarButtonFunctions.search(searchBarText)}\r\n                                    style={{ marginLeft: -6, borderRadius: 0, alignSelf: \"flex-top\" }}\r\n                                />\r\n                            )}\r\n                            <div style={{ flexGrow: 1 }}>\r\n                                <AutoSizer>\r\n                                    {({ height, width }) => (\r\n                                        <AbstractPhotoPage\r\n                                            height={height - 1}\r\n                                            width={width}\r\n                                            photos={photos}\r\n                                            clickHandler={clickHandler}\r\n                                            selected={selected}\r\n                                            anySelected={anySelected}\r\n                                            imageClickHandler={imageClickHandler}\r\n                                            lines={lines}\r\n                                            heights={heights}\r\n                                            viewId={viewId}\r\n                                            setViewId={setViewId}\r\n                                        />\r\n                                    )}\r\n                                </AutoSizer>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            <AddToAlbum albums={albums} open={open} setOpen={setOpen} cb={cb}></AddToAlbum>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport { clearCover, deleteAlbum, renameAlbum } from \"../../API\";\r\n\r\nexport default function AlbumInfo(props: { album: AlbumT; open: boolean; setOpen: (arg0: boolean) => any; fetchAlbums: () => Promise<void> }) {\r\n    const theme = useTheme();\r\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n    const [nameField, setNameField] = useState(props.album.name);\r\n    const [hasCover, setHasCover] = useState(props.album.cover !== null);\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            setNameField(props.album.name);\r\n            setHasCover(props.album.cover !== null);\r\n        }\r\n    }, [props.open]);\r\n\r\n    const handleClose = (execute: boolean) => async () => {\r\n        let ex = false;\r\n        if (execute && props.album.name !== nameField) {\r\n            ex = true;\r\n            await renameAlbum(props.album.id, nameField);\r\n        }\r\n        if (execute && props.album.cover !== null && !hasCover) {\r\n            ex = true;\r\n            await clearCover(props.album.id);\r\n        }\r\n\r\n        if (ex) await props.fetchAlbums();\r\n\r\n        await props.setOpen(false);\r\n    };\r\n\r\n    const deleteThis = async () => {\r\n        await deleteAlbum(props.album.id);\r\n        await props.fetchAlbums();\r\n        await handleClose(false)();\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog fullScreen={fullScreen} open={props.open} onClose={handleClose(false)} aria-labelledby=\"responsive-dialog-title\">\r\n                <DialogTitle id=\"responsive-dialog-title\">Settings of {props.album.name}</DialogTitle>\r\n                <DialogContent>\r\n                    <Button style={{ backgroundColor: \"#dddddd\" }} disabled={!hasCover} onClick={() => setHasCover(false)}>\r\n                        {hasCover ? \"Clear cover\" : \"No album cover\"}\r\n                    </Button>\r\n                    <br></br>\r\n                    <br></br>\r\n                    <TextField\r\n                        value={nameField}\r\n                        onChange={(e) => setNameField(e.target.value)}\r\n                        inputProps={{ style: { fontSize: 20 } }} // font size of input text\r\n                        InputLabelProps={{ style: { fontSize: 20 } }} // font size of input label\r\n                    ></TextField>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={deleteThis} color=\"primary\" autoFocus>\r\n                        Delete Album\r\n                    </Button>\r\n                    <Button onClick={handleClose(false)} color=\"primary\" autoFocus>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleClose(true)} color=\"primary\" autoFocus>\r\n                        Save\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useCallback, useState, useRef, useEffect } from \"react\";\r\nimport { createMuiTheme, createStyles, makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport { VariableSizeList as List } from \"react-window\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport { GridList, GridListTile, GridListTileBar, IconButton } from \"@material-ui/core\";\r\nimport { PhotoAlbum, Info } from \"@material-ui/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AlbumInfo from \"../AlbumPage/AlbumInfo\";\r\nimport { baseURL } from \"../../API\";\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: \"#cccccc\",\r\n            dark: \"#cccccc\",\r\n            light: \"#cccccc\",\r\n        },\r\n    },\r\n});\r\n\r\nfunction Album(props: { album: AlbumT; click: () => void; fetchAlbums: () => Promise<void>; dimension: number }) {\r\n    const useStyles = makeStyles(() =>\r\n        createStyles({\r\n            root: {\r\n                overflow: \"hidden\",\r\n                padding: 5,\r\n                paddingTop: 10,\r\n            },\r\n            icon: {\r\n                color: \"rgba(255, 255, 255, 0.54)\",\r\n            },\r\n            photoDiv: {\r\n                margin: 5,\r\n                // height: props.y,\r\n                // width: props.x,\r\n                // \"align-items\": \"center\",\r\n                // \"justify-content\": \"center\",\r\n                display: \"flex\",\r\n                flexFlow: \"row wrap\",\r\n                // background: \"#aaaaaa33\",\r\n                // position: \"relative\",\r\n            },\r\n            // photoBox: { transition: \"0.07s all  linear\", position: \"absolute\", left: 15, top: 15, height: 20, width: 20, opacity: opacity },\r\n        })\r\n    );\r\n\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [openInfo, setOpenInfo] = useState(false);\r\n\r\n    const onImageClick = () => {\r\n        history.push(`/albums/open/${props.album.id}`);\r\n    };\r\n\r\n    const onInfoClick = () => { };\r\n\r\n    return (\r\n        <GridList className={classes.root}>\r\n            <GridListTile key={props.album.id} style={{ height: props.dimension, width: props.dimension, backgroundColor: \"white\" }} onClick={onImageClick}>\r\n                {props.album.cover === null ? (\r\n                    <PhotoAlbum style={{ height: props.dimension, width: props.dimension, color: \"#666666\" }} />\r\n                ) : (\r\n                        <div\r\n                            style={{\r\n                                backgroundImage: `url(${baseURL + \"/media/\" + props.album.cover})`,\r\n                                backgroundSize: \"cover\",\r\n                                backgroundPosition: \"center\",\r\n                                height: props.dimension,\r\n                                width: props.dimension,\r\n                            }}\r\n                        />\r\n                    )}\r\n                <GridListTileBar\r\n                    title={props.album.name}\r\n                    subtitle={<span>{props.album.imagecount} elements</span>}\r\n                    actionIcon={\r\n                        <div\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                onInfoClick();\r\n                            }}\r\n                        >\r\n                            <ThemeProvider theme={theme}>\r\n                                <IconButton aria-label={`info about ${props.album.name}`} color=\"primary\" onClick={() => setOpenInfo(true)} className={classes.icon}>\r\n                                    <Info />\r\n                                </IconButton>\r\n                            </ThemeProvider>\r\n                        </div>\r\n                    }\r\n                />\r\n            </GridListTile>\r\n            <AlbumInfo album={props.album} open={openInfo} setOpen={setOpenInfo} fetchAlbums={props.fetchAlbums}></AlbumInfo>\r\n        </GridList>\r\n    );\r\n}\r\n\r\nconst makeAlbum = (album: AlbumT, dimension: number, props: any) => <Album key={album.id} album={album} dimension={dimension} click={props.openAlbum(album)} fetchAlbums={props.fetchAlbums} />;\r\n//need to pass h/w too tho\r\n\r\nconst targetHeight = 200;\r\n\r\nconst calculate = (photos: AlbumT[], width: number) => {\r\n    const rowH: number[] = [];\r\n    const rowPics: AlbumT[][] = [];\r\n\r\n    let ptr = 0;\r\n    let setH = -1;\r\n    while (ptr !== photos.length) {\r\n        let curPics: AlbumT[] = [];\r\n        let curWidth = 0;\r\n\r\n        while (ptr !== photos.length && (curWidth === 0 || Math.abs(targetHeight - (targetHeight * width) / curWidth) > Math.abs(targetHeight - (targetHeight * width) / (curWidth + targetHeight)))) {\r\n            curPics.push(photos[ptr]);\r\n            curWidth += targetHeight;\r\n            ptr++;\r\n        }\r\n\r\n        if (setH === -1) setH = (targetHeight * width) / curWidth;\r\n\r\n        if (rowPics.length === 0 && curWidth <= width && ptr === photos.length) rowH.push(targetHeight);\r\n        else rowH.push(setH);\r\n        rowPics.push(curPics);\r\n    }\r\n\r\n    return { rowH, rowPics };\r\n};\r\n\r\nconst Row = (altprops: any) =>\r\n    altprops.data.linNum <= altprops.index ? (\r\n        <div style={{ ...altprops.style, display: \"flex\", transition: \"0.05s linear\" }}>\r\n            {altprops.data.rowPics[altprops.index].map((a: AlbumT) => makeAlbum(a, altprops.data.rowH[altprops.index], altprops.data.props))}\r\n        </div>\r\n    ) : (\r\n            <div>{altprops.data.rowPics[altprops.index]}</div>\r\n        );\r\n\r\nconst CustomScrollbars = ({ onScroll, forwardedRef, style, children }: any) => {\r\n    const refSetter = useCallback(\r\n        (scrollbarsRef) => {\r\n            if (scrollbarsRef) {\r\n                forwardedRef(scrollbarsRef.view);\r\n            } else {\r\n                forwardedRef(null);\r\n            }\r\n        },\r\n        [forwardedRef]\r\n    );\r\n\r\n    return (\r\n        <Scrollbars ref={refSetter} style={{ ...style, overflow: \"hidden\" }} onScroll={onScroll}>\r\n            {children}\r\n        </Scrollbars>\r\n    );\r\n};\r\n\r\nconst CustomScrollbarsVirtualList = React.forwardRef((props, ref) => <CustomScrollbars {...props} forwardedRef={ref} />);\r\n\r\nexport default function AbstractAlbumPage(props: {\r\n    albums: AlbumT[];\r\n    height: number;\r\n    width: number;\r\n    openAlbum: (arg0: AlbumT) => () => void;\r\n    fetchAlbums: () => void;\r\n    heights: number[];\r\n    lines: any[];\r\n}) {\r\n    const listRef = useRef<List>(null);\r\n    useEffect(() => listRef.current?.resetAfterIndex(0), [props.width, props.albums, props.heights]);\r\n    let { rowH, rowPics } = calculate(props.albums, props.width - 20);\r\n    rowH = [...props.heights, ...rowH];\r\n    rowPics = [...props.lines, ...rowPics];\r\n    const getItemSize = (index: number) => rowH[index];\r\n\r\n    return (\r\n        <List\r\n            overscanCount={10}\r\n            height={props.height}\r\n            ref={listRef}\r\n            itemData={{ rowH, rowPics, props, linNum: props.lines.length }}\r\n            itemCount={rowH.length}\r\n            itemSize={getItemSize}\r\n            width={props.width - 1}\r\n            outerElementType={CustomScrollbarsVirtualList}\r\n        >\r\n            {Row}\r\n        </List>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { CssBaseline, AppBar, Toolbar, IconButton, createStyles, Theme, Typography } from \"@material-ui/core\";\r\nimport TopBar from \"./TopBar\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { AlbumT } from \"../../Interfaces\";\r\nimport CreateAlbum from \"./CreateAlbum\";\r\nimport AlbumPhotoPage from \"./AlbumPhotoPage/AlbumPhotoPage\";\r\nimport AbstractAlbumPage from \"../Shared/AbstractAlbumPage\";\r\nimport AutoSizer from \"react-virtualized-auto-sizer\";\r\nimport SearchBar from \"material-ui-search-bar\";\r\nimport { createAlbum, getAlbums } from \"../../API\";\r\nimport AutocompleteSearchBar from \"../Shared/SearchBar\";\r\n\r\nconst drawerWidth = 240;\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        appBar: {\r\n            background: \"white\",\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n            },\r\n        },\r\n        menuButton: {\r\n            color: theme.palette.primary.main,\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: {\r\n            ...theme.mixins.toolbar,\r\n            height: 64,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        onlyMobile: {\r\n            [theme.breakpoints.up(\"md\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            paddingLeft: 12,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100vh\",\r\n        },\r\n    })\r\n);\r\n\r\nexport default function AlbumPage(props: { handleDrawerToggle: () => void; drawerElement: any }) {\r\n    const classes = useStyles();\r\n\r\n    const [albums, setAlbums] = useState<AlbumT[]>([]);\r\n    const [openCreateAlbum, setOpenCreateAlbum] = useState(false);\r\n    const [showLoadingBar, setShowLoadingBar] = useState(true);\r\n\r\n    const [showSearchBar, setShowSearchBar] = useState(false);\r\n    const [searchBarText, setSearchBarText] = useState(\"\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [autocompleteOptions, setAutocompleteOption] = useState<string[]>([]);\r\n\r\n    const fetchAlbums = async () => {\r\n        setShowLoadingBar(true);\r\n        const resp = await getAlbums(searchTerm);\r\n        if (resp.status === 200) {\r\n            setAlbums(resp.data);\r\n            setShowLoadingBar(false);\r\n        } else {\r\n            window.alert(await resp.data);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchAlbums();\r\n    }, [searchTerm]);\r\n\r\n    const topBarButtonFunctions = {\r\n        add: async () => {\r\n            setOpenCreateAlbum(true);\r\n        },\r\n        search: (s: string) => async () => {\r\n            setSearchTerm(s);\r\n        },\r\n        mobileSearch: () => {\r\n            setShowSearchBar(!showSearchBar);\r\n        },\r\n    };\r\n\r\n    const createAlbumCallback = async (name: string) => {\r\n        await createAlbum(name);\r\n        await fetchAlbums();\r\n    };\r\n\r\n    const openAlbum = () => () => { };\r\n\r\n    const heights = [searchTerm === \"\" || !searchTerm ? 0 : 20];\r\n\r\n    const lines = [\r\n        <Typography variant=\"h5\" style={{ display: searchTerm === \"\" || !searchTerm ? \"none\" : \"block\" }}>\r\n            Search results for {searchTerm}:\r\n        </Typography>,\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route path=\"/albums/open\">\r\n                    <AlbumPhotoPage refresh={fetchAlbums} drawerElement={props.drawerElement} handleDrawerToggle={props.handleDrawerToggle} />\r\n                </Route>\r\n                <Route path=\"/albums/\">\r\n                    <div className={classes.root}>\r\n                        <CssBaseline />\r\n\r\n                        <AppBar position=\"fixed\" className={classes.appBar}>\r\n                            <Toolbar>\r\n                                <IconButton color=\"inherit\" aria-label=\"open drawer\" edge=\"start\" onClick={props.handleDrawerToggle} className={classes.menuButton}>\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                                <TopBar searchBarText={searchBarText} setSearchBarText={setSearchBarText} autocompleteOptions={autocompleteOptions} buttonFunctions={topBarButtonFunctions} show={showLoadingBar} />\r\n                            </Toolbar>\r\n                        </AppBar>\r\n\r\n                        {props.drawerElement}\r\n\r\n                        <main className={classes.content}>\r\n                            <div className={classes.toolbar} />\r\n                            {showSearchBar && (\r\n                                <AutocompleteSearchBar\r\n                                    options={autocompleteOptions}\r\n                                    search={topBarButtonFunctions.search}\r\n                                    className={classes.onlyMobile}\r\n                                    value={searchBarText}\r\n                                    onChange={(s: string) => setSearchBarText(s)}\r\n                                    onRequestSearch={topBarButtonFunctions.search(searchBarText)}\r\n                                    style={{ marginLeft: -6, borderRadius: 0, alignSelf: \"flex-top\" }}\r\n                                />\r\n                            )}\r\n                            <div style={{ flexGrow: 1 }}>\r\n                                <AutoSizer>\r\n                                    {({ height, width }) => (\r\n                                        <AbstractAlbumPage height={height - 1} width={width} albums={albums} openAlbum={openAlbum} fetchAlbums={fetchAlbums} lines={lines} heights={heights} />\r\n                                    )}\r\n                                </AutoSizer>\r\n                            </div>\r\n                        </main>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            <CreateAlbum albums={albums} open={openCreateAlbum} setOpen={setOpenCreateAlbum} cb={createAlbumCallback} />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Divider, Drawer, Hidden, List, ListItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme, Theme, createStyles } from \"@material-ui/core/styles\";\r\nimport PhotoPage from \"./PhotoPage/PhotoPage\";\r\nimport { Photo, PhotoAlbum } from \"@material-ui/icons\";\r\nimport { Switch, Route, useHistory, useLocation } from \"react-router-dom\";\r\nimport AlbumPage from \"./AlbumPage/AlbumPage\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        drawer: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: drawerWidth,\r\n                flexShrink: 0,\r\n            },\r\n        },\r\n        appBar: {\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                width: `calc(100% - ${drawerWidth}px)`,\r\n                marginLeft: drawerWidth,\r\n                background: \"white\",\r\n            },\r\n        },\r\n        menuButton: {\r\n            marginRight: theme.spacing(2),\r\n            [theme.breakpoints.up(\"sm\")]: {\r\n                display: \"none\",\r\n            },\r\n        },\r\n        // necessary for content to be below app bar\r\n        toolbar: theme.mixins.toolbar,\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        topleft: {\r\n            color: \"#666666\",\r\n            fontSize: \"xx-large\",\r\n            display: \"flex\",\r\n            \"justify-content\": \"center\",\r\n            \"align-items\": \"center\",\r\n            height: 64,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            padding: theme.spacing(3),\r\n        },\r\n    })\r\n);\r\n\r\nexport default function ResponsiveDrawer({ window }: any) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n    const handleDrawerToggle = () => {\r\n        setMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n\r\n    const drawer = (\r\n        <div>\r\n            <div className={classes.toolbar}>\r\n                <div className={classes.topleft}>ImageStore</div>\r\n            </div>\r\n            <Divider />\r\n            <List>\r\n                <ListItem\r\n                    button\r\n                    selected={location.pathname === \"/\"}\r\n                    onClick={() => {\r\n                        history.push(\"/\");\r\n                        setMobileOpen(false);\r\n                    }}\r\n                >\r\n                    <ListItemIcon>\r\n                        <Photo />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"Photos\" />\r\n                </ListItem>\r\n                <ListItem\r\n                    button\r\n                    selected={location.pathname.startsWith(\"/albums\")}\r\n                    onClick={() => {\r\n                        history.push(\"/albums\");\r\n                        setMobileOpen(false);\r\n                    }}\r\n                >\r\n                    <ListItemIcon>\r\n                        <PhotoAlbum />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"Albums\" />\r\n                </ListItem>\r\n            </List>\r\n        </div>\r\n    );\r\n\r\n    const container = window !== undefined ? () => window().document.body : undefined;\r\n\r\n    const drawerElement = (\r\n        <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n            {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\r\n            <Hidden smUp implementation=\"css\">\r\n                <Drawer\r\n                    container={container}\r\n                    variant=\"temporary\"\r\n                    anchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\r\n                    open={mobileOpen}\r\n                    onClose={handleDrawerToggle}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    ModalProps={{\r\n                        keepMounted: true, // Better open performance on mobile.\r\n                    }}\r\n                >\r\n                    {drawer}\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden xsDown implementation=\"css\">\r\n                <Drawer\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    {drawer}\r\n                </Drawer>\r\n            </Hidden>\r\n        </nav>\r\n    );\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/albums\">\r\n                <AlbumPage drawerElement={drawerElement} handleDrawerToggle={handleDrawerToggle} />\r\n            </Route>\r\n            <Route path=\"/\">\r\n                <PhotoPage drawerElement={drawerElement} handleDrawerToggle={handleDrawerToggle} />\r\n            </Route>\r\n        </Switch>\r\n    );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport ResponsiveDrawer from \"./Components/Page\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\r\nimport { SnackbarProvider } from \"notistack\";\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: \"#444444\",\r\n            dark: \"#000000\",\r\n            light: \"#000000\",\r\n        },\r\n        secondary: {\r\n            main: \"#ff0000\",\r\n        },\r\n        background: {\r\n            // default: \"#00ff00\", background behind the photos while in miniview; change for dark mode\r\n            // paper: \"#0000ff\" searchbar + drawer on the left\r\n        },\r\n    },\r\n});\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Router basename={process.env.PUBLIC_URL}>\r\n            <ThemeProvider theme={theme}>\r\n                <SnackbarProvider\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'right',\r\n                    }}\r\n                >\r\n                    <ResponsiveDrawer />\r\n                </SnackbarProvider>\r\n            </ThemeProvider>\r\n        </Router>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}